{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Wiki de l'environnement Seatizen Vous retrouverez sur ces pages ce qu'il pour comprendre : Comment d\u00e9ployer les planches Mettre en place le blueboat Faire une acquisition de GCP Envoyer une session seatizen sur Zenodo Comprendre la structure d'un programme Pour bien exploiter un outil ou un tutoriel, il est essentiel de comprendre comment interagir avec le code. La premi\u00e8re \u00e9tape consiste \u00e0 identifier les arguments d'entr\u00e9e , qui d\u00e9finissent le comportement du programme. Identifier le point d'entr\u00e9e Dans un d\u00e9p\u00f4t GitHub, le script principal (celui que l'on ex\u00e9cute) se nomme g\u00e9n\u00e9ralement main.py , inference.py ou encore workflow.py . C'est l\u00e0 que se trouve la logique globale du projet. Analyser la fonction parse_args La plupart des scripts Python utilisent une fonction nomm\u00e9e parse_args (souvent bas\u00e9e sur la biblioth\u00e8que argparse ). Elle sert de \"menu\" en listant tous les param\u00e8tres que l'utilisateur peut modifier en ligne de commande. Prenons l'exemple du script zenodo-auto-update.py issu du d\u00e9p\u00f4t zenodo-tools : def parse_args(): parser = argparse.ArgumentParser( prog=\"zenodo-auto-update\", description=\"R\u00e9cup\u00e8re les sessions en ligne pour alimenter le Seatizen Atlas.\" ) # Communaut\u00e9s \u00e0 parcourir parser.add_argument(\"-fc\", \"--fetch_communities\", default=[\"seatizen-data\"], help=\"Liste des communaut\u00e9s Zenodo \u00e0 interroger.\") # Chemins de stockage et m\u00e9tadonn\u00e9es parser.add_argument(\"-psa\", \"--path_seatizen_atlas_folder\", default=\"./seatizen_atlas_folder\", help=\"Dossier de stockage des donn\u00e9es.\") parser.add_argument(\"-pmj\", \"--path_metadata_json\", default=\"./metadata/metadata_seatizen_atlas.json\", help=\"Chemin vers le fichier de m\u00e9tadonn\u00e9es JSON.\") return parser.parse_args() Ce qu'il faut retenir En lisant ce bloc de code, on comprend imm\u00e9diatement les besoins du programme : La source : Le nom de la communaut\u00e9 Zenodo \u00e0 cibler ( --fetch_communities ). La destination : L'emplacement o\u00f9 les donn\u00e9es seront t\u00e9l\u00e9charg\u00e9es ( --path_seatizen_atlas_folder ). La configuration : Le fichier JSON contenant les m\u00e9tadonn\u00e9es de r\u00e9f\u00e9rence ( --path_metadata_json ). Chaque argument poss\u00e8de une valeur par d\u00e9faut ( default ), ce qui permet de lancer le programme rapidement, tout en gardant la flexibilit\u00e9 de personnaliser les chemins selon vos besoins. Liste des environnements conda pr\u00e9sent sur le pc Pour lister les environnements conda, on utilise la commande conda env list : # conda environments: # base * /home/bioeos/miniconda3 # Environnement de base, ne rien t\u00e9l\u00e9charger ici. aina_env /home/bioeos/miniconda3/envs/aina_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/cpce-workflow cog_server_env /home/bioeos/miniconda3/envs/cog_server_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/cog-server ctoi_env /home/bioeos/miniconda3/envs/ctoi_env # Environnement pour le dossier /home/bioeos/Documents/project_hub/worldfish dinovdeau_env /home/bioeos/miniconda3/envs/dinovdeau_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/dinovdeau drone_inference_env /home/bioeos/miniconda3/envs/drone_inference_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/drone-inference drone_upscaling_env /home/bioeos/miniconda3/envs/drone_upscaling_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/drone-upscaling drone_workflow_env /home/bioeos/miniconda3/envs/drone_workflow_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/drone-workflow ign_upscaling_env /home/bioeos/miniconda3/envs/ign_upscaling_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/ign-upscaling inference_env /home/bioeos/miniconda3/envs/inference_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/plancha-inference kevine_yolo_env /home/bioeos/miniconda3/envs/kevine_yolo_env # Environnement pour les codes de kevine dans /home/bioeos/Documents/project_hub/miscellanous/kevine_yolo plancha_env /home/bioeos/miniconda3/envs/plancha_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/plancha-workflow recif3D_env /home/bioeos/miniconda3/envs/recif3D_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/recif3d-workflow sam3 /home/bioeos/miniconda3/envs/sam3 # Environnement de test pour le d\u00e9p\u00f4t Sam3 seatizen_monitoring_env /home/bioeos/miniconda3/envs/seatizen_monitoring_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/seatizen-monitoring pour la partie backend segment_env /home/bioeos/miniconda3/envs/segment_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/the-point-is-the-mask test_env /home/bioeos/miniconda3/envs/test_env # Environnement de test avec python 3.12 wiki_env /home/bioeos/miniconda3/envs/wiki_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/wiki-seatizen zenodo_env /home/bioeos/miniconda3/envs/zenodo_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/zenodo-tools On active un environnement avec la commande suivante : conda activate zenodo_env","title":"Introduction"},{"location":"#wiki-de-lenvironnement-seatizen","text":"Vous retrouverez sur ces pages ce qu'il pour comprendre : Comment d\u00e9ployer les planches Mettre en place le blueboat Faire une acquisition de GCP Envoyer une session seatizen sur Zenodo","title":"Wiki de l'environnement Seatizen"},{"location":"#comprendre-la-structure-dun-programme","text":"Pour bien exploiter un outil ou un tutoriel, il est essentiel de comprendre comment interagir avec le code. La premi\u00e8re \u00e9tape consiste \u00e0 identifier les arguments d'entr\u00e9e , qui d\u00e9finissent le comportement du programme.","title":"Comprendre la structure d'un programme"},{"location":"#identifier-le-point-dentree","text":"Dans un d\u00e9p\u00f4t GitHub, le script principal (celui que l'on ex\u00e9cute) se nomme g\u00e9n\u00e9ralement main.py , inference.py ou encore workflow.py . C'est l\u00e0 que se trouve la logique globale du projet.","title":"Identifier le point d'entr\u00e9e"},{"location":"#analyser-la-fonction-parse_args","text":"La plupart des scripts Python utilisent une fonction nomm\u00e9e parse_args (souvent bas\u00e9e sur la biblioth\u00e8que argparse ). Elle sert de \"menu\" en listant tous les param\u00e8tres que l'utilisateur peut modifier en ligne de commande. Prenons l'exemple du script zenodo-auto-update.py issu du d\u00e9p\u00f4t zenodo-tools : def parse_args(): parser = argparse.ArgumentParser( prog=\"zenodo-auto-update\", description=\"R\u00e9cup\u00e8re les sessions en ligne pour alimenter le Seatizen Atlas.\" ) # Communaut\u00e9s \u00e0 parcourir parser.add_argument(\"-fc\", \"--fetch_communities\", default=[\"seatizen-data\"], help=\"Liste des communaut\u00e9s Zenodo \u00e0 interroger.\") # Chemins de stockage et m\u00e9tadonn\u00e9es parser.add_argument(\"-psa\", \"--path_seatizen_atlas_folder\", default=\"./seatizen_atlas_folder\", help=\"Dossier de stockage des donn\u00e9es.\") parser.add_argument(\"-pmj\", \"--path_metadata_json\", default=\"./metadata/metadata_seatizen_atlas.json\", help=\"Chemin vers le fichier de m\u00e9tadonn\u00e9es JSON.\") return parser.parse_args()","title":"Analyser la fonction parse_args"},{"location":"#ce-quil-faut-retenir","text":"En lisant ce bloc de code, on comprend imm\u00e9diatement les besoins du programme : La source : Le nom de la communaut\u00e9 Zenodo \u00e0 cibler ( --fetch_communities ). La destination : L'emplacement o\u00f9 les donn\u00e9es seront t\u00e9l\u00e9charg\u00e9es ( --path_seatizen_atlas_folder ). La configuration : Le fichier JSON contenant les m\u00e9tadonn\u00e9es de r\u00e9f\u00e9rence ( --path_metadata_json ). Chaque argument poss\u00e8de une valeur par d\u00e9faut ( default ), ce qui permet de lancer le programme rapidement, tout en gardant la flexibilit\u00e9 de personnaliser les chemins selon vos besoins.","title":"Ce qu'il faut retenir"},{"location":"#liste-des-environnements-conda-present-sur-le-pc","text":"Pour lister les environnements conda, on utilise la commande conda env list : # conda environments: # base * /home/bioeos/miniconda3 # Environnement de base, ne rien t\u00e9l\u00e9charger ici. aina_env /home/bioeos/miniconda3/envs/aina_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/cpce-workflow cog_server_env /home/bioeos/miniconda3/envs/cog_server_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/cog-server ctoi_env /home/bioeos/miniconda3/envs/ctoi_env # Environnement pour le dossier /home/bioeos/Documents/project_hub/worldfish dinovdeau_env /home/bioeos/miniconda3/envs/dinovdeau_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/dinovdeau drone_inference_env /home/bioeos/miniconda3/envs/drone_inference_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/drone-inference drone_upscaling_env /home/bioeos/miniconda3/envs/drone_upscaling_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/drone-upscaling drone_workflow_env /home/bioeos/miniconda3/envs/drone_workflow_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/drone-workflow ign_upscaling_env /home/bioeos/miniconda3/envs/ign_upscaling_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/ign-upscaling inference_env /home/bioeos/miniconda3/envs/inference_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/plancha-inference kevine_yolo_env /home/bioeos/miniconda3/envs/kevine_yolo_env # Environnement pour les codes de kevine dans /home/bioeos/Documents/project_hub/miscellanous/kevine_yolo plancha_env /home/bioeos/miniconda3/envs/plancha_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/plancha-workflow recif3D_env /home/bioeos/miniconda3/envs/recif3D_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/recif3d-workflow sam3 /home/bioeos/miniconda3/envs/sam3 # Environnement de test pour le d\u00e9p\u00f4t Sam3 seatizen_monitoring_env /home/bioeos/miniconda3/envs/seatizen_monitoring_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/seatizen-monitoring pour la partie backend segment_env /home/bioeos/miniconda3/envs/segment_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/the-point-is-the-mask test_env /home/bioeos/miniconda3/envs/test_env # Environnement de test avec python 3.12 wiki_env /home/bioeos/miniconda3/envs/wiki_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/wiki-seatizen zenodo_env /home/bioeos/miniconda3/envs/zenodo_env # Environnement pour le d\u00e9p\u00f4t https://github.com/SeatizenDOI/zenodo-tools On active un environnement avec la commande suivante : conda activate zenodo_env","title":"Liste des environnements conda pr\u00e9sent sur le pc"},{"location":"autres/photog/","text":"Photogrammetrie avec OpendroneMap Les param\u00e8tres de la camera: LINEAR, ISO 100-400 G\u00e9n\u00e9ration des orthos de drone et de planche jusqu'en novembre 2025, liste des options : Tout les orthos sont faites avec la release d'odm 3.5.3. La 3.5.5 a un probl\u00e8me avec les tag COG. fast-orthophoto => Pas de mod\u00e8le 3D et la reconstruction va plus vite. cog => Les fichiers sont g\u00e9n\u00e9r\u00e9 pour \u00eatre optimis\u00e9 pour le cloud. Plus facile pour visualiser dans qgis. camera-lens => auto feature-quality => ultra gps_accuracy => 0.1 orthophoto_resolution => 0.1 rolling_shutter => True On l'utilise car la gogpro ne prends pas tous les pixels d'un coup. https://www.lesnumeriques.com/photo/qu-est-ce-que-le-rolling-shutter-pu102253.html En novembre 2025 rolling-shutter-readout 9 => La valeur par d\u00e9faut d'odm est param\u00e9tr\u00e9 pour des photos et pas des videos. La valeur dans les m\u00e9tadonn\u00e9es des vid\u00e9os est 9ms. On a essay\u00e9 de filer en WIDE et de mettre camera-lens en fisheye mais ce n'est pas mieux. Pourquoi on a pas de 3D ? En enlevant l'argument fast-orthophoto, on peut avoir un mod\u00e8le 3D mais la reconstruction est un peu moins bien et plus longue.","title":"Param\u00e8tres pour la photogrammetrie"},{"location":"autres/photog/#photogrammetrie-avec-opendronemap","text":"Les param\u00e8tres de la camera: LINEAR, ISO 100-400 G\u00e9n\u00e9ration des orthos de drone et de planche jusqu'en novembre 2025, liste des options : Tout les orthos sont faites avec la release d'odm 3.5.3. La 3.5.5 a un probl\u00e8me avec les tag COG. fast-orthophoto => Pas de mod\u00e8le 3D et la reconstruction va plus vite. cog => Les fichiers sont g\u00e9n\u00e9r\u00e9 pour \u00eatre optimis\u00e9 pour le cloud. Plus facile pour visualiser dans qgis. camera-lens => auto feature-quality => ultra gps_accuracy => 0.1 orthophoto_resolution => 0.1 rolling_shutter => True On l'utilise car la gogpro ne prends pas tous les pixels d'un coup. https://www.lesnumeriques.com/photo/qu-est-ce-que-le-rolling-shutter-pu102253.html En novembre 2025 rolling-shutter-readout 9 => La valeur par d\u00e9faut d'odm est param\u00e9tr\u00e9 pour des photos et pas des videos. La valeur dans les m\u00e9tadonn\u00e9es des vid\u00e9os est 9ms. On a essay\u00e9 de filer en WIDE et de mettre camera-lens en fisheye mais ce n'est pas mieux.","title":"Photogrammetrie avec OpendroneMap"},{"location":"autres/photog/#pourquoi-on-a-pas-de-3d","text":"En enlevant l'argument fast-orthophoto, on peut avoir un mod\u00e8le 3D mais la reconstruction est un peu moins bien et plus longue.","title":"Pourquoi on a pas de 3D ?"},{"location":"autres/research-changelog/","text":"Research Changelog Voici ce qu'on a essay\u00e9 et pourquoi on l'utilise ou non. Dinov3 On a finetun\u00e9 le mod\u00e8le avec la m\u00eame proc\u00e9dure et le m\u00eame dataset que dinov2 mais les r\u00e9sultats ne sont pas concluants. Loss: 9.0573 F1 Micro: 0.6189 F1 Macro: 0.5821 Accuracy: 0.0065 Github Underwater color correction Pour contrer l'effet bleu sur les orthophotos, on a voulu appliquer un script de correction de couleur mais les coraux apparaissait trop rouge. Il faudrait mieux d\u00e9limiter les zonees pour appliquer l'algo car si deux zones ont trop de diff\u00e9rence dans la profondeur alors la zone la plus proche de la cam\u00e9ra va ressortir trop rouge. Code Originel Code en Python Try a depth model like Midas => Trop vieux remplac\u00e9 par DepthAnythingV2 ZoeDepth => Essayer de combiner pour avoir un reconstruction 3D entre plusieurs images DepthAnythingV2 DepthAnythingV3 => Moins bien que DepthAnythingV2 Video-Depth-Anything Sea-Thru-Impl => Correction des couleurs, peut-\u00eatre un potentiel mais trop long \u00e0 exploiter (>10min pour une image) Calibmar Outils pour obtenir une calibration de cam\u00e9ra sans la d\u00e9formation sous marine. Le software marche super bien mais il semble qu'OpenDroneMap marche bien aussi. Je n'ai pas plus creus\u00e9 que \u00e7a. Discussion Sam 3","title":"Research log"},{"location":"autres/research-changelog/#research-changelog","text":"Voici ce qu'on a essay\u00e9 et pourquoi on l'utilise ou non.","title":"Research Changelog"},{"location":"autres/research-changelog/#dinov3","text":"On a finetun\u00e9 le mod\u00e8le avec la m\u00eame proc\u00e9dure et le m\u00eame dataset que dinov2 mais les r\u00e9sultats ne sont pas concluants. Loss: 9.0573 F1 Micro: 0.6189 F1 Macro: 0.5821 Accuracy: 0.0065 Github","title":"Dinov3"},{"location":"autres/research-changelog/#underwater-color-correction","text":"Pour contrer l'effet bleu sur les orthophotos, on a voulu appliquer un script de correction de couleur mais les coraux apparaissait trop rouge. Il faudrait mieux d\u00e9limiter les zonees pour appliquer l'algo car si deux zones ont trop de diff\u00e9rence dans la profondeur alors la zone la plus proche de la cam\u00e9ra va ressortir trop rouge. Code Originel Code en Python Try a depth model like Midas => Trop vieux remplac\u00e9 par DepthAnythingV2 ZoeDepth => Essayer de combiner pour avoir un reconstruction 3D entre plusieurs images DepthAnythingV2 DepthAnythingV3 => Moins bien que DepthAnythingV2 Video-Depth-Anything Sea-Thru-Impl => Correction des couleurs, peut-\u00eatre un potentiel mais trop long \u00e0 exploiter (>10min pour une image)","title":"Underwater color correction"},{"location":"autres/research-changelog/#calibmar","text":"Outils pour obtenir une calibration de cam\u00e9ra sans la d\u00e9formation sous marine. Le software marche super bien mais il semble qu'OpenDroneMap marche bien aussi. Je n'ai pas plus creus\u00e9 que \u00e7a. Discussion","title":"Calibmar"},{"location":"autres/research-changelog/#sam-3","text":"","title":"Sam 3"},{"location":"blueboat/data/","text":"R\u00e9cup\u00e9ration des donn\u00e9es de pompage Une fois la mission termin\u00e9e, les donn\u00e9es peuvent \u00eatre extraites de deux mani\u00e8res compl\u00e9mentaires : via le stockage physique de la pompe ou via l'interface r\u00e9seau du Blueboat. 1. Extraction par cl\u00e9 USB (M\u00e9thode physique) C'est la m\u00e9thode la plus simple pour r\u00e9cup\u00e9rer les sessions de pompage brutes : Allumez la pompe. Branchez une cl\u00e9 USB sur le port d\u00e9di\u00e9 de l'unit\u00e9 de pompage. Le syst\u00e8me lance automatiquement la copie de l'historique des sessions sur la cl\u00e9. Une fois l'op\u00e9ration termin\u00e9e, vous pouvez ouvrir les fichiers pour extraire les indicateurs cl\u00e9s : Volume total pomp\u00e9 (Litre) Heure de d\u00e9but (Horodatage) Dur\u00e9e du pompage (Secondes/Minutes) 2. Extraction via l'interface r\u00e9seau (Fichiers logs) Vous pouvez acc\u00e9der aux logs directement depuis le syst\u00e8me embarqu\u00e9. Localisation des fichiers Les logs de l'application eDNA Controller sont stock\u00e9s dans le syst\u00e8me de fichiers de la carte Navigator. Le chemin d'acc\u00e8s dans le terminal est g\u00e9n\u00e9ralement : /home/pi/logs/ . Dossier avec les logs. R\u00e9cup\u00e9ration via FileZilla (SFTP) Pour t\u00e9l\u00e9charger les fichiers facilement sur votre ordinateur : Connectez votre PC au r\u00e9seau du Blueboat (Wi-Fi BaseStation ou c\u00e2ble). Ouvrez FileZilla et configurez une nouvelle connexion : H\u00f4te : sftp://192.168.2.2 Identifiant : pi Mot de passe : blueos (ou mot de passe configur\u00e9) Port : 22 Naviguez jusqu'au dossier des logs et glissez-d\u00e9posez les fichiers sur votre ordinateur. 3. Consolidation des donn\u00e9es Lors de la mise en relation des fichiers logs avec les donn\u00e9es relev\u00e9es manuellement, une r\u00e8gle de priorit\u00e9 s'applique : \u26a0\ufe0f Important : Si vous observez une diff\u00e9rence entre le volume affich\u00e9 sur l'\u00e9cran physique de la pompe et celui rapport\u00e9 par l'interface web (fr\u00e9quent en cas de d\u00e9bit tr\u00e8s faible), utilisez toujours la valeur affich\u00e9e sur la pompe comme r\u00e9f\u00e9rence pour vos analyses scientifiques.","title":"Donn\u00e9es"},{"location":"blueboat/data/#recuperation-des-donnees-de-pompage","text":"Une fois la mission termin\u00e9e, les donn\u00e9es peuvent \u00eatre extraites de deux mani\u00e8res compl\u00e9mentaires : via le stockage physique de la pompe ou via l'interface r\u00e9seau du Blueboat.","title":"R\u00e9cup\u00e9ration des donn\u00e9es de pompage"},{"location":"blueboat/data/#1-extraction-par-cle-usb-methode-physique","text":"C'est la m\u00e9thode la plus simple pour r\u00e9cup\u00e9rer les sessions de pompage brutes : Allumez la pompe. Branchez une cl\u00e9 USB sur le port d\u00e9di\u00e9 de l'unit\u00e9 de pompage. Le syst\u00e8me lance automatiquement la copie de l'historique des sessions sur la cl\u00e9. Une fois l'op\u00e9ration termin\u00e9e, vous pouvez ouvrir les fichiers pour extraire les indicateurs cl\u00e9s : Volume total pomp\u00e9 (Litre) Heure de d\u00e9but (Horodatage) Dur\u00e9e du pompage (Secondes/Minutes)","title":"1. Extraction par cl\u00e9 USB (M\u00e9thode physique)"},{"location":"blueboat/data/#2-extraction-via-linterface-reseau-fichiers-logs","text":"Vous pouvez acc\u00e9der aux logs directement depuis le syst\u00e8me embarqu\u00e9.","title":"2. Extraction via l'interface r\u00e9seau (Fichiers logs)"},{"location":"blueboat/data/#localisation-des-fichiers","text":"Les logs de l'application eDNA Controller sont stock\u00e9s dans le syst\u00e8me de fichiers de la carte Navigator. Le chemin d'acc\u00e8s dans le terminal est g\u00e9n\u00e9ralement : /home/pi/logs/ . Dossier avec les logs.","title":"Localisation des fichiers"},{"location":"blueboat/data/#recuperation-via-filezilla-sftp","text":"Pour t\u00e9l\u00e9charger les fichiers facilement sur votre ordinateur : Connectez votre PC au r\u00e9seau du Blueboat (Wi-Fi BaseStation ou c\u00e2ble). Ouvrez FileZilla et configurez une nouvelle connexion : H\u00f4te : sftp://192.168.2.2 Identifiant : pi Mot de passe : blueos (ou mot de passe configur\u00e9) Port : 22 Naviguez jusqu'au dossier des logs et glissez-d\u00e9posez les fichiers sur votre ordinateur.","title":"R\u00e9cup\u00e9ration via FileZilla (SFTP)"},{"location":"blueboat/data/#3-consolidation-des-donnees","text":"Lors de la mise en relation des fichiers logs avec les donn\u00e9es relev\u00e9es manuellement, une r\u00e8gle de priorit\u00e9 s'applique : \u26a0\ufe0f Important : Si vous observez une diff\u00e9rence entre le volume affich\u00e9 sur l'\u00e9cran physique de la pompe et celui rapport\u00e9 par l'interface web (fr\u00e9quent en cas de d\u00e9bit tr\u00e8s faible), utilisez toujours la valeur affich\u00e9e sur la pompe comme r\u00e9f\u00e9rence pour vos analyses scientifiques.","title":"3. Consolidation des donn\u00e9es"},{"location":"blueboat/materiel/","text":"Guide d'utilisation du catamaran Blueboat (Op\u00e9ration eDNA) Ce tutoriel d\u00e9taille la proc\u00e9dure de mise en service du Blueboat pour des op\u00e9rations de pompage d'ADN environnemental, incluant la gestion logicielle et le protocole de d\u00e9contamination. Blueboat. Blueboat. 1. Pr\u00e9requis mat\u00e9riels Pour une op\u00e9ration compl\u00e8te, assurez-vous de disposer des \u00e9l\u00e9ments suivants : Catamaran Blueboat. BaseStation (utiliser une canne/tr\u00e9pied pour augmenter la port\u00e9e). 4 batteries charg\u00e9es (diff\u00e9rence de tension maximale de 0.1V entre elles). Un ordinateur avec Google Chrome et QGroundControl + GPS emlid. Une manette Xbox. Mat\u00e9riel. Le GPS emlid peut \u00eatre int\u00e9ressant lors du sortie sur le bateau pour avoir la position de l'ordinateur par rapport au point de pompage notamment pour le pilote du bateau. 2. Configuration r\u00e9seau de l'ordinateur La BaseStation agit comme un point d'acc\u00e8s Wi-Fi. Le Blueboat poss\u00e8de l'adresse IP fixe 192.168.2.2 . Pour communiquer avec lui et utiliser QGroundControl , votre ordinateur doit imp\u00e9rativement \u00eatre sur le m\u00eame sous-r\u00e9seau, id\u00e9alement avec l'adresse 192.168.2.1 . Forcer l'adresse IP statique Par d\u00e9faut, l'ordinateur utilise le protocole DHCP (adresse al\u00e9atoire). Il faut le d\u00e9sactiver pour forcer l'adresse : Se connectez au r\u00e9seau BaseStation. Allez dans les param\u00e8tres et cliquez sur \"Modifier les options d'adaptateur\". Faire un clique droit sur le r\u00e9seau wifi et allez dans l'onglet \"Propri\u00e9t\u00e9s\" . Double cliquez \"Protocole Internet version 4(TCP/IPv4)\". Changez les valeurs. Note : Sans cette configuration, l'interface web peut fonctionner, mais le pilotage via QGroundControl sera impossible. Documentation officielle : BlueRobotics Software Setup QGroundControl connect\u00e9 avec le BlueBoat. 3. Mise en service du Blueboat Installation des batteries R\u00e9partissez les batteries de chaque c\u00f4t\u00e9 des coques pour \u00e9quilibrer l'assiette du bateau (\u00e9viter qu'il ne penche). Connectez ensuite les deux types de prises sur le caisson : Prise \u00e0 2 points : Alimentation de la pompe (12V). Prise \u00e0 4 points : Connexion USB entre la carte Navigator et l' Arduino de la pompe. \u26a0\ufe0f Important : Vissez imp\u00e9rativement les antennes de la BaseStation et du Blueboat avant la mise sous tension pour \u00e9viter d'endommager les \u00e9metteurs radio. D\u00e9marrage Tournez le bouton d'allumage jusqu'\u00e0 la position maximale. Le syst\u00e8me est pr\u00eat lorsque la LED blanche clignote. 4. Interface de contr\u00f4le (eDNA Controller) L'application de gestion de la pompe est accessible via l'onglet eDNA Controller \u00e0 gauche sur la page 192.168.2.2 . Interface Blueos du BlueBoat dans Chrome \u00e0 l'url 192.168.2.2 S\u00e9lectionnez les param\u00e8tres. D\u00e9pannage de la connexion (Mode Pirate) Interface sans r\u00e9ponse, les courbes n'\u00e9voluent pas. Si les courbes n'\u00e9voluent pas, il faut juste relancer l'application. Cela arrive souvent surtout si la connexion entre le blueboat et la basestation est instable (distance, grosse vague, ...) : Ouvrez l'application Terminal sur l'interface. L'application Terminal appara\u00eet uniquement en mode pirate. Activez le mode pirate. Tapez la commande red-pill pour acc\u00e9der au syst\u00e8me r\u00e9el. Ex\u00e9cutez le script : ./reload_docker.sh . Relancez le terminal. L'onglet eDNA Controller va red\u00e9marrer et la connexion devrait s'\u00e9tablir. L'application fonctionne. Pilotage et navigation Manuel : Utilisez la manette Xbox. Une fois sur zone, passez en mode Loiter (maintien de position). Automatique : D\u00e9finissez des points de passage (Waypoints) sur la carte et lancez la mission. 5. Proc\u00e9dure de pompage et surveillance Fonctionnement de l'interface Privil\u00e9giez les petits boutons ronds \u00e0 c\u00f4t\u00e9 des graphiques plut\u00f4t que le bouton \"Lancer la pompe\". Ils agissent directement sur les relais de la pompe sans le d\u00e9lai de s\u00e9curit\u00e9 du bouton g\u00e9n\u00e9ral. Survoler les boutons avec la souris pour identifier leurs fonctions. Amor\u00e7age et diagnostic L'amor\u00e7age doit se faire id\u00e9alement \u00e0 l'eau claire sans filtres . Surveillez le tableau suivant pour valider le flux : \u00c9tat du processus Pression D\u00e9bit Diagnostic D\u00e9but Monte Bas Expulsion de l'air r\u00e9siduel. Amor\u00e7age r\u00e9ussi Descend Stable Flux continu \u00e9tabli. \u00c9chec Reste haute Nul Pompe d\u00e9samorc\u00e9e (bulle d'air). Conseil d\u00e9bit faible : Si le d\u00e9bit est tr\u00e8s faible (~0.3L/min), un d\u00e9calage peut appara\u00eetre entre l'ordinateur et l'\u00e9cran physique de la pompe. Pour atteindre 18L r\u00e9els, arr\u00eatez-vous \u00e0 16.4L affich\u00e9s sur l'interface logicielle. 6. Protocole scientifique (Acquisition ADN) Phase 1 : D\u00e9contamination et Blanc D\u00e9sinfection : Pomper 10L de Javel \u00e0 2 % en circuit ferm\u00e9. Rincage : Pomper 2L d'eau distill\u00e9e en circuit ouvert. Surfaces : Nettoyer le mat\u00e9riel \u00e0 la Javel \u00e0 10 %, Ethanol \u00e0 70 % puis \u00e0 l'eau MilliQ. Blanc : Pomper 2L d'eau Milli-Q avec un filtre t\u00e9moin. Pomper de l'air afin d'effectuer une dessication du filtre. Phase 2 : Pr\u00e9l\u00e8vement des triplicats R\u00e9amor\u00e7age : Toujours r\u00e9amorcer la pompe \u00e0 l'eau MilliQ avant d'installer les filtres. Installation : Placer le triplicat de filtres. Par forte houle, immergez-les suffisamment pour \u00e9viter les prises d'air. Pompage : Activer l' Autostop pour un arr\u00eat automatique au volume cible. S\u00e9chage : Une fois revenu au bord, pomper de l'air pour dessiquer les filtres. Phase 3 : Fin de mission et entretien Rincage circuit : Pomper de l'eau claire (distill\u00e9e ou Milli-Q) pour rincer les tuyaux. Rincage ext\u00e9rieur : Rincer l'ensemble du Blueboat \u00e0 l'eau douce. Batteries : Attendre que les coques soient parfaitement s\u00e8ches avant de retirer les batteries. Note: Il faut noter l'heure de chacune des op\u00e9rations pour faire le lien avec les logs de la pompe.","title":"Mat\u00e9riel"},{"location":"blueboat/materiel/#guide-dutilisation-du-catamaran-blueboat-operation-edna","text":"Ce tutoriel d\u00e9taille la proc\u00e9dure de mise en service du Blueboat pour des op\u00e9rations de pompage d'ADN environnemental, incluant la gestion logicielle et le protocole de d\u00e9contamination. Blueboat. Blueboat.","title":"Guide d'utilisation du catamaran Blueboat (Op\u00e9ration eDNA)"},{"location":"blueboat/materiel/#1-prerequis-materiels","text":"Pour une op\u00e9ration compl\u00e8te, assurez-vous de disposer des \u00e9l\u00e9ments suivants : Catamaran Blueboat. BaseStation (utiliser une canne/tr\u00e9pied pour augmenter la port\u00e9e). 4 batteries charg\u00e9es (diff\u00e9rence de tension maximale de 0.1V entre elles). Un ordinateur avec Google Chrome et QGroundControl + GPS emlid. Une manette Xbox. Mat\u00e9riel. Le GPS emlid peut \u00eatre int\u00e9ressant lors du sortie sur le bateau pour avoir la position de l'ordinateur par rapport au point de pompage notamment pour le pilote du bateau.","title":"1. Pr\u00e9requis mat\u00e9riels"},{"location":"blueboat/materiel/#2-configuration-reseau-de-lordinateur","text":"La BaseStation agit comme un point d'acc\u00e8s Wi-Fi. Le Blueboat poss\u00e8de l'adresse IP fixe 192.168.2.2 . Pour communiquer avec lui et utiliser QGroundControl , votre ordinateur doit imp\u00e9rativement \u00eatre sur le m\u00eame sous-r\u00e9seau, id\u00e9alement avec l'adresse 192.168.2.1 .","title":"2. Configuration r\u00e9seau de l'ordinateur"},{"location":"blueboat/materiel/#forcer-ladresse-ip-statique","text":"Par d\u00e9faut, l'ordinateur utilise le protocole DHCP (adresse al\u00e9atoire). Il faut le d\u00e9sactiver pour forcer l'adresse : Se connectez au r\u00e9seau BaseStation. Allez dans les param\u00e8tres et cliquez sur \"Modifier les options d'adaptateur\". Faire un clique droit sur le r\u00e9seau wifi et allez dans l'onglet \"Propri\u00e9t\u00e9s\" . Double cliquez \"Protocole Internet version 4(TCP/IPv4)\". Changez les valeurs. Note : Sans cette configuration, l'interface web peut fonctionner, mais le pilotage via QGroundControl sera impossible. Documentation officielle : BlueRobotics Software Setup QGroundControl connect\u00e9 avec le BlueBoat.","title":"Forcer l'adresse IP statique"},{"location":"blueboat/materiel/#3-mise-en-service-du-blueboat","text":"","title":"3. Mise en service du Blueboat"},{"location":"blueboat/materiel/#installation-des-batteries","text":"R\u00e9partissez les batteries de chaque c\u00f4t\u00e9 des coques pour \u00e9quilibrer l'assiette du bateau (\u00e9viter qu'il ne penche). Connectez ensuite les deux types de prises sur le caisson : Prise \u00e0 2 points : Alimentation de la pompe (12V). Prise \u00e0 4 points : Connexion USB entre la carte Navigator et l' Arduino de la pompe. \u26a0\ufe0f Important : Vissez imp\u00e9rativement les antennes de la BaseStation et du Blueboat avant la mise sous tension pour \u00e9viter d'endommager les \u00e9metteurs radio.","title":"Installation des batteries"},{"location":"blueboat/materiel/#demarrage","text":"Tournez le bouton d'allumage jusqu'\u00e0 la position maximale. Le syst\u00e8me est pr\u00eat lorsque la LED blanche clignote.","title":"D\u00e9marrage"},{"location":"blueboat/materiel/#4-interface-de-controle-edna-controller","text":"L'application de gestion de la pompe est accessible via l'onglet eDNA Controller \u00e0 gauche sur la page 192.168.2.2 . Interface Blueos du BlueBoat dans Chrome \u00e0 l'url 192.168.2.2 S\u00e9lectionnez les param\u00e8tres.","title":"4. Interface de contr\u00f4le (eDNA Controller)"},{"location":"blueboat/materiel/#depannage-de-la-connexion-mode-pirate","text":"Interface sans r\u00e9ponse, les courbes n'\u00e9voluent pas. Si les courbes n'\u00e9voluent pas, il faut juste relancer l'application. Cela arrive souvent surtout si la connexion entre le blueboat et la basestation est instable (distance, grosse vague, ...) : Ouvrez l'application Terminal sur l'interface. L'application Terminal appara\u00eet uniquement en mode pirate. Activez le mode pirate. Tapez la commande red-pill pour acc\u00e9der au syst\u00e8me r\u00e9el. Ex\u00e9cutez le script : ./reload_docker.sh . Relancez le terminal. L'onglet eDNA Controller va red\u00e9marrer et la connexion devrait s'\u00e9tablir. L'application fonctionne.","title":"D\u00e9pannage de la connexion (Mode Pirate)"},{"location":"blueboat/materiel/#pilotage-et-navigation","text":"Manuel : Utilisez la manette Xbox. Une fois sur zone, passez en mode Loiter (maintien de position). Automatique : D\u00e9finissez des points de passage (Waypoints) sur la carte et lancez la mission.","title":"Pilotage et navigation"},{"location":"blueboat/materiel/#5-procedure-de-pompage-et-surveillance","text":"","title":"5. Proc\u00e9dure de pompage et surveillance"},{"location":"blueboat/materiel/#fonctionnement-de-linterface","text":"Privil\u00e9giez les petits boutons ronds \u00e0 c\u00f4t\u00e9 des graphiques plut\u00f4t que le bouton \"Lancer la pompe\". Ils agissent directement sur les relais de la pompe sans le d\u00e9lai de s\u00e9curit\u00e9 du bouton g\u00e9n\u00e9ral. Survoler les boutons avec la souris pour identifier leurs fonctions.","title":"Fonctionnement de l'interface"},{"location":"blueboat/materiel/#amorcage-et-diagnostic","text":"L'amor\u00e7age doit se faire id\u00e9alement \u00e0 l'eau claire sans filtres . Surveillez le tableau suivant pour valider le flux : \u00c9tat du processus Pression D\u00e9bit Diagnostic D\u00e9but Monte Bas Expulsion de l'air r\u00e9siduel. Amor\u00e7age r\u00e9ussi Descend Stable Flux continu \u00e9tabli. \u00c9chec Reste haute Nul Pompe d\u00e9samorc\u00e9e (bulle d'air). Conseil d\u00e9bit faible : Si le d\u00e9bit est tr\u00e8s faible (~0.3L/min), un d\u00e9calage peut appara\u00eetre entre l'ordinateur et l'\u00e9cran physique de la pompe. Pour atteindre 18L r\u00e9els, arr\u00eatez-vous \u00e0 16.4L affich\u00e9s sur l'interface logicielle.","title":"Amor\u00e7age et diagnostic"},{"location":"blueboat/materiel/#6-protocole-scientifique-acquisition-adn","text":"","title":"6. Protocole scientifique (Acquisition ADN)"},{"location":"blueboat/materiel/#phase-1-decontamination-et-blanc","text":"D\u00e9sinfection : Pomper 10L de Javel \u00e0 2 % en circuit ferm\u00e9. Rincage : Pomper 2L d'eau distill\u00e9e en circuit ouvert. Surfaces : Nettoyer le mat\u00e9riel \u00e0 la Javel \u00e0 10 %, Ethanol \u00e0 70 % puis \u00e0 l'eau MilliQ. Blanc : Pomper 2L d'eau Milli-Q avec un filtre t\u00e9moin. Pomper de l'air afin d'effectuer une dessication du filtre.","title":"Phase 1 : D\u00e9contamination et Blanc"},{"location":"blueboat/materiel/#phase-2-prelevement-des-triplicats","text":"R\u00e9amor\u00e7age : Toujours r\u00e9amorcer la pompe \u00e0 l'eau MilliQ avant d'installer les filtres. Installation : Placer le triplicat de filtres. Par forte houle, immergez-les suffisamment pour \u00e9viter les prises d'air. Pompage : Activer l' Autostop pour un arr\u00eat automatique au volume cible. S\u00e9chage : Une fois revenu au bord, pomper de l'air pour dessiquer les filtres.","title":"Phase 2 : Pr\u00e9l\u00e8vement des triplicats"},{"location":"blueboat/materiel/#phase-3-fin-de-mission-et-entretien","text":"Rincage circuit : Pomper de l'eau claire (distill\u00e9e ou Milli-Q) pour rincer les tuyaux. Rincage ext\u00e9rieur : Rincer l'ensemble du Blueboat \u00e0 l'eau douce. Batteries : Attendre que les coques soient parfaitement s\u00e8ches avant de retirer les batteries. Note: Il faut noter l'heure de chacune des op\u00e9rations pour faire le lien avec les logs de la pompe.","title":"Phase 3 : Fin de mission et entretien"},{"location":"drone/traitement_session_drone/","text":"Traitement d\u2019une session drone Ce tutoriel d\u00e9crit le workflow complet de traitement d\u2019une session drone , depuis la r\u00e9cup\u00e9ration des images brutes jusqu\u2019\u00e0 la pr\u00e9paration finale des donn\u00e9es pour un d\u00e9p\u00f4t sur Zenodo , en s\u2019appuyant sur les outils d\u00e9velopp\u00e9s dans le cadre du projet Seatizen . 1. R\u00e9cup\u00e9ration des donn\u00e9es du drone La premi\u00e8re \u00e9tape consiste \u00e0 extraire les images depuis la carte m\u00e9moire du drone . \u26a0\ufe0f Contraintes importantes : Les vid\u00e9os ne sont pas utilisables dans ce workflow. Les vid\u00e9os ne permettent pas de r\u00e9cup\u00e9rer des m\u00e9tadonn\u00e9es GPS exploitables. Il est indispensable de travailler avec des images contenant des m\u00e9tadonn\u00e9es GPS (EXIF) . 2. Organisation des images (dossier DCIM ) Toutes les images doivent \u00eatre regroup\u00e9es dans un dossier nomm\u00e9 : DCIM/ Points de vigilance Certains drones r\u00e9partissent les images dans plusieurs sous-dossiers . Il peut exister des images avec le m\u00eame nom . Si toutes les images sont copi\u00e9es dans un seul dossier sans renommage, elles risquent de s\u2019\u00e9craser . \ud83d\udc49 Avant de poursuivre : V\u00e9rifiez les doublons, Renommez les fichiers si n\u00e9cessaire. 3. Production de l\u2019orthophoto avec OpenDroneMap (ODM) L\u2019orthophoto est un \u00e9l\u00e9ment central du workflow , notamment pour les \u00e9tapes d\u2019intelligence artificielle. Nous recommandons donc d\u2019ex\u00e9cuter OpenDroneMap (ODM) en premier. Param\u00e8tres ODM utilis\u00e9s Voici les param\u00e8tres OpenDroneMap utilis\u00e9s dans notre workflow : --project-path /datasets/code/PROCESSED_DATA/PHOTOGRAMMETRY \\ --auto-boundary \\ --cog \\ --orthophoto-resolution 1.0 \\ --rolling-shutter \\ --use-exif \\ --max-concurrency 128 \\ --fast-orthophoto \\ --optimize-disk-space \\ --feature-quality ultra Ces param\u00e8tres permettent notamment : l\u2019utilisation des m\u00e9tadonn\u00e9es EXIF, la g\u00e9n\u00e9ration d\u2019une orthophoto optimis\u00e9e (COG) , une r\u00e9solution de 1 m, une optimisation des performances et de l\u2019espace disque, une qualit\u00e9 \u00e9lev\u00e9e pour la d\u00e9tection des points caract\u00e9ristiques. 4. Ex\u00e9cution d\u2019ODM sur Datarmor (script PBS) Dans notre cas d\u2019usage, les calculs sont effectu\u00e9s sur le cluster Datarmor . Transfert des donn\u00e9es Les donn\u00e9es sont envoy\u00e9es sur Datarmor via FileZilla (ou \u00e9quivalent). Une fois les donn\u00e9es disponibles sur le cluster, ODM est lanc\u00e9 via un script PBS . Script PBS ODM Le script PBS utilis\u00e9 est disponible ici : \ud83d\udc49 Script ODM Datarmor https://github.com/SeatizenDOI/datarmor-pbs/blob/master/odm/drone/drone_serge_may2025.pbs Ce script : configure l\u2019environnement Datarmor, lance OpenDroneMap avec les param\u00e8tres adapt\u00e9s, g\u00e8re l\u2019ex\u00e9cution sur les n\u0153uds de calcul du cluster. 5. Workflow d\u2019extraction des m\u00e9tadonn\u00e9es Une fois l\u2019orthophoto g\u00e9n\u00e9r\u00e9e, nous appliquons le workflow drone-workflow afin d\u2019extraire et structurer les m\u00e9tadonn\u00e9es des images. Commande Datarmor echo \"Working with ${SESSION_PATH}\" singularity run \\ --pwd /home/seatizen/app/ \\ --bind ${PATH_DRONE_FOLDER}:/home/seatizen/sessions \\ drone_workflow.sif \\ -efol \\ -pfol /home/seatizen/sessions \\ -c \\ -ip ${PBS_ARRAY_INDEX} Ce workflow permet de : lire les images et leurs m\u00e9tadonn\u00e9es GPS, structurer les informations de session, pr\u00e9parer les fichiers n\u00e9cessaires aux \u00e9tapes suivantes. 6. Inf\u00e9rence automatique sur les images Une premi\u00e8re \u00e9tape d\u2019inf\u00e9rence est ensuite r\u00e9alis\u00e9e \u00e0 l\u2019aide du conteneur drone-inference . Commande Datarmor singularity run --nv \\ --pwd /home/seatizen/app/ \\ --bind /home1/datawork/villien/models:/home/seatizen/app/models \\ --bind ${PATH_DRONE_FOLDER}:/home/seatizen/sessions \\ --bind /home1/scratch/villien/:/tmp/ \\ drone_inference.sif \\ -efol \\ -pfol /home/seatizen/sessions \\ -c \\ -ip ${PBS_ARRAY_INDEX} Cette \u00e9tape permet : d\u2019exploiter les mod\u00e8les pr\u00e9-entra\u00een\u00e9s, d\u2019appliquer une premi\u00e8re analyse automatique sur les images, de produire des sorties interm\u00e9diaires pour la segmentation finale. 7. Segmentation avec The Point Is The Mask La segmentation fine est r\u00e9alis\u00e9e avec l\u2019outil The Point Is The Mask , bas\u00e9 sur une intelligence artificielle de segmentation. Activation de l\u2019environnement Conda cd /home1/datahome/villien/project_hub/the-point-is-the-mask . /appli/anaconda/latest/etc/profile.d/conda.sh conda activate /home1/datawork/villien/conda-env/segment_env Lancement de l\u2019inf\u00e9rence de segmentation python3 inference.py \\ -eses \\ -pses ${SESSION_PATH} \\ -po /home1/scratch/villien/drone_uav_tmp \\ -psm ./models/SegForCoral-b2-2025_06_30_19127-bs16_refine \\ --is_seatizen_session Cette \u00e9tape : segmente l\u2019orthophoto, r\u00e9alise des pr\u00e9dictions sur 5 classes , g\u00e9n\u00e8re des masques exploitables pour l\u2019analyse et l\u2019annotation. 8. D\u00e9p\u00f4ts GitHub \u00e0 consulter Pour comprendre et adapter chaque \u00e9tape du workflow, nous vous invitons \u00e0 consulter les d\u00e9p\u00f4ts suivants : Drone workflow (m\u00e9tadonn\u00e9es) https://github.com/SeatizenDOI/drone-workflow Drone inference https://github.com/SeatizenDOI/drone-inference The Point Is The Mask (segmentation) https://github.com/SeatizenDOI/the-point-is-the-mask/ 9. Pr\u00e9paration finale pour Zenodo Une fois toutes les \u00e9tapes termin\u00e9es : orthophoto produite, m\u00e9tadonn\u00e9es structur\u00e9es, segmentation r\u00e9alis\u00e9e, \ud83d\udc49 la session drone est compl\u00e8te et pr\u00eate \u00e0 \u00eatre d\u00e9pos\u00e9e sur Zenodo .","title":"Traitement d'une session"},{"location":"drone/traitement_session_drone/#traitement-dune-session-drone","text":"","title":"Traitement d\u2019une session drone"},{"location":"drone/traitement_session_drone/#ce-tutoriel-decrit-le-workflow-complet-de-traitement-dune-session-drone-depuis-la-recuperation-des-images-brutes-jusqua-la-preparation-finale-des-donnees-pour-un-depot-sur-zenodo-en-sappuyant-sur-les-outils-developpes-dans-le-cadre-du-projet-seatizen","text":"","title":"Ce tutoriel d\u00e9crit le workflow complet de traitement d\u2019une session drone, depuis la r\u00e9cup\u00e9ration des images brutes jusqu\u2019\u00e0 la pr\u00e9paration finale des donn\u00e9es pour un d\u00e9p\u00f4t sur Zenodo, en s\u2019appuyant sur les outils d\u00e9velopp\u00e9s dans le cadre du projet Seatizen."},{"location":"drone/traitement_session_drone/#1-recuperation-des-donnees-du-drone","text":"La premi\u00e8re \u00e9tape consiste \u00e0 extraire les images depuis la carte m\u00e9moire du drone . \u26a0\ufe0f Contraintes importantes : Les vid\u00e9os ne sont pas utilisables dans ce workflow. Les vid\u00e9os ne permettent pas de r\u00e9cup\u00e9rer des m\u00e9tadonn\u00e9es GPS exploitables. Il est indispensable de travailler avec des images contenant des m\u00e9tadonn\u00e9es GPS (EXIF) .","title":"1. R\u00e9cup\u00e9ration des donn\u00e9es du drone"},{"location":"drone/traitement_session_drone/#2-organisation-des-images-dossier-dcim","text":"Toutes les images doivent \u00eatre regroup\u00e9es dans un dossier nomm\u00e9 : DCIM/","title":"2. Organisation des images (dossier DCIM)"},{"location":"drone/traitement_session_drone/#points-de-vigilance","text":"Certains drones r\u00e9partissent les images dans plusieurs sous-dossiers . Il peut exister des images avec le m\u00eame nom . Si toutes les images sont copi\u00e9es dans un seul dossier sans renommage, elles risquent de s\u2019\u00e9craser . \ud83d\udc49 Avant de poursuivre : V\u00e9rifiez les doublons, Renommez les fichiers si n\u00e9cessaire.","title":"Points de vigilance"},{"location":"drone/traitement_session_drone/#3-production-de-lorthophoto-avec-opendronemap-odm","text":"L\u2019orthophoto est un \u00e9l\u00e9ment central du workflow , notamment pour les \u00e9tapes d\u2019intelligence artificielle. Nous recommandons donc d\u2019ex\u00e9cuter OpenDroneMap (ODM) en premier.","title":"3. Production de l\u2019orthophoto avec OpenDroneMap (ODM)"},{"location":"drone/traitement_session_drone/#parametres-odm-utilises","text":"Voici les param\u00e8tres OpenDroneMap utilis\u00e9s dans notre workflow : --project-path /datasets/code/PROCESSED_DATA/PHOTOGRAMMETRY \\ --auto-boundary \\ --cog \\ --orthophoto-resolution 1.0 \\ --rolling-shutter \\ --use-exif \\ --max-concurrency 128 \\ --fast-orthophoto \\ --optimize-disk-space \\ --feature-quality ultra Ces param\u00e8tres permettent notamment : l\u2019utilisation des m\u00e9tadonn\u00e9es EXIF, la g\u00e9n\u00e9ration d\u2019une orthophoto optimis\u00e9e (COG) , une r\u00e9solution de 1 m, une optimisation des performances et de l\u2019espace disque, une qualit\u00e9 \u00e9lev\u00e9e pour la d\u00e9tection des points caract\u00e9ristiques.","title":"Param\u00e8tres ODM utilis\u00e9s"},{"location":"drone/traitement_session_drone/#4-execution-dodm-sur-datarmor-script-pbs","text":"Dans notre cas d\u2019usage, les calculs sont effectu\u00e9s sur le cluster Datarmor .","title":"4. Ex\u00e9cution d\u2019ODM sur Datarmor (script PBS)"},{"location":"drone/traitement_session_drone/#transfert-des-donnees","text":"Les donn\u00e9es sont envoy\u00e9es sur Datarmor via FileZilla (ou \u00e9quivalent). Une fois les donn\u00e9es disponibles sur le cluster, ODM est lanc\u00e9 via un script PBS .","title":"Transfert des donn\u00e9es"},{"location":"drone/traitement_session_drone/#script-pbs-odm","text":"Le script PBS utilis\u00e9 est disponible ici : \ud83d\udc49 Script ODM Datarmor https://github.com/SeatizenDOI/datarmor-pbs/blob/master/odm/drone/drone_serge_may2025.pbs Ce script : configure l\u2019environnement Datarmor, lance OpenDroneMap avec les param\u00e8tres adapt\u00e9s, g\u00e8re l\u2019ex\u00e9cution sur les n\u0153uds de calcul du cluster.","title":"Script PBS ODM"},{"location":"drone/traitement_session_drone/#5-workflow-dextraction-des-metadonnees","text":"Une fois l\u2019orthophoto g\u00e9n\u00e9r\u00e9e, nous appliquons le workflow drone-workflow afin d\u2019extraire et structurer les m\u00e9tadonn\u00e9es des images.","title":"5. Workflow d\u2019extraction des m\u00e9tadonn\u00e9es"},{"location":"drone/traitement_session_drone/#commande-datarmor","text":"echo \"Working with ${SESSION_PATH}\" singularity run \\ --pwd /home/seatizen/app/ \\ --bind ${PATH_DRONE_FOLDER}:/home/seatizen/sessions \\ drone_workflow.sif \\ -efol \\ -pfol /home/seatizen/sessions \\ -c \\ -ip ${PBS_ARRAY_INDEX} Ce workflow permet de : lire les images et leurs m\u00e9tadonn\u00e9es GPS, structurer les informations de session, pr\u00e9parer les fichiers n\u00e9cessaires aux \u00e9tapes suivantes.","title":"Commande Datarmor"},{"location":"drone/traitement_session_drone/#6-inference-automatique-sur-les-images","text":"Une premi\u00e8re \u00e9tape d\u2019inf\u00e9rence est ensuite r\u00e9alis\u00e9e \u00e0 l\u2019aide du conteneur drone-inference .","title":"6. Inf\u00e9rence automatique sur les images"},{"location":"drone/traitement_session_drone/#commande-datarmor_1","text":"singularity run --nv \\ --pwd /home/seatizen/app/ \\ --bind /home1/datawork/villien/models:/home/seatizen/app/models \\ --bind ${PATH_DRONE_FOLDER}:/home/seatizen/sessions \\ --bind /home1/scratch/villien/:/tmp/ \\ drone_inference.sif \\ -efol \\ -pfol /home/seatizen/sessions \\ -c \\ -ip ${PBS_ARRAY_INDEX} Cette \u00e9tape permet : d\u2019exploiter les mod\u00e8les pr\u00e9-entra\u00een\u00e9s, d\u2019appliquer une premi\u00e8re analyse automatique sur les images, de produire des sorties interm\u00e9diaires pour la segmentation finale.","title":"Commande Datarmor"},{"location":"drone/traitement_session_drone/#7-segmentation-avec-the-point-is-the-mask","text":"La segmentation fine est r\u00e9alis\u00e9e avec l\u2019outil The Point Is The Mask , bas\u00e9 sur une intelligence artificielle de segmentation.","title":"7. Segmentation avec The Point Is The Mask"},{"location":"drone/traitement_session_drone/#activation-de-lenvironnement-conda","text":"cd /home1/datahome/villien/project_hub/the-point-is-the-mask . /appli/anaconda/latest/etc/profile.d/conda.sh conda activate /home1/datawork/villien/conda-env/segment_env","title":"Activation de l\u2019environnement Conda"},{"location":"drone/traitement_session_drone/#lancement-de-linference-de-segmentation","text":"python3 inference.py \\ -eses \\ -pses ${SESSION_PATH} \\ -po /home1/scratch/villien/drone_uav_tmp \\ -psm ./models/SegForCoral-b2-2025_06_30_19127-bs16_refine \\ --is_seatizen_session Cette \u00e9tape : segmente l\u2019orthophoto, r\u00e9alise des pr\u00e9dictions sur 5 classes , g\u00e9n\u00e8re des masques exploitables pour l\u2019analyse et l\u2019annotation.","title":"Lancement de l\u2019inf\u00e9rence de segmentation"},{"location":"drone/traitement_session_drone/#8-depots-github-a-consulter","text":"Pour comprendre et adapter chaque \u00e9tape du workflow, nous vous invitons \u00e0 consulter les d\u00e9p\u00f4ts suivants : Drone workflow (m\u00e9tadonn\u00e9es) https://github.com/SeatizenDOI/drone-workflow Drone inference https://github.com/SeatizenDOI/drone-inference The Point Is The Mask (segmentation) https://github.com/SeatizenDOI/the-point-is-the-mask/","title":"8. D\u00e9p\u00f4ts GitHub \u00e0 consulter"},{"location":"drone/traitement_session_drone/#9-preparation-finale-pour-zenodo","text":"Une fois toutes les \u00e9tapes termin\u00e9es : orthophoto produite, m\u00e9tadonn\u00e9es structur\u00e9es, segmentation r\u00e9alis\u00e9e, \ud83d\udc49 la session drone est compl\u00e8te et pr\u00eate \u00e0 \u00eatre d\u00e9pos\u00e9e sur Zenodo .","title":"9. Pr\u00e9paration finale pour Zenodo"},{"location":"plancha/after-session/","text":"Traiter une session de planche D\u00e9chargement des donn\u00e9es brutes Cr\u00e9er un dossier tmp pour stocker temporairement les fichiers bruts . Le fichier du Reach RS3 se place \u00e0 la racine, tandis qu'il faut cr\u00e9er un dossier sp\u00e9cifique par planche. GPS Base - Reach RS3 Dans un premier temps, r\u00e9cup\u00e9rez les donn\u00e9es sur le Reach RS2/3 : Allumez-le sans partage de connexion ; au bout d'un moment, il passera en mode point d'acc\u00e8s (hotspot) . Connectez-vous \u00e0 son r\u00e9seau Wi-Fi (le code est emlidreach ). Une fois connect\u00e9, rendez-vous sur l'URL 192.168.42.1 . Allez dans l'onglet Logging et t\u00e9l\u00e9chargez l'archive .zip du jour. Note : Sur les anciens firmwares, t\u00e9l\u00e9chargez manuellement les fichiers LLH et RINEX. GPS Device - Reach M2 Pour le GPS de la planche : Allumez la planche. Au bout d'une minute ou deux, le Reach M2 passe en hotspot. Connectez-vous au r\u00e9seau (mot de passe : emlidreach ). Rendez-vous sur l'URL 192.168.42.1 dans l'onglet Logging . T\u00e9l\u00e9chargez le fichier .zip (ou les fichiers LLH et RINEX pour les anciens firmwares) dans le dossier tmp de la planche associ\u00e9e. Il y a autant de fichiers .zip que de sessions r\u00e9alis\u00e9es. Fichiers de l'autopilote L'autopilote (le Cube Orange) g\u00e9n\u00e8re un fichier par mission, \u00e0 condition d'avoir \u00e9teint la planche entre chaque session. Retirez la carte micro-SD et branchez-la sur le PC. Acc\u00e9dez au dossier APM/LOGS . Il contient des fichiers .BIN nomm\u00e9s par num\u00e9ros. Ils sont class\u00e9s par ordre chronologique . Vous pouvez v\u00e9rifier cet ordre gr\u00e2ce au script utils/verify_bin.py du d\u00e9p\u00f4t GitHub plancha-workflow . Copiez les fichiers .BIN dans le dossier temporaire de la planche, puis supprimez les fichiers sur la carte SD ainsi que le fichier .txt de 4 octets. Donn\u00e9es vid\u00e9o R\u00e9cup\u00e9rez les vid\u00e9os sur la carte SD de la GoPro. Pour diff\u00e9rencier les fichiers appartenant \u00e0 une m\u00eame session, observez les deux derniers chiffres du nom de fichier (ils restent identiques pour les chapitres d'une m\u00eame vid\u00e9o). `` Rassembler les donn\u00e9es brutes Pour chaque session, cr\u00e9ez un dossier respectant la nomenclature suivante : YYYYMMDD_country-code-optinal-place_device_session-number Exemple pour deux planches et deux sessions \u00e0 Saint-Leu : 20250411_REU-ST-LEU_ASV-1_01 20250411_REU-ST-LEU_ASV-1_02 20250411_REU-ST-LEU_ASV-2_01 20250411_REU-ST-LEU_ASV-2_02 Chaque dossier de session doit contenir l'arborescence suivante : .20250411_REU-ST-LEU_ASV-1_01 \u251c\u2500\u2500 DCIM (Vid\u00e9os GoPro) \u251c\u2500\u2500 GPS \u2502 \u251c\u2500\u2500 BASE (Donn\u00e9es du Reach RS3) \u2502 \u2514\u2500\u2500 DEVICE (Donn\u00e9es du Reach M2) \u2514\u2500\u2500 SENSORS (Fichier .BIN de la session) \u00c0 ce stade, les donn\u00e9es brutes sont class\u00e9es et pr\u00eates \u00e0 \u00eatre exploit\u00e9es. \u26a0\ufe0f Important : Il est n\u00e9cessaire de noter les sessions r\u00e9alis\u00e9es dans un fichier Excel pour assurer le suivi. \u26a0\ufe0f Conseil de s\u00e9curit\u00e9 : En cas de doute ou de mauvaise manipulation, privil\u00e9giez toujours le copier-coller suivi d'une suppression manuelle plut\u00f4t que le d\u00e9placement direct des fichiers. Traitement des donn\u00e9es : Synchronisation Images et Donn\u00e9es Temporelles Actuellement, les donn\u00e9es brutes ne sont pas directement exploitables : les vid\u00e9os ne poss\u00e8dent pas de coordonn\u00e9es GPS associ\u00e9es, la bathym\u00e9trie n'est pas corrig\u00e9e et le GPS n'est pas encore trait\u00e9 en PPK (Post-Processed Kinematic). Pour automatiser ce flux, nous utilisons le d\u00e9p\u00f4t plancha-workflow . Reportez-vous au README pour l'installation de l'environnement. 1. Gestion des sessions par batch (Fichier CSV) Pour traiter plusieurs sessions simultan\u00e9ment, utilisez l'option -csv . Il est fortement recommand\u00e9 d'utiliser un fichier CSV pour conserver une trace des param\u00e8tres appliqu\u00e9s. Exemple de structure CSV : session_name,time_first_frame,number_first_frame,filt_exclude_specific_timeUS,depth_range_max,depth_range_min,filt_exclude_specific_datetimeUTC,rgp_station 20240607_REU-HERMITAGE_ASV-1_01,2024:06:07 03:07:19.60,20,,20,,, 20250414_REU-TROU-DEAU_ASV-1_03,2025:04:14 04:29:56.00,10,\"[[201262382,219662452]]\",,,, \u26a0\ufe0f Note : Si vous n'utilisez pas de CSV, vous devrez configurer manuellement le fichier ppk_config.json . \u00c9tape 1 : Synchronisation temporelle et premi\u00e8res corrections L'objectif est de trouver le d\u00e9calage entre l'horloge de la cam\u00e9ra et le temps GPS. R\u00e9cup\u00e9ration de l'heure : Ex\u00e9cutez la commande suivante : python workflow.py -csv csv/2025_plancha.csv -os Analyse des frames : Allez dans le dossier PROCESSED_DATA/FRAMES . Trouvez la frame affichant l'heure, notez son num\u00e9ro ( number_first_frame ) et l'heure affich\u00e9e. Conversion UTC : Soustrayez 4 heures (pour La R\u00e9union) pour obtenir l'heure UTC. Exemple : 07:07:19.60 devient 03:07:19.60 dans le CSV. V\u00e9rification Qualit\u00e9 : GPS : Consultez GPS/DEVICE/GPS_ppk_position_accuracy.png . Un bon g\u00e9or\u00e9f\u00e9rencement doit afficher environ 90% de Q1 (Fix) . Bathy : V\u00e9rifiez PROCESSED_DATA/BATHY/depth_samples_utmcoord_preproc.png . Si des valeurs sont aberrantes, renseignez les colonnes depth_range_max ou min dans votre CSV. \u00c9tape 2 : Traitement complet Une fois la synchronisation renseign\u00e9e dans le CSV, relancez le processus global : python workflow.py -csv csv/2025_plancha.csv Ce que fait le script : D\u00e9coupage : Extraction \u00e0 2.997 fps (adapt\u00e9 au format GoPro 23.98 fps). G\u00e9olocalisation : Attribution d'une position GPS pr\u00e9cise \u00e0 chaque image. M\u00e9tadonn\u00e9es : \u00c9criture des donn\u00e9es dans les tags EXIF (position, attitude, etc.). R\u00e9sultats Fichier repr\u00e9sentant les positions de la planches. 70% de Q1 est suffisant pour passer \u00e0 la suite. Fichier pour visualiser la bathy. Ici l'interpolation a bien march\u00e9 et on a pas de morceau qui sort. On peut v\u00e9rifier les m\u00e9tadonn\u00e9es d'une image avec la commande : exiftool -a -n -g /media/bioeos/D/202312_plancha_session/20231207_REU-HERMITAGE_ASV-1_02/PROCESSED_DATA/FRAMES/20231207_REU-HERMITAGE_ASV-1_02_1_1231.jpeg et on obtient ---- ExifTool ---- ExifTool Version Number : 12.76 ---- File ---- File Name : 20231207_REU-HERMITAGE_ASV-1_02_1_1231.jpeg Directory : /media/bioeos/D/202312_plancha_session/20231207_REU-HERMITAGE_ASV-1_02/PROCESSED_DATA/FRAMES File Size : 1102133 File Modification Date/Time : 2024:05:24 18:55:26+04:00 File Access Date/Time : 2026:01:21 17:35:14+04:00 File Inode Change Date/Time : 2024:05:24 19:04:29+04:00 File Permissions : 100664 File Type : JPEG File Type Extension : JPG MIME Type : image/jpeg Exif Byte Order : MM Comment : Lavc58.134.100 Image Width : 3840 Image Height : 2160 Encoding Process : 0 Bits Per Sample : 8 Color Components : 3 Y Cb Cr Sub Sampling : 2 2 ---- JFIF ---- JFIF Version : 1 2 Resolution Unit : 0 X Resolution : 72 Y Resolution : 1 ---- EXIF ---- Image Width : 3840 Image Height : 2160 Bits Per Sample : 8Dernier point de l'interval \u00e0 retirer Camera Model Name : HERO8 Black X Resolution : 72 Y Resolution : 1 Resolution Unit : 1 Y Cb Cr Sub Sampling : 2 2 Y Cb Cr Positioning : 1 Exif Version : 0232 Date/Time Original : 2023:12:07 03:52:57 Components Configuration : 1 2 3 0 Exposure Compensation : 0 Focal Length : 2.92 Sub Sec Time Original : 297397000 Flashpix Version : 0100 Color Space : 65535 Focal Length In 35mm Format : 15 Sharpness : 1 Lens Serial Number : C3341327809152 GPS Version ID : 2 3 0 0 GPS Latitude Ref : S GPS Latitude : 21.0872743786806 GPS Longitude Ref : E GPS Longitude : 55.2264079169917 GPS Altitude Ref : 1 GPS Altitude : 0.69 Camera Serial Number : C3331353137142 ---- XMP ---- XMP Toolkit : Image::ExifTool 12.40 GPS Pitch : -1.09227367931115 GPS Roll : -2.76290844206535 GPS Track : 144.349900596421 Video Frame Rate : 23.976 ---- Composite ---- Image Size : 3840 2160 Megapixels : 8.2944 Scale Factor To 35 mm Equivalent: 5.13698630136986 Date/Time Original : 2023:12:07 03:52:57.297397000 GPS Altitude : -0.69 GPS Latitude : -21.0872743786806 GPS Longitude : 55.2264079169917 Circle Of Confusion : 0.00584900540241936 Field Of View : 100.388942610382 Focal Length : 15 GPS Position : -21.0872743786806 55.2264079169917 Troubleshooting Probl\u00e8me GPS (Reach RS2/3) Si les donn\u00e9es de votre base RS3 sont de mauvaise qualit\u00e9 (GPSFix 5 ou absent), utilisez les stations du RGP (IGN) . Identifiez la station la plus proche sur rgp.ign.fr . Modifiez ppk_config.json : \"rgp_station\": \"lepo\", \"force_use_rgp\": true Correction d'une trajectoire d\u00e9rivante dans la bathym\u00e9trie Visualisation de la bathym\u00e9trie brute pr\u00e9sentant un artefact de trajectoire. Il arrive que le fichier depth_samples_utm_coord_preproc.png affiche une trajectoire sortant du transect d'\u00e9tude. Ce ph\u00e9nom\u00e8ne survient g\u00e9n\u00e9ralement lors d'une mise en manuel de l'ASV ou d'une d\u00e9rive lors de la mise \u00e0 l'eau. Pour obtenir un raster final propre, il est n\u00e9cessaire de filtrer ces donn\u00e9es aberrantes. M\u00e9thode de filtrage : Ouvrez le fichier interactif webmap_usv_track.html situ\u00e9 dans le dossier BATHY . Identifiez visuellement le segment \u00e0 supprimer. Cliquez sur les points correspondant au d\u00e9but et \u00e0 la fin de la zone de d\u00e9rive pour relever leurs valeurs respectives de timeUS . Dans cet exemple, nous avons identifi\u00e9 les bornes suivantes : 641643950 et 700444139 . Localisation du premier point du segment \u00e0 exclure. Zoom sur la valeur timeUS du point initial. Localisation du dernier point de l'intervalle \u00e0 retirer. Astuce : Pour plus de pr\u00e9cision, vous pouvez augmenter le niveau de zoom maximal en modifiant directement les param\u00e8tres dans le code source du fichier .html . Application de la correction : Reportez l'intervalle temporel dans la colonne filt_exclude_specific_timeUS de votre fichier CSV, puis relancez le traitement : session_name,time_first_frame,number_first_frame,filt_exclude_specific_timeUS,depth_range_max,depth_range_min,filt_exclude_specific_datetimeUTC,rgp_station 20231127_REU-HERMITAGE_ASV-2_03,2023:11:27 05:47:50.42,30,\"[[641643950, 700444139]]\",,,, R\u00e9sultat apr\u00e8s filtrage : Bathym\u00e9trie finale apr\u00e8s exclusion du segment de d\u00e9rive. Suppression des trajectoires ind\u00e9sirables dans les m\u00e9tadonn\u00e9es (Session 20231213_REU-ETANG-SALE_ASV-2_01) Une fois les deux \u00e9tapes de traitement termin\u00e9es, l'import du fichier metadata.csv dans QGIS peut parfois r\u00e9v\u00e9ler des anomalies de trajectoire : Visualisation des m\u00e9tadonn\u00e9es montrant des segments d\u00e9rivant vers la plage. On observe ici des trac\u00e9s qui s'\u00e9tendent jusqu'au rivage. Ce probl\u00e8me survient g\u00e9n\u00e9ralement lorsque la session ne contient pas de fichier .BIN dans le dossier SENSORS : le programme ne parvient pas \u00e0 d\u00e9tecter automatiquement les points de d\u00e9but et de fin de mission. Proc\u00e9dure de filtrage manuel : Pour nettoyer le jeu de donn\u00e9es, nous devons d\u00e9finir manuellement les intervalles de temps \u00e0 exclure. Dans ce cas pr\u00e9cis, nous isolons deux p\u00e9riodes (le trajet aller vers la zone et le trajet retour apr\u00e8s la mission). S\u00e9lection du point limite avant le d\u00e9but effectif de l'acquisition. S\u00e9lection du point limite apr\u00e8s la fin de l'acquisition. Les deux intervalles identifi\u00e9s pour suppression sont : [['2023:12:13 03:22:04.0','2023:12:13 03:25:25.0'],['2023:12:13 04:07:03.0','2023:12:13 04:18:48.0']] Note : Un filtrage l\u00e9g\u00e8rement large est pr\u00e9f\u00e9rable pour \u00e9liminer les accumulations d'images stagnantes sur un m\u00eame point en bord de c\u00f4te. Relance du traitement : Il est n\u00e9cessaire de relancer l'int\u00e9gralit\u00e9 de la pipeline (incluant l'extraction des images) en renseignant la colonne filt_exclude_specific_datetimeUTC dans votre CSV : session_name,time_first_frame,number_first_frame,filt_exclude_specific_timeUS,depth_range_max,depth_range_min,filt_exclude_specific_datetimeUTC,rgp_station 20231213_REU-ETANG-SALE_ASV-2_01,2023:12:13 03:21:47.15,20,,,,\"[['2023:12:13 03:22:04.0','2023:12:13 03:25:25.0'],['2023:12:13 04:07:03.0','2023:12:13 04:18:48.0']]\", R\u00e9sultat final : Jeu de donn\u00e9es final, propre et pr\u00eat pour l'analyse. Application de l'IA (Inf\u00e9rence) Le traitement se poursuit par l'application de deux mod\u00e8les d'intelligence artificielle successifs pour trier et analyser les images. 1. Filtrage avec le mod\u00e8le \"Jacques\" La premi\u00e8re \u00e9tape utilise Jacques , un mod\u00e8le bas\u00e9 sur l'architecture ResNet , con\u00e7u pour classer les images en deux cat\u00e9gories : utiles ou inutiles . Le filtrage \u00e9limine les images de \"grand bleu\", ainsi que celles montrant le ciel ou la plage. Ce processus r\u00e9pond \u00e0 deux objectifs : \u00c9thique et RGPD : Garantir qu'aucun visage identifiable n'est publi\u00e9 sans consentement. Optimisation : \u00c9viter de solliciter le second mod\u00e8le, plus complexe, pour analyser des images sans int\u00e9r\u00eat biologique. Exemples d'images consid\u00e9r\u00e9es comme exploitables. Exemples d'images \u00e0 exclure (hors zone ou pr\u00e9sence humaine). 2. Analyse biologique avec \"DinoVdeau\" Le second mod\u00e8le, DinoVdeau , est un mod\u00e8le entra\u00een\u00e9 \u00e0 partir de Dinov2. Il identifie simultan\u00e9ment plusieurs cat\u00e9gories sur une m\u00eame image. Donn\u00e9es d'entra\u00eenement : Disponible sur HuggingFace et Zenodo . Architecture globale du mod\u00e8le DinoVdeau. Ex\u00e9cution de l'inf\u00e9rence Pour lancer l'analyse, utilisez le d\u00e9p\u00f4t plancha-inference . Une fois l'environnement configur\u00e9, ex\u00e9cutez la commande suivante : python inference.py -efol -pfol /chemin/vers/votre/dossier -c R\u00e9sultats obtenus En fin de calcul, le script g\u00e9n\u00e8re trois types de fichiers : Un fichier de pr\u00e9dictions : Regroupe les scores de classification associ\u00e9s aux coordonn\u00e9es GPS. Un raster interpol\u00e9 : Une carte de pr\u00e9sence/absence g\u00e9n\u00e9r\u00e9e \u00e0 partir des pr\u00e9dictions (l'aspect r\u00e9gulier du transect est important pour obtenir une interpolation de qualit\u00e9). Un rapport PDF : Un document de synth\u00e8se r\u00e9capitulant les statistiques de la session. Synth\u00e8se des r\u00e9sultats au format PDF. Distribution spatiale des scores (ex : pr\u00e9sence d'Acropores branchus). Raster final interpol\u00e9 repr\u00e9sentant la densit\u00e9 de l'esp\u00e8ce cibl\u00e9e. G\u00e9n\u00e9ration d'orthophotos La cr\u00e9ation d'orthophotos est une t\u00e2che gourmande en ressources. Pour cette raison, l'utilisation du cluster Datarmor est indispensable. Un script sp\u00e9cifique permet d'automatiser ce processus via OpenDroneMap (ODM) : \ud83d\udc49 Script ODM Datarmor (asv_light.pbs) Ce script assure les fonctions suivantes : Configuration automatique de l'environnement logiciel sur Datarmor. Lancement d'OpenDroneMap avec des param\u00e8tres optimis\u00e9s pour les donn\u00e9es ASV. Publication et synchronisation des donn\u00e9es 1. Archivage sur Zenodo et mise \u00e0 jour de l'Atlas Une fois les donn\u00e9es trait\u00e9es, la session doit \u00eatre mise en ligne pour garantir sa p\u00e9rennit\u00e9. Veuillez vous r\u00e9f\u00e9rer aux guides de la section Outils pour Zenodo pour : T\u00e9l\u00e9verser vos sessions sur Zenodo . Synchroniser les m\u00e9tadonn\u00e9es avec la base de donn\u00e9es Seatizen Atlas . 2. H\u00e9bergement des rasters sur le serveur COG La derni\u00e8re \u00e9tape consiste \u00e0 rendre les couches cartographiques accessibles via le serveur COG (Cloud Optimized GeoTIFF) . Vous devrez rassembler les rasters suivants : Bathym\u00e9trie corrig\u00e9e. Pr\u00e9dictions IA (cartes de scores). Orthophotos g\u00e9n\u00e9r\u00e9es sur Datarmor. Toutes les instructions de d\u00e9ploiement sont d\u00e9taill\u00e9es sur le d\u00e9p\u00f4t cog-server ou directement dans l'onglet Ajouter un raster sur cog-server de cette documentation.","title":"Flux de traitement des donn\u00e9es"},{"location":"plancha/after-session/#traiter-une-session-de-planche","text":"","title":"Traiter une session de planche"},{"location":"plancha/after-session/#dechargement-des-donnees-brutes","text":"Cr\u00e9er un dossier tmp pour stocker temporairement les fichiers bruts . Le fichier du Reach RS3 se place \u00e0 la racine, tandis qu'il faut cr\u00e9er un dossier sp\u00e9cifique par planche.","title":"D\u00e9chargement des donn\u00e9es brutes"},{"location":"plancha/after-session/#gps-base-reach-rs3","text":"Dans un premier temps, r\u00e9cup\u00e9rez les donn\u00e9es sur le Reach RS2/3 : Allumez-le sans partage de connexion ; au bout d'un moment, il passera en mode point d'acc\u00e8s (hotspot) . Connectez-vous \u00e0 son r\u00e9seau Wi-Fi (le code est emlidreach ). Une fois connect\u00e9, rendez-vous sur l'URL 192.168.42.1 . Allez dans l'onglet Logging et t\u00e9l\u00e9chargez l'archive .zip du jour. Note : Sur les anciens firmwares, t\u00e9l\u00e9chargez manuellement les fichiers LLH et RINEX.","title":"GPS Base - Reach RS3"},{"location":"plancha/after-session/#gps-device-reach-m2","text":"Pour le GPS de la planche : Allumez la planche. Au bout d'une minute ou deux, le Reach M2 passe en hotspot. Connectez-vous au r\u00e9seau (mot de passe : emlidreach ). Rendez-vous sur l'URL 192.168.42.1 dans l'onglet Logging . T\u00e9l\u00e9chargez le fichier .zip (ou les fichiers LLH et RINEX pour les anciens firmwares) dans le dossier tmp de la planche associ\u00e9e. Il y a autant de fichiers .zip que de sessions r\u00e9alis\u00e9es.","title":"GPS Device - Reach M2"},{"location":"plancha/after-session/#fichiers-de-lautopilote","text":"L'autopilote (le Cube Orange) g\u00e9n\u00e8re un fichier par mission, \u00e0 condition d'avoir \u00e9teint la planche entre chaque session. Retirez la carte micro-SD et branchez-la sur le PC. Acc\u00e9dez au dossier APM/LOGS . Il contient des fichiers .BIN nomm\u00e9s par num\u00e9ros. Ils sont class\u00e9s par ordre chronologique . Vous pouvez v\u00e9rifier cet ordre gr\u00e2ce au script utils/verify_bin.py du d\u00e9p\u00f4t GitHub plancha-workflow . Copiez les fichiers .BIN dans le dossier temporaire de la planche, puis supprimez les fichiers sur la carte SD ainsi que le fichier .txt de 4 octets.","title":"Fichiers de l'autopilote"},{"location":"plancha/after-session/#donnees-video","text":"R\u00e9cup\u00e9rez les vid\u00e9os sur la carte SD de la GoPro. Pour diff\u00e9rencier les fichiers appartenant \u00e0 une m\u00eame session, observez les deux derniers chiffres du nom de fichier (ils restent identiques pour les chapitres d'une m\u00eame vid\u00e9o). ``","title":"Donn\u00e9es vid\u00e9o"},{"location":"plancha/after-session/#rassembler-les-donnees-brutes","text":"Pour chaque session, cr\u00e9ez un dossier respectant la nomenclature suivante : YYYYMMDD_country-code-optinal-place_device_session-number Exemple pour deux planches et deux sessions \u00e0 Saint-Leu : 20250411_REU-ST-LEU_ASV-1_01 20250411_REU-ST-LEU_ASV-1_02 20250411_REU-ST-LEU_ASV-2_01 20250411_REU-ST-LEU_ASV-2_02 Chaque dossier de session doit contenir l'arborescence suivante : .20250411_REU-ST-LEU_ASV-1_01 \u251c\u2500\u2500 DCIM (Vid\u00e9os GoPro) \u251c\u2500\u2500 GPS \u2502 \u251c\u2500\u2500 BASE (Donn\u00e9es du Reach RS3) \u2502 \u2514\u2500\u2500 DEVICE (Donn\u00e9es du Reach M2) \u2514\u2500\u2500 SENSORS (Fichier .BIN de la session) \u00c0 ce stade, les donn\u00e9es brutes sont class\u00e9es et pr\u00eates \u00e0 \u00eatre exploit\u00e9es. \u26a0\ufe0f Important : Il est n\u00e9cessaire de noter les sessions r\u00e9alis\u00e9es dans un fichier Excel pour assurer le suivi. \u26a0\ufe0f Conseil de s\u00e9curit\u00e9 : En cas de doute ou de mauvaise manipulation, privil\u00e9giez toujours le copier-coller suivi d'une suppression manuelle plut\u00f4t que le d\u00e9placement direct des fichiers.","title":"Rassembler les donn\u00e9es brutes"},{"location":"plancha/after-session/#traitement-des-donnees-synchronisation-images-et-donnees-temporelles","text":"Actuellement, les donn\u00e9es brutes ne sont pas directement exploitables : les vid\u00e9os ne poss\u00e8dent pas de coordonn\u00e9es GPS associ\u00e9es, la bathym\u00e9trie n'est pas corrig\u00e9e et le GPS n'est pas encore trait\u00e9 en PPK (Post-Processed Kinematic). Pour automatiser ce flux, nous utilisons le d\u00e9p\u00f4t plancha-workflow . Reportez-vous au README pour l'installation de l'environnement.","title":"Traitement des donn\u00e9es : Synchronisation Images et Donn\u00e9es Temporelles"},{"location":"plancha/after-session/#1-gestion-des-sessions-par-batch-fichier-csv","text":"Pour traiter plusieurs sessions simultan\u00e9ment, utilisez l'option -csv . Il est fortement recommand\u00e9 d'utiliser un fichier CSV pour conserver une trace des param\u00e8tres appliqu\u00e9s. Exemple de structure CSV : session_name,time_first_frame,number_first_frame,filt_exclude_specific_timeUS,depth_range_max,depth_range_min,filt_exclude_specific_datetimeUTC,rgp_station 20240607_REU-HERMITAGE_ASV-1_01,2024:06:07 03:07:19.60,20,,20,,, 20250414_REU-TROU-DEAU_ASV-1_03,2025:04:14 04:29:56.00,10,\"[[201262382,219662452]]\",,,, \u26a0\ufe0f Note : Si vous n'utilisez pas de CSV, vous devrez configurer manuellement le fichier ppk_config.json .","title":"1. Gestion des sessions par batch (Fichier CSV)"},{"location":"plancha/after-session/#etape-1-synchronisation-temporelle-et-premieres-corrections","text":"L'objectif est de trouver le d\u00e9calage entre l'horloge de la cam\u00e9ra et le temps GPS. R\u00e9cup\u00e9ration de l'heure : Ex\u00e9cutez la commande suivante : python workflow.py -csv csv/2025_plancha.csv -os Analyse des frames : Allez dans le dossier PROCESSED_DATA/FRAMES . Trouvez la frame affichant l'heure, notez son num\u00e9ro ( number_first_frame ) et l'heure affich\u00e9e. Conversion UTC : Soustrayez 4 heures (pour La R\u00e9union) pour obtenir l'heure UTC. Exemple : 07:07:19.60 devient 03:07:19.60 dans le CSV. V\u00e9rification Qualit\u00e9 : GPS : Consultez GPS/DEVICE/GPS_ppk_position_accuracy.png . Un bon g\u00e9or\u00e9f\u00e9rencement doit afficher environ 90% de Q1 (Fix) . Bathy : V\u00e9rifiez PROCESSED_DATA/BATHY/depth_samples_utmcoord_preproc.png . Si des valeurs sont aberrantes, renseignez les colonnes depth_range_max ou min dans votre CSV.","title":"\u00c9tape 1 : Synchronisation temporelle et premi\u00e8res corrections"},{"location":"plancha/after-session/#etape-2-traitement-complet","text":"Une fois la synchronisation renseign\u00e9e dans le CSV, relancez le processus global : python workflow.py -csv csv/2025_plancha.csv Ce que fait le script : D\u00e9coupage : Extraction \u00e0 2.997 fps (adapt\u00e9 au format GoPro 23.98 fps). G\u00e9olocalisation : Attribution d'une position GPS pr\u00e9cise \u00e0 chaque image. M\u00e9tadonn\u00e9es : \u00c9criture des donn\u00e9es dans les tags EXIF (position, attitude, etc.).","title":"\u00c9tape 2 : Traitement complet"},{"location":"plancha/after-session/#resultats","text":"Fichier repr\u00e9sentant les positions de la planches. 70% de Q1 est suffisant pour passer \u00e0 la suite. Fichier pour visualiser la bathy. Ici l'interpolation a bien march\u00e9 et on a pas de morceau qui sort. On peut v\u00e9rifier les m\u00e9tadonn\u00e9es d'une image avec la commande : exiftool -a -n -g /media/bioeos/D/202312_plancha_session/20231207_REU-HERMITAGE_ASV-1_02/PROCESSED_DATA/FRAMES/20231207_REU-HERMITAGE_ASV-1_02_1_1231.jpeg et on obtient ---- ExifTool ---- ExifTool Version Number : 12.76 ---- File ---- File Name : 20231207_REU-HERMITAGE_ASV-1_02_1_1231.jpeg Directory : /media/bioeos/D/202312_plancha_session/20231207_REU-HERMITAGE_ASV-1_02/PROCESSED_DATA/FRAMES File Size : 1102133 File Modification Date/Time : 2024:05:24 18:55:26+04:00 File Access Date/Time : 2026:01:21 17:35:14+04:00 File Inode Change Date/Time : 2024:05:24 19:04:29+04:00 File Permissions : 100664 File Type : JPEG File Type Extension : JPG MIME Type : image/jpeg Exif Byte Order : MM Comment : Lavc58.134.100 Image Width : 3840 Image Height : 2160 Encoding Process : 0 Bits Per Sample : 8 Color Components : 3 Y Cb Cr Sub Sampling : 2 2 ---- JFIF ---- JFIF Version : 1 2 Resolution Unit : 0 X Resolution : 72 Y Resolution : 1 ---- EXIF ---- Image Width : 3840 Image Height : 2160 Bits Per Sample : 8Dernier point de l'interval \u00e0 retirer Camera Model Name : HERO8 Black X Resolution : 72 Y Resolution : 1 Resolution Unit : 1 Y Cb Cr Sub Sampling : 2 2 Y Cb Cr Positioning : 1 Exif Version : 0232 Date/Time Original : 2023:12:07 03:52:57 Components Configuration : 1 2 3 0 Exposure Compensation : 0 Focal Length : 2.92 Sub Sec Time Original : 297397000 Flashpix Version : 0100 Color Space : 65535 Focal Length In 35mm Format : 15 Sharpness : 1 Lens Serial Number : C3341327809152 GPS Version ID : 2 3 0 0 GPS Latitude Ref : S GPS Latitude : 21.0872743786806 GPS Longitude Ref : E GPS Longitude : 55.2264079169917 GPS Altitude Ref : 1 GPS Altitude : 0.69 Camera Serial Number : C3331353137142 ---- XMP ---- XMP Toolkit : Image::ExifTool 12.40 GPS Pitch : -1.09227367931115 GPS Roll : -2.76290844206535 GPS Track : 144.349900596421 Video Frame Rate : 23.976 ---- Composite ---- Image Size : 3840 2160 Megapixels : 8.2944 Scale Factor To 35 mm Equivalent: 5.13698630136986 Date/Time Original : 2023:12:07 03:52:57.297397000 GPS Altitude : -0.69 GPS Latitude : -21.0872743786806 GPS Longitude : 55.2264079169917 Circle Of Confusion : 0.00584900540241936 Field Of View : 100.388942610382 Focal Length : 15 GPS Position : -21.0872743786806 55.2264079169917","title":"R\u00e9sultats"},{"location":"plancha/after-session/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"plancha/after-session/#probleme-gps-reach-rs23","text":"Si les donn\u00e9es de votre base RS3 sont de mauvaise qualit\u00e9 (GPSFix 5 ou absent), utilisez les stations du RGP (IGN) . Identifiez la station la plus proche sur rgp.ign.fr . Modifiez ppk_config.json : \"rgp_station\": \"lepo\", \"force_use_rgp\": true","title":"Probl\u00e8me GPS (Reach RS2/3)"},{"location":"plancha/after-session/#correction-dune-trajectoire-derivante-dans-la-bathymetrie","text":"Visualisation de la bathym\u00e9trie brute pr\u00e9sentant un artefact de trajectoire. Il arrive que le fichier depth_samples_utm_coord_preproc.png affiche une trajectoire sortant du transect d'\u00e9tude. Ce ph\u00e9nom\u00e8ne survient g\u00e9n\u00e9ralement lors d'une mise en manuel de l'ASV ou d'une d\u00e9rive lors de la mise \u00e0 l'eau. Pour obtenir un raster final propre, il est n\u00e9cessaire de filtrer ces donn\u00e9es aberrantes. M\u00e9thode de filtrage : Ouvrez le fichier interactif webmap_usv_track.html situ\u00e9 dans le dossier BATHY . Identifiez visuellement le segment \u00e0 supprimer. Cliquez sur les points correspondant au d\u00e9but et \u00e0 la fin de la zone de d\u00e9rive pour relever leurs valeurs respectives de timeUS . Dans cet exemple, nous avons identifi\u00e9 les bornes suivantes : 641643950 et 700444139 . Localisation du premier point du segment \u00e0 exclure. Zoom sur la valeur timeUS du point initial. Localisation du dernier point de l'intervalle \u00e0 retirer. Astuce : Pour plus de pr\u00e9cision, vous pouvez augmenter le niveau de zoom maximal en modifiant directement les param\u00e8tres dans le code source du fichier .html . Application de la correction : Reportez l'intervalle temporel dans la colonne filt_exclude_specific_timeUS de votre fichier CSV, puis relancez le traitement : session_name,time_first_frame,number_first_frame,filt_exclude_specific_timeUS,depth_range_max,depth_range_min,filt_exclude_specific_datetimeUTC,rgp_station 20231127_REU-HERMITAGE_ASV-2_03,2023:11:27 05:47:50.42,30,\"[[641643950, 700444139]]\",,,, R\u00e9sultat apr\u00e8s filtrage : Bathym\u00e9trie finale apr\u00e8s exclusion du segment de d\u00e9rive.","title":"Correction d'une trajectoire d\u00e9rivante dans la bathym\u00e9trie"},{"location":"plancha/after-session/#suppression-des-trajectoires-indesirables-dans-les-metadonnees-session-20231213_reu-etang-sale_asv-2_01","text":"Une fois les deux \u00e9tapes de traitement termin\u00e9es, l'import du fichier metadata.csv dans QGIS peut parfois r\u00e9v\u00e9ler des anomalies de trajectoire : Visualisation des m\u00e9tadonn\u00e9es montrant des segments d\u00e9rivant vers la plage. On observe ici des trac\u00e9s qui s'\u00e9tendent jusqu'au rivage. Ce probl\u00e8me survient g\u00e9n\u00e9ralement lorsque la session ne contient pas de fichier .BIN dans le dossier SENSORS : le programme ne parvient pas \u00e0 d\u00e9tecter automatiquement les points de d\u00e9but et de fin de mission. Proc\u00e9dure de filtrage manuel : Pour nettoyer le jeu de donn\u00e9es, nous devons d\u00e9finir manuellement les intervalles de temps \u00e0 exclure. Dans ce cas pr\u00e9cis, nous isolons deux p\u00e9riodes (le trajet aller vers la zone et le trajet retour apr\u00e8s la mission). S\u00e9lection du point limite avant le d\u00e9but effectif de l'acquisition. S\u00e9lection du point limite apr\u00e8s la fin de l'acquisition. Les deux intervalles identifi\u00e9s pour suppression sont : [['2023:12:13 03:22:04.0','2023:12:13 03:25:25.0'],['2023:12:13 04:07:03.0','2023:12:13 04:18:48.0']] Note : Un filtrage l\u00e9g\u00e8rement large est pr\u00e9f\u00e9rable pour \u00e9liminer les accumulations d'images stagnantes sur un m\u00eame point en bord de c\u00f4te. Relance du traitement : Il est n\u00e9cessaire de relancer l'int\u00e9gralit\u00e9 de la pipeline (incluant l'extraction des images) en renseignant la colonne filt_exclude_specific_datetimeUTC dans votre CSV : session_name,time_first_frame,number_first_frame,filt_exclude_specific_timeUS,depth_range_max,depth_range_min,filt_exclude_specific_datetimeUTC,rgp_station 20231213_REU-ETANG-SALE_ASV-2_01,2023:12:13 03:21:47.15,20,,,,\"[['2023:12:13 03:22:04.0','2023:12:13 03:25:25.0'],['2023:12:13 04:07:03.0','2023:12:13 04:18:48.0']]\", R\u00e9sultat final : Jeu de donn\u00e9es final, propre et pr\u00eat pour l'analyse.","title":"Suppression des trajectoires ind\u00e9sirables dans les m\u00e9tadonn\u00e9es (Session 20231213_REU-ETANG-SALE_ASV-2_01)"},{"location":"plancha/after-session/#application-de-lia-inference","text":"Le traitement se poursuit par l'application de deux mod\u00e8les d'intelligence artificielle successifs pour trier et analyser les images.","title":"Application de l'IA (Inf\u00e9rence)"},{"location":"plancha/after-session/#1-filtrage-avec-le-modele-jacques","text":"La premi\u00e8re \u00e9tape utilise Jacques , un mod\u00e8le bas\u00e9 sur l'architecture ResNet , con\u00e7u pour classer les images en deux cat\u00e9gories : utiles ou inutiles . Le filtrage \u00e9limine les images de \"grand bleu\", ainsi que celles montrant le ciel ou la plage. Ce processus r\u00e9pond \u00e0 deux objectifs : \u00c9thique et RGPD : Garantir qu'aucun visage identifiable n'est publi\u00e9 sans consentement. Optimisation : \u00c9viter de solliciter le second mod\u00e8le, plus complexe, pour analyser des images sans int\u00e9r\u00eat biologique. Exemples d'images consid\u00e9r\u00e9es comme exploitables. Exemples d'images \u00e0 exclure (hors zone ou pr\u00e9sence humaine).","title":"1. Filtrage avec le mod\u00e8le \"Jacques\""},{"location":"plancha/after-session/#2-analyse-biologique-avec-dinovdeau","text":"Le second mod\u00e8le, DinoVdeau , est un mod\u00e8le entra\u00een\u00e9 \u00e0 partir de Dinov2. Il identifie simultan\u00e9ment plusieurs cat\u00e9gories sur une m\u00eame image. Donn\u00e9es d'entra\u00eenement : Disponible sur HuggingFace et Zenodo . Architecture globale du mod\u00e8le DinoVdeau.","title":"2. Analyse biologique avec \"DinoVdeau\""},{"location":"plancha/after-session/#execution-de-linference","text":"Pour lancer l'analyse, utilisez le d\u00e9p\u00f4t plancha-inference . Une fois l'environnement configur\u00e9, ex\u00e9cutez la commande suivante : python inference.py -efol -pfol /chemin/vers/votre/dossier -c","title":"Ex\u00e9cution de l'inf\u00e9rence"},{"location":"plancha/after-session/#resultats-obtenus","text":"En fin de calcul, le script g\u00e9n\u00e8re trois types de fichiers : Un fichier de pr\u00e9dictions : Regroupe les scores de classification associ\u00e9s aux coordonn\u00e9es GPS. Un raster interpol\u00e9 : Une carte de pr\u00e9sence/absence g\u00e9n\u00e9r\u00e9e \u00e0 partir des pr\u00e9dictions (l'aspect r\u00e9gulier du transect est important pour obtenir une interpolation de qualit\u00e9). Un rapport PDF : Un document de synth\u00e8se r\u00e9capitulant les statistiques de la session. Synth\u00e8se des r\u00e9sultats au format PDF. Distribution spatiale des scores (ex : pr\u00e9sence d'Acropores branchus). Raster final interpol\u00e9 repr\u00e9sentant la densit\u00e9 de l'esp\u00e8ce cibl\u00e9e.","title":"R\u00e9sultats obtenus"},{"location":"plancha/after-session/#generation-dorthophotos","text":"La cr\u00e9ation d'orthophotos est une t\u00e2che gourmande en ressources. Pour cette raison, l'utilisation du cluster Datarmor est indispensable. Un script sp\u00e9cifique permet d'automatiser ce processus via OpenDroneMap (ODM) : \ud83d\udc49 Script ODM Datarmor (asv_light.pbs) Ce script assure les fonctions suivantes : Configuration automatique de l'environnement logiciel sur Datarmor. Lancement d'OpenDroneMap avec des param\u00e8tres optimis\u00e9s pour les donn\u00e9es ASV.","title":"G\u00e9n\u00e9ration d'orthophotos"},{"location":"plancha/after-session/#publication-et-synchronisation-des-donnees","text":"","title":"Publication et synchronisation des donn\u00e9es"},{"location":"plancha/after-session/#1-archivage-sur-zenodo-et-mise-a-jour-de-latlas","text":"Une fois les donn\u00e9es trait\u00e9es, la session doit \u00eatre mise en ligne pour garantir sa p\u00e9rennit\u00e9. Veuillez vous r\u00e9f\u00e9rer aux guides de la section Outils pour Zenodo pour : T\u00e9l\u00e9verser vos sessions sur Zenodo . Synchroniser les m\u00e9tadonn\u00e9es avec la base de donn\u00e9es Seatizen Atlas .","title":"1. Archivage sur Zenodo et mise \u00e0 jour de l'Atlas"},{"location":"plancha/after-session/#2-hebergement-des-rasters-sur-le-serveur-cog","text":"La derni\u00e8re \u00e9tape consiste \u00e0 rendre les couches cartographiques accessibles via le serveur COG (Cloud Optimized GeoTIFF) . Vous devrez rassembler les rasters suivants : Bathym\u00e9trie corrig\u00e9e. Pr\u00e9dictions IA (cartes de scores). Orthophotos g\u00e9n\u00e9r\u00e9es sur Datarmor. Toutes les instructions de d\u00e9ploiement sont d\u00e9taill\u00e9es sur le d\u00e9p\u00f4t cog-server ou directement dans l'onglet Ajouter un raster sur cog-server de cette documentation.","title":"2. H\u00e9bergement des rasters sur le serveur COG"},{"location":"plancha/before-session/","text":"Session d'acquisition Plancha Conditions m\u00e9t\u00e9o et heure d'acquisition Une session d'acquisition se r\u00e9alise le matin, id\u00e9alement au lever du soleil pour \u00e9viter les caustiques au fond de l'eau. Pr\u00e9paration du mat\u00e9riel d'acquisition pour une session Ordinateur de terrain avec Mission Planner. Bo\u00eetier de t\u00e9l\u00e9m\u00e9trie pour \u00e9tablir la communication. Manette pour piloter la planche. 2 batteries 4S 10A 1C (permettent de r\u00e9aliser deux sessions). 1 GoPro avec ses batteries : pr\u00e9voir les batteries (1 par session), le caisson \u00e9tanche et les outils de fixation. Un Reach RS2/RS3 (\u00ab bouboule \u00bb) qui fera office de base GPS, avec son tr\u00e9pied et un t\u00e9l\u00e9phone pour le partage de connexion. Mat\u00e9riel. Les gopros doivent \u00eatre configur\u00e9s comme ceci : Configuration GoPro partie 1. Configuration GoPro partie 2. Configuration GoPro partie 3. Proc\u00e9dure sur la plage Pr\u00e9paration du REACH RS2/3 Pour plus d'informations, voir le tutoriel d'Emlid . D\u00e9ployer le tr\u00e9pied dans un espace d\u00e9gag\u00e9 (sans arbres ni b\u00e2timents ). Activer le partage de connexion sur son t\u00e9l\u00e9phone. Allumer le Reach et attendre que les LEDs deviennent bleues . V\u00e9rifier que la base est en FIX dans l'application Emlid Flow. Il faut la param\u00e9trer pour qu'elle se connecte \u00e0 une base Centipede : Lien tutoriel Centipede . Liste des serveurs ntrip. Setup de la bouboule sur la plage. Pr\u00e9paration de la planche V\u00e9rifier la tension des batteries au multim\u00e8tre et s'assurer que l'\u00e9cart entre elles ne d\u00e9passe pas 0,1 V . Si la diff\u00e9rence est sup\u00e9rieure, ne pas les utiliser sous peine de les endommager. Installer les batteries dans la planche et l'allumer. \u26a0\ufe0f Attention : Ouvrir le caisson de la planche doucement, car l'appel d'air peut aspirer des gouttes d'eau \u00e0 l'int\u00e9rieur. Installer la batterie dans la GoPro et placer celle-ci dans son caisson. \u26a0\ufe0f Important : Nettoyer soigneusement le joint du caisson s'il pr\u00e9sente des grains de sable. Juste avant la mise \u00e0 l'eau , d\u00e9marrer l'enregistrement de la GoPro et filmer l'heure sur une application d'horloge atomique (pour la synchronisation). Exemple : Atomic Clock . Optimiser la communication avec le PC en redressant bien les antennes. Positionnement des batteries. Fixation de la cam\u00e9ra. \u26a0\ufe0f Elle doit \u00eatre allum\u00e9e \u26a0\ufe0f Synchronisation de l'heure. Antennes. Pr\u00e9paration de l'ordinateur Setup du mat\u00e9riel. Configuration logicielle et lancement Brancher le bo\u00eetier de t\u00e9l\u00e9m\u00e9trie et la manette Xbox \u00e0 l'ordinateur. Lancer l'application Mission Planner . Se connecter \u00e0 la planche avec les param\u00e8tres suivants : Le port COM change \u00e0 chaque fois mais souvent c'est celui en dessous des 3 Communications. Connexion en cours, chargement des param\u00e8tres de la planche. Une fois connect\u00e9e, la planche doit appara\u00eetre sur la carte. Apparition de la planche sur le carte. Ici \u00e0 Ifremer au Port. D\u00e9finir le \"Home Point\" sur la position actuelle de la planche pour \u00e9viter tout incident (RTL - Return to Launch). Cr\u00e9ation du plan de vol (Mission) Dans l'onglet Plan , dessiner un polygone : faire un clic droit sur la carte pour acc\u00e9der au menu et placer 4 points pour former un rectangle. Une fois la forme satisfaisante, faire un clic droit -> Auto-WP -> Survey (Grid) . Une fen\u00eatre contextuelle s'ouvre affichant le trac\u00e9 (transect). V\u00e9rifications : Vitesse : V\u00e9rifier que la vitesse est bien r\u00e9gl\u00e9e sur 1 m/s (panneau de droite). Temps de mission : V\u00e9rifier la dur\u00e9e estim\u00e9e en bas de l'\u00e9cran. Elle doit \u00eatre comprise entre 50 min et 1h15 . Au-del\u00e0, l'autonomie de la GoPro sera insuffisante. Home Point : Si le temps estim\u00e9 est anormalement \u00e9lev\u00e9, v\u00e9rifier que le point H (Home) est bien situ\u00e9 \u00e0 c\u00f4t\u00e9 de la planche. Type de trac\u00e9 : Dans le deuxi\u00e8me onglet du menu, vous pouvez changer le type de transect (Cross Grid ou Linear). Si tout est correct, revenir sur le premier onglet et cliquer sur Accept (ou Valider). Un rectangle jaune appara\u00eet sur la carte. On place le Homepoint \u00e0 c\u00f4t\u00e9 de la session que l'on va dessiner. Clique droit sur la carte pour afficher la fen\u00eatre. Dessinez un polygon. Clique droit sur la carte pour afficher la fen\u00eatre. On peut voir la vitesse de la planche et le temps d'acquisition. On peut r\u00e9gler la forme du transect et si c'est bon on valide. On obtient un transect. Enregistrement et transfert Sauvegarder localement : Cliquer sur Save pour enregistrer le fichier de waypoints par s\u00e9curit\u00e9 (Ex: 20251110_REU-ST-LEU_ASV-1_01.waypoints ). Envoyer \u00e0 la planche : Cliquer sur Write pour transf\u00e9rer les donn\u00e9es vers la m\u00e9moire de la planche. Une fois le transfert termin\u00e9, la planche peut \u00eatre mise \u00e0 l'eau. Aller dans l'onglet Data , puis dans la fen\u00eatre Actions pour activer la manette : Joystick > Enable . On sauvegarde le transect. On envoie le transect sur la planche en cliquant sur Write. Commandes de la manette (Xbox) Joystick gauche (Haut/Bas) : Avancer / Reculer. Note : \u00c9viter de reculer, car l'arri\u00e8re de la planche a tendance \u00e0 s'enfoncer dans l'eau. Joystick droit (Gauche/Droite) : Direction (Virages). Bouton X : D\u00e9sarmer les moteurs. Bouton B : Armer les moteurs. \u26a0\ufe0f Attention : N'armer que si la zone est d\u00e9gag\u00e9e. En cas d'urgence, d\u00e9sarmer imm\u00e9diatement. Bouton Y : Mode Manual (Pilotage manuel). Bouton A : Mode Auto (La planche suit les waypoints enregistr\u00e9s). On ouvre l'onglet Joystick. On active la manette. Suivi de mission et fin de session Une fois la planche lanc\u00e9e, surveiller les indicateurs dans l'onglet Quick : V\u00e9rifier que l' \u00e9chosondeur renvoie une valeur de profondeur. V\u00e9rifier que le GPS2 affiche un statut 3D Fix (ou mieux, RTK Fixed). On peut surveiller les valeurs de la planche. Ici on est \u00e0 terre et dans un bureau donc le GPS2 n'est pas en 3DFix et l'echosondeur indique 0.12m. Important : \u00c0 la fin de chaque mission, il est imp\u00e9ratif d'\u00e9teindre, puis de rallumer la planche. Cela permet de s\u00e9parer correctement les fichiers de log. Dans le cas contraire, les donn\u00e9es de deux missions successives seront enregistr\u00e9es dans le m\u00eame fichier, compliquant le post-traitement. Entretien de la planche Graisser le joint d'\u00e9tanch\u00e9it\u00e9 de la Pellicase (utiliser de la graisse silicone si n\u00e9cessaire). Rin\u00e7age syst\u00e9matique : Apr\u00e8s chaque sortie, il est imp\u00e9ratif de rincer abondamment \u00e0 l'eau douce tout le mat\u00e9riel ayant \u00e9t\u00e9 en contact avec l'eau de mer (coque, moteurs, capteurs, visserie). FAQ Est-ce que le REACH RS2/3 communique avec la planche ? Non, nous ne travaillons pas en RTK (Real Time Kinematic). Le REACH RS2/3 est connect\u00e9 au r\u00e9seau Centipede via le partage de connexion et re\u00e7oit des corrections en temps r\u00e9el. La planche, quant \u00e0 elle, n'est connect\u00e9e ni \u00e0 la \u00ab bouboule \u00bb ni \u00e0 Internet pour recevoir des trames de correction. Comment sont synchronis\u00e9s la cam\u00e9ra et le GPS ? Lors du d\u00e9marrage de la session, on filme une application d'horloge atomique sur t\u00e9l\u00e9phone. Lors de l'extraction des images de la vid\u00e9o, on note l'heure pr\u00e9cise affich\u00e9e sur l'image. Ce timestamp (horodatage) servira ensuite \u00e0 synchroniser temporellement les clich\u00e9s avec les donn\u00e9es du log GPS. Pourquoi faire du PPK au lieu du RTK ? Le RTK serait possible, mais comme nous n'avons pas besoin d'une bathym\u00e9trie en temps r\u00e9el et que nous devons de toute fa\u00e7on recalculer la position du GPS pour g\u00e9or\u00e9f\u00e9rencer les images avec pr\u00e9cision, le PPK (Post-Processed Kinematic) est privil\u00e9gi\u00e9. C'est plus simple logistiquement sur le terrain. Que se passe-t-il si l'on perd la communication entre l'ordinateur et la planche ? Rien de grave : la communication peut \u00eatre interrompue sans souci. La planche est autonome. Selon sa configuration, elle revient \u00e0 son point de d\u00e9part ( RTL ) une fois la mission termin\u00e9e ou reste en attente sur son dernier waypoint. Il est m\u00eame possible d'utiliser 2 planches sur le m\u00eame ordinateur. Comment r\u00e9gler la fr\u00e9quence entre la planche et le bo\u00eetier ? On utilise le logiciel RFDTools (disponible sur le site de RFDesign ). Connexion : Brancher le bo\u00eetier de t\u00e9l\u00e9m\u00e9trie \u00e0 l'ordinateur, s\u00e9lectionner le bon port COM et cliquer sur Connect . Lecture des param\u00e8tres : Cliquer sur Load Settings pour voir la configuration actuelle de la radio locale. Synchronisation : Pour que la planche et le bo\u00eetier communiquent, les param\u00e8tres suivants doivent \u00eatre identiques sur les deux radios : Net ID : L'identifiant du r\u00e9seau (ex: 25). Air Speed : La vitesse de transmission. Min/Max Frequency : La plage de fr\u00e9quences autoris\u00e9e. Validation : Une fois les modifications effectu\u00e9es, cliquer sur Save Settings . Note : Il est conseill\u00e9 de ne pas modifier les fr\u00e9quences d'usine sans une connaissance pr\u00e9cise de la r\u00e9glementation locale sur les bandes de fr\u00e9quences (868 MHz en Europe / 915 MHz aux USA). Exemple d'une connexion avec la planche jaune. Comment r\u00e9gler la vitesse de la planche ? On peut la r\u00e9gler \u00e0 0.5m/s si on est dans le lagon pour faire de la photogramm\u00e9trie mais sinon, il faut la laisser \u00e0 1m/s en pente externe. Param\u00e8tres de la planche pour avancer \u00e0 1 m/s. Param\u00e8tres de la planche pour avancer \u00e0 0.5 m/s.","title":"Guide de terrain"},{"location":"plancha/before-session/#session-dacquisition-plancha","text":"","title":"Session d'acquisition Plancha"},{"location":"plancha/before-session/#conditions-meteo-et-heure-dacquisition","text":"Une session d'acquisition se r\u00e9alise le matin, id\u00e9alement au lever du soleil pour \u00e9viter les caustiques au fond de l'eau.","title":"Conditions m\u00e9t\u00e9o et heure d'acquisition"},{"location":"plancha/before-session/#preparation-du-materiel-dacquisition-pour-une-session","text":"Ordinateur de terrain avec Mission Planner. Bo\u00eetier de t\u00e9l\u00e9m\u00e9trie pour \u00e9tablir la communication. Manette pour piloter la planche. 2 batteries 4S 10A 1C (permettent de r\u00e9aliser deux sessions). 1 GoPro avec ses batteries : pr\u00e9voir les batteries (1 par session), le caisson \u00e9tanche et les outils de fixation. Un Reach RS2/RS3 (\u00ab bouboule \u00bb) qui fera office de base GPS, avec son tr\u00e9pied et un t\u00e9l\u00e9phone pour le partage de connexion. Mat\u00e9riel. Les gopros doivent \u00eatre configur\u00e9s comme ceci : Configuration GoPro partie 1. Configuration GoPro partie 2. Configuration GoPro partie 3.","title":"Pr\u00e9paration du mat\u00e9riel d'acquisition pour une session"},{"location":"plancha/before-session/#procedure-sur-la-plage","text":"","title":"Proc\u00e9dure sur la plage"},{"location":"plancha/before-session/#preparation-du-reach-rs23","text":"Pour plus d'informations, voir le tutoriel d'Emlid . D\u00e9ployer le tr\u00e9pied dans un espace d\u00e9gag\u00e9 (sans arbres ni b\u00e2timents ). Activer le partage de connexion sur son t\u00e9l\u00e9phone. Allumer le Reach et attendre que les LEDs deviennent bleues . V\u00e9rifier que la base est en FIX dans l'application Emlid Flow. Il faut la param\u00e9trer pour qu'elle se connecte \u00e0 une base Centipede : Lien tutoriel Centipede . Liste des serveurs ntrip. Setup de la bouboule sur la plage.","title":"Pr\u00e9paration du REACH RS2/3"},{"location":"plancha/before-session/#preparation-de-la-planche","text":"V\u00e9rifier la tension des batteries au multim\u00e8tre et s'assurer que l'\u00e9cart entre elles ne d\u00e9passe pas 0,1 V . Si la diff\u00e9rence est sup\u00e9rieure, ne pas les utiliser sous peine de les endommager. Installer les batteries dans la planche et l'allumer. \u26a0\ufe0f Attention : Ouvrir le caisson de la planche doucement, car l'appel d'air peut aspirer des gouttes d'eau \u00e0 l'int\u00e9rieur. Installer la batterie dans la GoPro et placer celle-ci dans son caisson. \u26a0\ufe0f Important : Nettoyer soigneusement le joint du caisson s'il pr\u00e9sente des grains de sable. Juste avant la mise \u00e0 l'eau , d\u00e9marrer l'enregistrement de la GoPro et filmer l'heure sur une application d'horloge atomique (pour la synchronisation). Exemple : Atomic Clock . Optimiser la communication avec le PC en redressant bien les antennes. Positionnement des batteries. Fixation de la cam\u00e9ra. \u26a0\ufe0f Elle doit \u00eatre allum\u00e9e \u26a0\ufe0f Synchronisation de l'heure. Antennes.","title":"Pr\u00e9paration de la planche"},{"location":"plancha/before-session/#preparation-de-lordinateur","text":"Setup du mat\u00e9riel.","title":"Pr\u00e9paration de l'ordinateur"},{"location":"plancha/before-session/#configuration-logicielle-et-lancement","text":"Brancher le bo\u00eetier de t\u00e9l\u00e9m\u00e9trie et la manette Xbox \u00e0 l'ordinateur. Lancer l'application Mission Planner . Se connecter \u00e0 la planche avec les param\u00e8tres suivants : Le port COM change \u00e0 chaque fois mais souvent c'est celui en dessous des 3 Communications. Connexion en cours, chargement des param\u00e8tres de la planche. Une fois connect\u00e9e, la planche doit appara\u00eetre sur la carte. Apparition de la planche sur le carte. Ici \u00e0 Ifremer au Port. D\u00e9finir le \"Home Point\" sur la position actuelle de la planche pour \u00e9viter tout incident (RTL - Return to Launch).","title":"Configuration logicielle et lancement"},{"location":"plancha/before-session/#creation-du-plan-de-vol-mission","text":"Dans l'onglet Plan , dessiner un polygone : faire un clic droit sur la carte pour acc\u00e9der au menu et placer 4 points pour former un rectangle. Une fois la forme satisfaisante, faire un clic droit -> Auto-WP -> Survey (Grid) . Une fen\u00eatre contextuelle s'ouvre affichant le trac\u00e9 (transect). V\u00e9rifications : Vitesse : V\u00e9rifier que la vitesse est bien r\u00e9gl\u00e9e sur 1 m/s (panneau de droite). Temps de mission : V\u00e9rifier la dur\u00e9e estim\u00e9e en bas de l'\u00e9cran. Elle doit \u00eatre comprise entre 50 min et 1h15 . Au-del\u00e0, l'autonomie de la GoPro sera insuffisante. Home Point : Si le temps estim\u00e9 est anormalement \u00e9lev\u00e9, v\u00e9rifier que le point H (Home) est bien situ\u00e9 \u00e0 c\u00f4t\u00e9 de la planche. Type de trac\u00e9 : Dans le deuxi\u00e8me onglet du menu, vous pouvez changer le type de transect (Cross Grid ou Linear). Si tout est correct, revenir sur le premier onglet et cliquer sur Accept (ou Valider). Un rectangle jaune appara\u00eet sur la carte. On place le Homepoint \u00e0 c\u00f4t\u00e9 de la session que l'on va dessiner. Clique droit sur la carte pour afficher la fen\u00eatre. Dessinez un polygon. Clique droit sur la carte pour afficher la fen\u00eatre. On peut voir la vitesse de la planche et le temps d'acquisition. On peut r\u00e9gler la forme du transect et si c'est bon on valide. On obtient un transect.","title":"Cr\u00e9ation du plan de vol (Mission)"},{"location":"plancha/before-session/#enregistrement-et-transfert","text":"Sauvegarder localement : Cliquer sur Save pour enregistrer le fichier de waypoints par s\u00e9curit\u00e9 (Ex: 20251110_REU-ST-LEU_ASV-1_01.waypoints ). Envoyer \u00e0 la planche : Cliquer sur Write pour transf\u00e9rer les donn\u00e9es vers la m\u00e9moire de la planche. Une fois le transfert termin\u00e9, la planche peut \u00eatre mise \u00e0 l'eau. Aller dans l'onglet Data , puis dans la fen\u00eatre Actions pour activer la manette : Joystick > Enable . On sauvegarde le transect. On envoie le transect sur la planche en cliquant sur Write.","title":"Enregistrement et transfert"},{"location":"plancha/before-session/#commandes-de-la-manette-xbox","text":"Joystick gauche (Haut/Bas) : Avancer / Reculer. Note : \u00c9viter de reculer, car l'arri\u00e8re de la planche a tendance \u00e0 s'enfoncer dans l'eau. Joystick droit (Gauche/Droite) : Direction (Virages). Bouton X : D\u00e9sarmer les moteurs. Bouton B : Armer les moteurs. \u26a0\ufe0f Attention : N'armer que si la zone est d\u00e9gag\u00e9e. En cas d'urgence, d\u00e9sarmer imm\u00e9diatement. Bouton Y : Mode Manual (Pilotage manuel). Bouton A : Mode Auto (La planche suit les waypoints enregistr\u00e9s). On ouvre l'onglet Joystick. On active la manette.","title":"Commandes de la manette (Xbox)"},{"location":"plancha/before-session/#suivi-de-mission-et-fin-de-session","text":"Une fois la planche lanc\u00e9e, surveiller les indicateurs dans l'onglet Quick : V\u00e9rifier que l' \u00e9chosondeur renvoie une valeur de profondeur. V\u00e9rifier que le GPS2 affiche un statut 3D Fix (ou mieux, RTK Fixed). On peut surveiller les valeurs de la planche. Ici on est \u00e0 terre et dans un bureau donc le GPS2 n'est pas en 3DFix et l'echosondeur indique 0.12m. Important : \u00c0 la fin de chaque mission, il est imp\u00e9ratif d'\u00e9teindre, puis de rallumer la planche. Cela permet de s\u00e9parer correctement les fichiers de log. Dans le cas contraire, les donn\u00e9es de deux missions successives seront enregistr\u00e9es dans le m\u00eame fichier, compliquant le post-traitement.","title":"Suivi de mission et fin de session"},{"location":"plancha/before-session/#entretien-de-la-planche","text":"Graisser le joint d'\u00e9tanch\u00e9it\u00e9 de la Pellicase (utiliser de la graisse silicone si n\u00e9cessaire). Rin\u00e7age syst\u00e9matique : Apr\u00e8s chaque sortie, il est imp\u00e9ratif de rincer abondamment \u00e0 l'eau douce tout le mat\u00e9riel ayant \u00e9t\u00e9 en contact avec l'eau de mer (coque, moteurs, capteurs, visserie).","title":"Entretien de la planche"},{"location":"plancha/before-session/#faq","text":"Est-ce que le REACH RS2/3 communique avec la planche ? Non, nous ne travaillons pas en RTK (Real Time Kinematic). Le REACH RS2/3 est connect\u00e9 au r\u00e9seau Centipede via le partage de connexion et re\u00e7oit des corrections en temps r\u00e9el. La planche, quant \u00e0 elle, n'est connect\u00e9e ni \u00e0 la \u00ab bouboule \u00bb ni \u00e0 Internet pour recevoir des trames de correction. Comment sont synchronis\u00e9s la cam\u00e9ra et le GPS ? Lors du d\u00e9marrage de la session, on filme une application d'horloge atomique sur t\u00e9l\u00e9phone. Lors de l'extraction des images de la vid\u00e9o, on note l'heure pr\u00e9cise affich\u00e9e sur l'image. Ce timestamp (horodatage) servira ensuite \u00e0 synchroniser temporellement les clich\u00e9s avec les donn\u00e9es du log GPS. Pourquoi faire du PPK au lieu du RTK ? Le RTK serait possible, mais comme nous n'avons pas besoin d'une bathym\u00e9trie en temps r\u00e9el et que nous devons de toute fa\u00e7on recalculer la position du GPS pour g\u00e9or\u00e9f\u00e9rencer les images avec pr\u00e9cision, le PPK (Post-Processed Kinematic) est privil\u00e9gi\u00e9. C'est plus simple logistiquement sur le terrain. Que se passe-t-il si l'on perd la communication entre l'ordinateur et la planche ? Rien de grave : la communication peut \u00eatre interrompue sans souci. La planche est autonome. Selon sa configuration, elle revient \u00e0 son point de d\u00e9part ( RTL ) une fois la mission termin\u00e9e ou reste en attente sur son dernier waypoint. Il est m\u00eame possible d'utiliser 2 planches sur le m\u00eame ordinateur. Comment r\u00e9gler la fr\u00e9quence entre la planche et le bo\u00eetier ? On utilise le logiciel RFDTools (disponible sur le site de RFDesign ). Connexion : Brancher le bo\u00eetier de t\u00e9l\u00e9m\u00e9trie \u00e0 l'ordinateur, s\u00e9lectionner le bon port COM et cliquer sur Connect . Lecture des param\u00e8tres : Cliquer sur Load Settings pour voir la configuration actuelle de la radio locale. Synchronisation : Pour que la planche et le bo\u00eetier communiquent, les param\u00e8tres suivants doivent \u00eatre identiques sur les deux radios : Net ID : L'identifiant du r\u00e9seau (ex: 25). Air Speed : La vitesse de transmission. Min/Max Frequency : La plage de fr\u00e9quences autoris\u00e9e. Validation : Une fois les modifications effectu\u00e9es, cliquer sur Save Settings . Note : Il est conseill\u00e9 de ne pas modifier les fr\u00e9quences d'usine sans une connaissance pr\u00e9cise de la r\u00e9glementation locale sur les bandes de fr\u00e9quences (868 MHz en Europe / 915 MHz aux USA). Exemple d'une connexion avec la planche jaune. Comment r\u00e9gler la vitesse de la planche ? On peut la r\u00e9gler \u00e0 0.5m/s si on est dans le lagon pour faire de la photogramm\u00e9trie mais sinon, il faut la laisser \u00e0 1m/s en pente externe. Param\u00e8tres de la planche pour avancer \u00e0 1 m/s. Param\u00e8tres de la planche pour avancer \u00e0 0.5 m/s.","title":"FAQ"},{"location":"tutoriels/acquisition-gcp/","text":"Mode d'emploi pour faire l'acquisition de GCP fa\u00e7on ifremer la r\u00e9union. Un GCP (Ground Control Point) est un point dont la position GPS est connue avec pr\u00e9cision. Ces points servent \u00e0 recadrer les orthophotos issues de relev\u00e9s r\u00e9alis\u00e9s avec des planches ou des drones. Dans des conditions id\u00e9ales, on place un damier sous l\u2019eau au moment de l\u2019acquisition, et on en rel\u00e8ve pr\u00e9cis\u00e9ment la position. Dans notre cas, les GCPs sont d\u00e9finis \u00e0 partir de rep\u00e8res fixes visibles, comme un poteau \u00e9lectrique, un corail caract\u00e9ristique ou toute autre forme reconnaissable facilement sur les images. Pour r\u00e9aliser cette mission, il y a quelques \u00e9tapes \u00e0 pr\u00e9parer. Pr\u00e9paration des points d\u2019acquisition Commencez par rep\u00e9rer des points clairement visibles et stables dans le temps. Pour cela, utilisez une orthophoto d\u00e9j\u00e0 produite. Suivez le tutoriel pr\u00e9sent dans le README du projet tms-server pour afficher ces orthophotos dans QGIS. Cr\u00e9ez une nouvelle couche de points dans QGIS. Voici un exemple de cr\u00e9ation de couche : Ajoutez ensuite des points sur les \u00e9l\u00e9ments facilement reconnaissables : corail atypique, \u00e9pave, structure anthropique, etc. Important : N\u2019oubliez pas de nommer chaque point avec un label clair. Cela facilitera l\u2019identification sur le terrain. Une fois tous les points plac\u00e9s, exportez la couche au format GPX. Veillez \u00e0 cocher l\u2019option GPS_USE_EXTENSION \u00e0 YES . Afin de faciliter le rep\u00e9rage sur le terrain, r\u00e9alisez des captures d\u2019\u00e9cran \u00e0 plusieurs niveaux de zoom (de large \u00e0 rapproch\u00e9) pour chaque point. Ces images seront regroup\u00e9es dans un document, \u00e0 imprimer et \u00e0 glisser dans un porte-vues pour le nageur. VOici un exemple de document : Exemple de zoom sur les images Setup de l'ordinateur Il est n\u00e9cessaire d'avoir un ordinateur avec un GPS et les points de mesures \u00e0 l'int\u00e9rieur pour facilement se rendre sur la zone. Cela permet de la d\u00e9limiter facilement. Un ordinateur de terrain un reach M2 avec une antenne et un cable USB pour le connecter \u00e0 l'ordinateur Le logiciel OpenCPN Branchez le GPS \u00e0 l\u2019ordinateur, puis configurez le port s\u00e9rie et le d\u00e9bit comme montr\u00e9 ci-dessous : Importez votre fichier GPX pour afficher les points d\u2019int\u00e9r\u00eat dans le logiciel. V\u00e9rifiez que chaque point est bien nomm\u00e9. Setup de la base. La base GPS est mont\u00e9e sur un tube en PVC. Il est important de mesurer la hauteur du tube pour la renseigner dans l'application (important pour la pr\u00e9cision altim\u00e9trique). Vissez la base sur son support comme illustr\u00e9 ci-dessous : Pour r\u00e9aliser un survey, suivez le tutoriel","title":"Acquisition GCP"},{"location":"tutoriels/acquisition-gcp/#mode-demploi-pour-faire-lacquisition-de-gcp-facon-ifremer-la-reunion","text":"Un GCP (Ground Control Point) est un point dont la position GPS est connue avec pr\u00e9cision. Ces points servent \u00e0 recadrer les orthophotos issues de relev\u00e9s r\u00e9alis\u00e9s avec des planches ou des drones. Dans des conditions id\u00e9ales, on place un damier sous l\u2019eau au moment de l\u2019acquisition, et on en rel\u00e8ve pr\u00e9cis\u00e9ment la position. Dans notre cas, les GCPs sont d\u00e9finis \u00e0 partir de rep\u00e8res fixes visibles, comme un poteau \u00e9lectrique, un corail caract\u00e9ristique ou toute autre forme reconnaissable facilement sur les images. Pour r\u00e9aliser cette mission, il y a quelques \u00e9tapes \u00e0 pr\u00e9parer.","title":"Mode d'emploi pour faire l'acquisition de GCP fa\u00e7on ifremer la r\u00e9union."},{"location":"tutoriels/acquisition-gcp/#preparation-des-points-dacquisition","text":"Commencez par rep\u00e9rer des points clairement visibles et stables dans le temps. Pour cela, utilisez une orthophoto d\u00e9j\u00e0 produite. Suivez le tutoriel pr\u00e9sent dans le README du projet tms-server pour afficher ces orthophotos dans QGIS. Cr\u00e9ez une nouvelle couche de points dans QGIS. Voici un exemple de cr\u00e9ation de couche : Ajoutez ensuite des points sur les \u00e9l\u00e9ments facilement reconnaissables : corail atypique, \u00e9pave, structure anthropique, etc. Important : N\u2019oubliez pas de nommer chaque point avec un label clair. Cela facilitera l\u2019identification sur le terrain. Une fois tous les points plac\u00e9s, exportez la couche au format GPX. Veillez \u00e0 cocher l\u2019option GPS_USE_EXTENSION \u00e0 YES . Afin de faciliter le rep\u00e9rage sur le terrain, r\u00e9alisez des captures d\u2019\u00e9cran \u00e0 plusieurs niveaux de zoom (de large \u00e0 rapproch\u00e9) pour chaque point. Ces images seront regroup\u00e9es dans un document, \u00e0 imprimer et \u00e0 glisser dans un porte-vues pour le nageur. VOici un exemple de document : Exemple de zoom sur les images","title":"Pr\u00e9paration des points d\u2019acquisition"},{"location":"tutoriels/acquisition-gcp/#setup-de-lordinateur","text":"Il est n\u00e9cessaire d'avoir un ordinateur avec un GPS et les points de mesures \u00e0 l'int\u00e9rieur pour facilement se rendre sur la zone. Cela permet de la d\u00e9limiter facilement. Un ordinateur de terrain un reach M2 avec une antenne et un cable USB pour le connecter \u00e0 l'ordinateur Le logiciel OpenCPN Branchez le GPS \u00e0 l\u2019ordinateur, puis configurez le port s\u00e9rie et le d\u00e9bit comme montr\u00e9 ci-dessous : Importez votre fichier GPX pour afficher les points d\u2019int\u00e9r\u00eat dans le logiciel. V\u00e9rifiez que chaque point est bien nomm\u00e9.","title":"Setup de l'ordinateur"},{"location":"tutoriels/acquisition-gcp/#setup-de-la-base","text":"La base GPS est mont\u00e9e sur un tube en PVC. Il est important de mesurer la hauteur du tube pour la renseigner dans l'application (important pour la pr\u00e9cision altim\u00e9trique). Vissez la base sur son support comme illustr\u00e9 ci-dessous : Pour r\u00e9aliser un survey, suivez le tutoriel","title":"Setup de la base."},{"location":"tutoriels/battery/","text":"\ud83d\udd0b Guide Batteries LiPo et LiHV Ce guide couvre la signification des d\u00e9signations de batterie, les diff\u00e9rences entre LiPo et LiHV, ainsi que les proc\u00e9dures de charge et de s\u00e9curit\u00e9 essentielles. 1. Comprendre la tension (4S et 15,2 V) La d\u00e9signation 4S signifie que 4 cellules sont mont\u00e9es en s\u00e9rie. Type de Cellule Tension Nominale (par cellule) Tension Max (par cellule) Tension Nominale 4S Tension Max 4S LiPo 3,7 V 4,20 V 14,8 V (4 3,7 V) 16,8 V LiHV (High Voltage) 3,8 V 4,35 V 15,2 V (4 3,8 V) 17,4 V \ud83d\udc49 Conclusion : Une batterie marqu\u00e9e 15,2 V est syst\u00e9matiquement une LiHV . 2. Diff\u00e9rences cl\u00e9s et pr\u00e9cautions de charge Caract\u00e9ristique LiPo LiHV Chargeur Mode LiPo Mode LiHV obligatoire Tension Max 4,20 V/cellule 4,35 V/cellule Avantages Meilleure long\u00e9vit\u00e9, tension plus stable Boost initial, capacit\u00e9 l\u00e9g\u00e8rement sup\u00e9rieure Inconv\u00e9nients Standard Dur\u00e9e de vie r\u00e9duite si charg\u00e9e syst\u00e9matiquement \u00e0 4,35 V \u26a0\ufe0f Avertissement de charge : NE JAMAIS charger une LiPo en mode LiHV (Risque d'incendie/explosion). NE JAMAIS charger une LiHV en mode LiPo (Charge incompl\u00e8te \u00e0 seulement 16,8 V). 3. \u00c9l\u00e9ments de la Batterie (Exemple 4S) Chaque batterie 4S poss\u00e8de deux connexions distinctes, toutes deux n\u00e9cessaires \u00e0 la charge : Connexion R\u00f4le Caract\u00e9ristiques (Ex. 4S) Principal (Ex: XT60, XT90) Passage de la puissance (Charge/D\u00e9charge) 2 fils : + et \u2212 \u00c9quilibrage (JST-XH) Surveillance de la tension de chaque cellule 5 fils (4 cellules + 1 fil commun) Figure 1: Le connecteur XT60, utilis\u00e9 pour la puissance. Figure 2: Le connecteur d'\u00e9quilibrage **JST-XH 5 broches** pour une batterie 4S. 4. Proc\u00e9dure de Charge S\u00e9curitaire Le processus doit toujours se faire sous surveillance et sur une surface non inflammable (id\u00e9alement dans un sac LiPo ignifug\u00e9). \u2699\ufe0f R\u00e9glages du Chargeur (pour une LiHV 4S) Type de batterie : LiHV Nombre de cellules : 4S Tension maximale : 4,35 V / cellule (17,4 V total) Courant de charge : R\u00e8gle standard : 1C (Ex: 5000 mAh 5,0 A ) Astuce long\u00e9vit\u00e9 : Charger \u00e0 0,5C (Ex: 5000 mAh 2,5 A ) \ud83d\udd0c \u00c9tapes de Connexion Connecter le c\u00e2ble principal (puissance). Connecter le c\u00e2ble d'\u00e9quilibrage JST-XH sur l'entr\u00e9e 4S du chargeur. \ud83d\udccc Ne jamais forcer les connecteurs. V\u00e9rifier que le chargeur d\u00e9tecte bien 4 cellules . Lancer la charge et rester \u00e0 proximit\u00e9. Fin de Charge Une LiHV 4S pleine doit atteindre 17,4 V total. L'\u00e9cart entre les cellules doit \u00eatre faible (0.1 V). D\u00e9brancher toujours le c\u00e2ble principal en premier. 5. Stockage et D\u00e9charge Stockage (Mode STORAGE) Pour maximiser la dur\u00e9e de vie, les LiPo et LiHV doivent \u00eatre stock\u00e9es dans le mode STORAGE du chargeur, \u00e0 une tension de : 3,80 V \u00e0 3,85 V par cellule Courbe de D\u00e9charge (LiHV vs LiPo) LiPo : Tension max 4,20 V. Plateau de tension plus long et stable. LiHV : Tension max 4,35 V. Subit une chute de tension rapide en d\u00e9but de d\u00e9charge. Pourquoi cette chute rapide ? La zone entre 4,20 V et 4,35 V n'est pas une zone de fonctionnement stable. D\u00e8s qu'un courant est demand\u00e9, la tension chute naturellement vers la zone stable de 4,1\u20134,2 V. Une chute rapide apr\u00e8s 30 secondes d'utilisation NE signifie PAS que la batterie est vide. 6. S\u00e9curit\u00e9 et Erreurs \u00e0 \u00c9viter \u00c0 Faire (S\u00e9curit\u00e9) \u00c0 \u00c9viter (Erreurs Fr\u00e9quentes) \u2705 Rester \u00e0 proximit\u00e9 pendant la charge. \u274c Oublier le c\u00e2ble d'\u00e9quilibrage. \u2705 Charger sur une surface non inflammable. \u274c Charger sur un courant excessif. \u2705 Utiliser le mode STORAGE pour le rangement. \u274c Charger une LiHV en mode LiPo. \u274c Ne jamais charger une batterie gonfl\u00e9e. \u274c Laisser une charge sans surveillance. Liens Figure 3: Gens Ace Chargeur de Batterie Imars Dual Figure 3: Gens ace Advanced G-Tech 10000mAh","title":"Gestion des batteries"},{"location":"tutoriels/battery/#guide-batteries-lipo-et-lihv","text":"Ce guide couvre la signification des d\u00e9signations de batterie, les diff\u00e9rences entre LiPo et LiHV, ainsi que les proc\u00e9dures de charge et de s\u00e9curit\u00e9 essentielles.","title":"\ud83d\udd0b Guide Batteries LiPo et LiHV"},{"location":"tutoriels/battery/#1-comprendre-la-tension-4s-et-152-v","text":"La d\u00e9signation 4S signifie que 4 cellules sont mont\u00e9es en s\u00e9rie. Type de Cellule Tension Nominale (par cellule) Tension Max (par cellule) Tension Nominale 4S Tension Max 4S LiPo 3,7 V 4,20 V 14,8 V (4 3,7 V) 16,8 V LiHV (High Voltage) 3,8 V 4,35 V 15,2 V (4 3,8 V) 17,4 V \ud83d\udc49 Conclusion : Une batterie marqu\u00e9e 15,2 V est syst\u00e9matiquement une LiHV .","title":"1. Comprendre la tension (4S et 15,2 V)"},{"location":"tutoriels/battery/#2-differences-cles-et-precautions-de-charge","text":"Caract\u00e9ristique LiPo LiHV Chargeur Mode LiPo Mode LiHV obligatoire Tension Max 4,20 V/cellule 4,35 V/cellule Avantages Meilleure long\u00e9vit\u00e9, tension plus stable Boost initial, capacit\u00e9 l\u00e9g\u00e8rement sup\u00e9rieure Inconv\u00e9nients Standard Dur\u00e9e de vie r\u00e9duite si charg\u00e9e syst\u00e9matiquement \u00e0 4,35 V \u26a0\ufe0f Avertissement de charge : NE JAMAIS charger une LiPo en mode LiHV (Risque d'incendie/explosion). NE JAMAIS charger une LiHV en mode LiPo (Charge incompl\u00e8te \u00e0 seulement 16,8 V).","title":"2. Diff\u00e9rences cl\u00e9s et pr\u00e9cautions de charge"},{"location":"tutoriels/battery/#3-elements-de-la-batterie-exemple-4s","text":"Chaque batterie 4S poss\u00e8de deux connexions distinctes, toutes deux n\u00e9cessaires \u00e0 la charge : Connexion R\u00f4le Caract\u00e9ristiques (Ex. 4S) Principal (Ex: XT60, XT90) Passage de la puissance (Charge/D\u00e9charge) 2 fils : + et \u2212 \u00c9quilibrage (JST-XH) Surveillance de la tension de chaque cellule 5 fils (4 cellules + 1 fil commun) Figure 1: Le connecteur XT60, utilis\u00e9 pour la puissance. Figure 2: Le connecteur d'\u00e9quilibrage **JST-XH 5 broches** pour une batterie 4S.","title":"3. \u00c9l\u00e9ments de la Batterie (Exemple 4S)"},{"location":"tutoriels/battery/#4-procedure-de-charge-securitaire","text":"Le processus doit toujours se faire sous surveillance et sur une surface non inflammable (id\u00e9alement dans un sac LiPo ignifug\u00e9).","title":"4. Proc\u00e9dure de Charge S\u00e9curitaire"},{"location":"tutoriels/battery/#reglages-du-chargeur-pour-une-lihv-4s","text":"Type de batterie : LiHV Nombre de cellules : 4S Tension maximale : 4,35 V / cellule (17,4 V total) Courant de charge : R\u00e8gle standard : 1C (Ex: 5000 mAh 5,0 A ) Astuce long\u00e9vit\u00e9 : Charger \u00e0 0,5C (Ex: 5000 mAh 2,5 A )","title":"\u2699\ufe0f R\u00e9glages du Chargeur (pour une LiHV 4S)"},{"location":"tutoriels/battery/#etapes-de-connexion","text":"Connecter le c\u00e2ble principal (puissance). Connecter le c\u00e2ble d'\u00e9quilibrage JST-XH sur l'entr\u00e9e 4S du chargeur. \ud83d\udccc Ne jamais forcer les connecteurs. V\u00e9rifier que le chargeur d\u00e9tecte bien 4 cellules . Lancer la charge et rester \u00e0 proximit\u00e9.","title":"\ud83d\udd0c \u00c9tapes de Connexion"},{"location":"tutoriels/battery/#fin-de-charge","text":"Une LiHV 4S pleine doit atteindre 17,4 V total. L'\u00e9cart entre les cellules doit \u00eatre faible (0.1 V). D\u00e9brancher toujours le c\u00e2ble principal en premier.","title":"Fin de Charge"},{"location":"tutoriels/battery/#5-stockage-et-decharge","text":"","title":"5. Stockage et D\u00e9charge"},{"location":"tutoriels/battery/#stockage-mode-storage","text":"Pour maximiser la dur\u00e9e de vie, les LiPo et LiHV doivent \u00eatre stock\u00e9es dans le mode STORAGE du chargeur, \u00e0 une tension de : 3,80 V \u00e0 3,85 V par cellule","title":"Stockage (Mode STORAGE)"},{"location":"tutoriels/battery/#courbe-de-decharge-lihv-vs-lipo","text":"LiPo : Tension max 4,20 V. Plateau de tension plus long et stable. LiHV : Tension max 4,35 V. Subit une chute de tension rapide en d\u00e9but de d\u00e9charge. Pourquoi cette chute rapide ? La zone entre 4,20 V et 4,35 V n'est pas une zone de fonctionnement stable. D\u00e8s qu'un courant est demand\u00e9, la tension chute naturellement vers la zone stable de 4,1\u20134,2 V. Une chute rapide apr\u00e8s 30 secondes d'utilisation NE signifie PAS que la batterie est vide.","title":"Courbe de D\u00e9charge (LiHV vs LiPo)"},{"location":"tutoriels/battery/#6-securite-et-erreurs-a-eviter","text":"\u00c0 Faire (S\u00e9curit\u00e9) \u00c0 \u00c9viter (Erreurs Fr\u00e9quentes) \u2705 Rester \u00e0 proximit\u00e9 pendant la charge. \u274c Oublier le c\u00e2ble d'\u00e9quilibrage. \u2705 Charger sur une surface non inflammable. \u274c Charger sur un courant excessif. \u2705 Utiliser le mode STORAGE pour le rangement. \u274c Charger une LiHV en mode LiPo. \u274c Ne jamais charger une batterie gonfl\u00e9e. \u274c Laisser une charge sans surveillance.","title":"6. S\u00e9curit\u00e9 et Erreurs \u00e0 \u00c9viter"},{"location":"tutoriels/battery/#liens","text":"Figure 3: Gens Ace Chargeur de Batterie Imars Dual Figure 3: Gens ace Advanced G-Tech 10000mAh","title":"Liens"},{"location":"tutoriels/cog-server/","text":"Int\u00e9gration des donn\u00e9es rasters dans Seatizen Monitoring L'int\u00e9gration des donn\u00e9es raster (Orthophotos, Bathym\u00e9trie, Pr\u00e9dictions, etc.) \u00e0 la plateforme Seatizen Monitoring n\u00e9cessite une optimisation pr\u00e9alable en raison de la taille importante des fichiers. Ces donn\u00e9es sont servies par un serveur d\u00e9di\u00e9, distinct du site web principal. 1. Le d\u00e9p\u00f4t cog-server Tout le processus d'optimisation, de stockage et de service des rasters est g\u00e9r\u00e9 par le d\u00e9p\u00f4t cog-server : https://github.com/SeatizenDOI/cog-server . Ce d\u00e9p\u00f4t contient deux composantes essentielles : Composante R\u00f4le Le dossier tools Contient les scripts Python pour convertir vos rasters bruts en format Cloud Optimized Geotiff (COG) . Le serveur L'application web qui sert les rasters COG optimis\u00e9s, permettant une visualisation rapide sur la carte. 2. Pr\u00e9paration et organisation des fichiers rasters \u2699\ufe0f \u00c9tape 1 : Optimisation des rasters Avant le d\u00e9ploiement, vous devez traiter vos fichiers pour les rendre compatibles avec le serveur. Utilisez les scripts disponibles dans le dossier cog-server/tools/ . Chaque sous-dossier ( bathy , ortho , pred_drone , etc.) contient un README.md expliquant les \u00e9tapes sp\u00e9cifiques pour optimiser les rasters de ce type. Architecture du dossier tools \ud83d\udcc2 \u00c9tape 2 : Structure du dossier de donn\u00e9es ( data ) Une fois optimis\u00e9s (ils devraient se terminer par _cog.tif ), les fichiers doivent \u00eatre stock\u00e9s dans un dossier data en respectant la hi\u00e9rarchie suivante (par type de donn\u00e9es et par ann\u00e9e) : . \u251c\u2500\u2500 bathy \u2502 \u251c\u2500\u2500 2022 \u2502 \u2502 \u251c\u2500\u2500 bathy_group_9_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 bathy_group_9_depth_cog.tif \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u251c\u2500\u2500 bathy_group_9_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 bathy_group_9_depth_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u251c\u2500\u2500 bathy_group_5_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 bathy_group_5_depth_cog.tif \u2502 \u2514\u2500\u2500 2025 \u2502 \u251c\u2500\u2500 bathy_group_5_color_cog.tif \u2502 \u2514\u2500\u2500 bathy_group_5_depth_cog.tif \u251c\u2500\u2500 ign \u2502 \u251c\u2500\u2500 2017 \u2502 \u2502 \u2514\u2500\u2500 974-2017-0340-7640-U40S-0M20-E080_clipped_cog.tif \u2502 \u2514\u2500\u2500 2022 \u2502 \u2514\u2500\u2500 974-2022-0340-7640-U40S-0M20-E080_clipped_cog.tif \u251c\u2500\u2500 ortho \u2502 \u251c\u2500\u2500 2021 \u2502 \u2502 \u2514\u2500\u2500 20211202_REU-BOUCAN_AUV-1_01_ortho_cog.tif \u2502 \u251c\u2500\u2500 2022 \u2502 \u2502 \u2514\u2500\u2500 20221025_SYC-aldabra-arm01_UAV-02_33_ortho_cog.tif \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u2514\u2500\u2500 2023_ASV_AME_STLEU_odm_orthophoto_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u2514\u2500\u2500 20240628_REU-HERMITAGE_ASV-1_01_ortho_cog.tif \u2502 \u2514\u2500\u2500 2025 \u2502 \u2514\u2500\u2500 2025_ASV_AME_STLEU_odm_orthophoto_cog.tif \u251c\u2500\u2500 pred_asv \u2502 \u251c\u2500\u2500 2022 \u2502 \u2502 \u251c\u2500\u2500 group_2022_ACROPORE_BRANCHED_0_colored_cog.tif \u2502 \u2502 \u2514\u2500\u2500 group_2022_THALASSODENDRON_CILIATUM_9_colored_cog.tif \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u2514\u2500\u2500 group_2023_THALASSODENDRON_CILIATUM_9_colored_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u2514\u2500\u2500 group_2024_THALASSODENDRON_CILIATUM_6_colored_cog.tif \u2502 \u251c\u2500\u2500 2025 \u2502 \u2502 \u2514\u2500\u2500 group_2025_THALASSODENDRON_CILIATUM_6_colored_cog.tif \u2502 \u2514\u2500\u2500 color_asv_pred_by_specie.json \u251c\u2500\u2500 pred_drone \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u251c\u2500\u2500 20231208_REU-ST-LEU_UAV-01_06_ortho_merged_predictions_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 20231208_REU-ST-LEU_UAV-01_06_ortho_merged_predictions_preddata_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u251c\u2500\u2500 20240407_REU-ST-LEU-PORT_UAV-01_03_ortho_merged_predictions_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 20240407_REU-ST-LEU-PORT_UAV-01_03_ortho_merged_predictions_preddata_cog.tif \u2502 \u2514\u2500\u2500 2025 \u2502 \u251c\u2500\u2500 20250517_REU-LA-SALINE_UAV-01_01_ortho_merged_predictions_color_cog.tif \u2502 \u2514\u2500\u2500 20250517_REU-LA-SALINE_UAV-01_01_ortho_merged_predictions_preddata_cog.tif \u251c\u2500\u2500 pred_ign \u2502 \u251c\u2500\u2500 2017 \u2502 \u2502 \u251c\u2500\u2500 974-2017-0340-7640-U40S-0M20-E080_merged_predictions_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 974-2017-0340-7640-U40S-0M20-E080_merged_predictions_preddata_cog.tif \u2502 \u2514\u2500\u2500 2022 \u2502 \u251c\u2500\u2500 974-2022-0310-7670-U40S-0M20-E080_merged_predictions_color_cog.tif \u2502 \u2514\u2500\u2500 974-2022-0310-7670-U40S-0M20-E080_merged_predictions_preddata_cog.tif \u2514\u2500\u2500 transparent.png \ud83c\udfa8 Gestion des doubles fichiers (Bathy, Pr\u00e9dictions) Les cat\u00e9gories bathy , pred_drone et pred_ign requi\u00e8rent deux fichiers COG par raster pour s\u00e9parer la visualisation de la donn\u00e9e : Type de Fichier R\u00f4le Objectif *_color_cog.tif Couche visuelle Sert uniquement \u00e0 afficher les couleurs sur la carte. *_preddata_cog.tif Couche de donn\u00e9es Contient les valeurs du raster (profondeur, labels de pr\u00e9diction, etc.), permettant \u00e0 l'utilisateur de cliquer sur la carte pour obtenir une information pr\u00e9cise. 3. D\u00e9ploiement et mise \u00e0 jour du serveur Le d\u00e9ploiement et la configuration compl\u00e8te du serveur sont d\u00e9taill\u00e9s dans le README.md du d\u00e9p\u00f4t principal cog-server . \ud83d\udd17 Lien du tutoriel de d\u00e9ploiement : https://github.com/SeatizenDOI/cog-server/blob/master/README.md \ud83d\ude80 Mise \u00e0 jour des donn\u00e9es sur le VPS Pour mettre \u00e0 jour les donn\u00e9es sur le serveur VPS (celui de Sylvain) apr\u00e8s l'optimisation : Connexion : Utilisez un client FTP/SFTP comme FileZilla pour vous connecter au VPS. Transfert : Transf\u00e9rez le contenu de votre nouveau dossier data (contenant les sous-dossiers bathy , ortho , etc.) vers le r\u00e9pertoire de donn\u00e9es du serveur : /home/debian/villien/data Red\u00e9marrage : Relancez le conteneur Docker pour qu'il prenne en compte les nouveaux fichiers. Utilisez la commande suivante via SSH : docker container restart cog-server","title":"Ajouter un raster sur cog-server"},{"location":"tutoriels/cog-server/#integration-des-donnees-rasters-dans-seatizen-monitoring","text":"L'int\u00e9gration des donn\u00e9es raster (Orthophotos, Bathym\u00e9trie, Pr\u00e9dictions, etc.) \u00e0 la plateforme Seatizen Monitoring n\u00e9cessite une optimisation pr\u00e9alable en raison de la taille importante des fichiers. Ces donn\u00e9es sont servies par un serveur d\u00e9di\u00e9, distinct du site web principal.","title":"Int\u00e9gration des donn\u00e9es rasters dans Seatizen Monitoring"},{"location":"tutoriels/cog-server/#1-le-depot-cog-server","text":"Tout le processus d'optimisation, de stockage et de service des rasters est g\u00e9r\u00e9 par le d\u00e9p\u00f4t cog-server : https://github.com/SeatizenDOI/cog-server . Ce d\u00e9p\u00f4t contient deux composantes essentielles : Composante R\u00f4le Le dossier tools Contient les scripts Python pour convertir vos rasters bruts en format Cloud Optimized Geotiff (COG) . Le serveur L'application web qui sert les rasters COG optimis\u00e9s, permettant une visualisation rapide sur la carte.","title":"1. Le d\u00e9p\u00f4t cog-server"},{"location":"tutoriels/cog-server/#2-preparation-et-organisation-des-fichiers-rasters","text":"","title":"2. Pr\u00e9paration et organisation des fichiers rasters"},{"location":"tutoriels/cog-server/#etape-1-optimisation-des-rasters","text":"Avant le d\u00e9ploiement, vous devez traiter vos fichiers pour les rendre compatibles avec le serveur. Utilisez les scripts disponibles dans le dossier cog-server/tools/ . Chaque sous-dossier ( bathy , ortho , pred_drone , etc.) contient un README.md expliquant les \u00e9tapes sp\u00e9cifiques pour optimiser les rasters de ce type. Architecture du dossier tools","title":"\u2699\ufe0f \u00c9tape 1 : Optimisation des rasters"},{"location":"tutoriels/cog-server/#etape-2-structure-du-dossier-de-donnees-data","text":"Une fois optimis\u00e9s (ils devraient se terminer par _cog.tif ), les fichiers doivent \u00eatre stock\u00e9s dans un dossier data en respectant la hi\u00e9rarchie suivante (par type de donn\u00e9es et par ann\u00e9e) : . \u251c\u2500\u2500 bathy \u2502 \u251c\u2500\u2500 2022 \u2502 \u2502 \u251c\u2500\u2500 bathy_group_9_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 bathy_group_9_depth_cog.tif \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u251c\u2500\u2500 bathy_group_9_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 bathy_group_9_depth_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u251c\u2500\u2500 bathy_group_5_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 bathy_group_5_depth_cog.tif \u2502 \u2514\u2500\u2500 2025 \u2502 \u251c\u2500\u2500 bathy_group_5_color_cog.tif \u2502 \u2514\u2500\u2500 bathy_group_5_depth_cog.tif \u251c\u2500\u2500 ign \u2502 \u251c\u2500\u2500 2017 \u2502 \u2502 \u2514\u2500\u2500 974-2017-0340-7640-U40S-0M20-E080_clipped_cog.tif \u2502 \u2514\u2500\u2500 2022 \u2502 \u2514\u2500\u2500 974-2022-0340-7640-U40S-0M20-E080_clipped_cog.tif \u251c\u2500\u2500 ortho \u2502 \u251c\u2500\u2500 2021 \u2502 \u2502 \u2514\u2500\u2500 20211202_REU-BOUCAN_AUV-1_01_ortho_cog.tif \u2502 \u251c\u2500\u2500 2022 \u2502 \u2502 \u2514\u2500\u2500 20221025_SYC-aldabra-arm01_UAV-02_33_ortho_cog.tif \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u2514\u2500\u2500 2023_ASV_AME_STLEU_odm_orthophoto_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u2514\u2500\u2500 20240628_REU-HERMITAGE_ASV-1_01_ortho_cog.tif \u2502 \u2514\u2500\u2500 2025 \u2502 \u2514\u2500\u2500 2025_ASV_AME_STLEU_odm_orthophoto_cog.tif \u251c\u2500\u2500 pred_asv \u2502 \u251c\u2500\u2500 2022 \u2502 \u2502 \u251c\u2500\u2500 group_2022_ACROPORE_BRANCHED_0_colored_cog.tif \u2502 \u2502 \u2514\u2500\u2500 group_2022_THALASSODENDRON_CILIATUM_9_colored_cog.tif \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u2514\u2500\u2500 group_2023_THALASSODENDRON_CILIATUM_9_colored_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u2514\u2500\u2500 group_2024_THALASSODENDRON_CILIATUM_6_colored_cog.tif \u2502 \u251c\u2500\u2500 2025 \u2502 \u2502 \u2514\u2500\u2500 group_2025_THALASSODENDRON_CILIATUM_6_colored_cog.tif \u2502 \u2514\u2500\u2500 color_asv_pred_by_specie.json \u251c\u2500\u2500 pred_drone \u2502 \u251c\u2500\u2500 2023 \u2502 \u2502 \u251c\u2500\u2500 20231208_REU-ST-LEU_UAV-01_06_ortho_merged_predictions_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 20231208_REU-ST-LEU_UAV-01_06_ortho_merged_predictions_preddata_cog.tif \u2502 \u251c\u2500\u2500 2024 \u2502 \u2502 \u251c\u2500\u2500 20240407_REU-ST-LEU-PORT_UAV-01_03_ortho_merged_predictions_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 20240407_REU-ST-LEU-PORT_UAV-01_03_ortho_merged_predictions_preddata_cog.tif \u2502 \u2514\u2500\u2500 2025 \u2502 \u251c\u2500\u2500 20250517_REU-LA-SALINE_UAV-01_01_ortho_merged_predictions_color_cog.tif \u2502 \u2514\u2500\u2500 20250517_REU-LA-SALINE_UAV-01_01_ortho_merged_predictions_preddata_cog.tif \u251c\u2500\u2500 pred_ign \u2502 \u251c\u2500\u2500 2017 \u2502 \u2502 \u251c\u2500\u2500 974-2017-0340-7640-U40S-0M20-E080_merged_predictions_color_cog.tif \u2502 \u2502 \u2514\u2500\u2500 974-2017-0340-7640-U40S-0M20-E080_merged_predictions_preddata_cog.tif \u2502 \u2514\u2500\u2500 2022 \u2502 \u251c\u2500\u2500 974-2022-0310-7670-U40S-0M20-E080_merged_predictions_color_cog.tif \u2502 \u2514\u2500\u2500 974-2022-0310-7670-U40S-0M20-E080_merged_predictions_preddata_cog.tif \u2514\u2500\u2500 transparent.png","title":"\ud83d\udcc2 \u00c9tape 2 : Structure du dossier de donn\u00e9es (data)"},{"location":"tutoriels/cog-server/#gestion-des-doubles-fichiers-bathy-predictions","text":"Les cat\u00e9gories bathy , pred_drone et pred_ign requi\u00e8rent deux fichiers COG par raster pour s\u00e9parer la visualisation de la donn\u00e9e : Type de Fichier R\u00f4le Objectif *_color_cog.tif Couche visuelle Sert uniquement \u00e0 afficher les couleurs sur la carte. *_preddata_cog.tif Couche de donn\u00e9es Contient les valeurs du raster (profondeur, labels de pr\u00e9diction, etc.), permettant \u00e0 l'utilisateur de cliquer sur la carte pour obtenir une information pr\u00e9cise.","title":"\ud83c\udfa8 Gestion des doubles fichiers (Bathy, Pr\u00e9dictions)"},{"location":"tutoriels/cog-server/#3-deploiement-et-mise-a-jour-du-serveur","text":"Le d\u00e9ploiement et la configuration compl\u00e8te du serveur sont d\u00e9taill\u00e9s dans le README.md du d\u00e9p\u00f4t principal cog-server . \ud83d\udd17 Lien du tutoriel de d\u00e9ploiement : https://github.com/SeatizenDOI/cog-server/blob/master/README.md","title":"3. D\u00e9ploiement et mise \u00e0 jour du serveur"},{"location":"tutoriels/cog-server/#mise-a-jour-des-donnees-sur-le-vps","text":"Pour mettre \u00e0 jour les donn\u00e9es sur le serveur VPS (celui de Sylvain) apr\u00e8s l'optimisation : Connexion : Utilisez un client FTP/SFTP comme FileZilla pour vous connecter au VPS. Transfert : Transf\u00e9rez le contenu de votre nouveau dossier data (contenant les sous-dossiers bathy , ortho , etc.) vers le r\u00e9pertoire de donn\u00e9es du serveur : /home/debian/villien/data Red\u00e9marrage : Relancez le conteneur Docker pour qu'il prenne en compte les nouveaux fichiers. Utilisez la commande suivante via SSH : docker container restart cog-server","title":"\ud83d\ude80 Mise \u00e0 jour des donn\u00e9es sur le VPS"},{"location":"tutoriels/ovh_nginx_ssl/","text":"D\u00e9ployer un site sur OVH avec nginx Configuration sur OVH Sur le site OVH, il faut aller dans WEB cloud , Nom de domaine , ifremer.re puis Zone DNS . Ensuite, il faut Ajouter une entr\u00e9e . On s\u00e9lectionne le A puis, on renseigne le nom de sous domaine (Ex: seatizenmonitoring.ifremer.re). On laisse TTL par d\u00e9faut, et en cible, on met l'adresse IP du serveur, la m\u00eame qui est en face de ifremer.re 0 A 51.91.102.139 Configuration NGINX On va sur le VPS On cr\u00e9e un fichier et on l'\u00e9dite : sudo nano /etc/nginx/sites-availables/seatizenmonitoring Dedans on met : server { listen 80; server_name seatizenmonitoring.ifremer.re; location / { proxy_pass http://localhost:3000; # Le port o\u00f9 tourne ton app proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection 'upgrade'; proxy_set_header Host $host; proxy_cache_bypass $http_upgrade; } } On link le fichier sudo ln -s /etc/nginx/sites-available/seatizenmonitoring /etc/nginx/sites-enabled/ On red\u00e9marre la conf : sudo systemctl stop nginx puis sudo systemctl start nginx . S'il y a un message rouge, faire sudo systemctl status nginx et corriger le probl\u00e8me. Ajouter un certificat SSL Pour activer le SSL, il faut juste ex\u00e9cuter la commande : sudo certbot --nginx -d seatizenmonitoring.ifremer.re Maintenant le site est en https et les requ\u00eates http sont redirig\u00e9s vers le https.","title":"D\u00e9ployer un site OVH - NGINX - SSL"},{"location":"tutoriels/ovh_nginx_ssl/#deployer-un-site-sur-ovh-avec-nginx","text":"","title":"D\u00e9ployer un site sur OVH avec nginx"},{"location":"tutoriels/ovh_nginx_ssl/#configuration-sur-ovh","text":"Sur le site OVH, il faut aller dans WEB cloud , Nom de domaine , ifremer.re puis Zone DNS . Ensuite, il faut Ajouter une entr\u00e9e . On s\u00e9lectionne le A puis, on renseigne le nom de sous domaine (Ex: seatizenmonitoring.ifremer.re). On laisse TTL par d\u00e9faut, et en cible, on met l'adresse IP du serveur, la m\u00eame qui est en face de ifremer.re 0 A 51.91.102.139","title":"Configuration sur OVH"},{"location":"tutoriels/ovh_nginx_ssl/#configuration-nginx","text":"On va sur le VPS On cr\u00e9e un fichier et on l'\u00e9dite : sudo nano /etc/nginx/sites-availables/seatizenmonitoring Dedans on met : server { listen 80; server_name seatizenmonitoring.ifremer.re; location / { proxy_pass http://localhost:3000; # Le port o\u00f9 tourne ton app proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection 'upgrade'; proxy_set_header Host $host; proxy_cache_bypass $http_upgrade; } } On link le fichier sudo ln -s /etc/nginx/sites-available/seatizenmonitoring /etc/nginx/sites-enabled/ On red\u00e9marre la conf : sudo systemctl stop nginx puis sudo systemctl start nginx . S'il y a un message rouge, faire sudo systemctl status nginx et corriger le probl\u00e8me.","title":"Configuration NGINX"},{"location":"tutoriels/ovh_nginx_ssl/#ajouter-un-certificat-ssl","text":"Pour activer le SSL, il faut juste ex\u00e9cuter la commande : sudo certbot --nginx -d seatizenmonitoring.ifremer.re Maintenant le site est en https et les requ\u00eates http sont redirig\u00e9s vers le https.","title":"Ajouter un certificat SSL"},{"location":"tutoriels/seatizen-monitoring/","text":"\ud83d\udcbb Tutoriel : D\u00e9ploiement de Seatizen Monitoring Seatizen Monitoring est une application web d\u00e9di\u00e9e \u00e0 la visualisation et au monitoring des donn\u00e9es. Elle est bas\u00e9e sur une architecture Frontend / Backend et g\u00e9r\u00e9e via Docker Compose. D\u00e9p\u00f4t GitHub : github.com/SeatizenDOI/seatizen-monitoring \ud83c\udf10 Architecture Technique D\u00e9taill\u00e9e L'application repose sur quatre conteneurs Docker pour assurer la gestion compl\u00e8te des donn\u00e9es, de la source \u00e0 l'interface utilisateur : 1. Flux des Donn\u00e9es Source : Les donn\u00e9es proviennent d'un Geopackage ( .gpkg ), un format de base de donn\u00e9es SQLite optimis\u00e9 pour les donn\u00e9es g\u00e9ospatiales, t\u00e9l\u00e9charg\u00e9 depuis Zenodo. Base de Donn\u00e9es : Bien que les donn\u00e9es sources soient un Geopackage, elles sont charg\u00e9es dans une base PostgreSQL (PostGIS) . Ce transfert est crucial pour des raisons de performance et de rapidit\u00e9 d'ex\u00e9cution des requ\u00eates de l'application web. 2. Les Conteneurs Docker Le d\u00e9ploiement utilise quatre services conteneuris\u00e9s : Conteneur Technologie R\u00f4le sm_database PostgreSQL H\u00e9berge la base de donn\u00e9es. sm_gdal GDAL Outil d'Extraction : Contient la biblioth\u00e8que GDAL, indispensable pour lire et extraire les donn\u00e9es du Geopackage afin de les ins\u00e9rer dans la base PostGIS. sm_backend FastAPI (Python) Fournit l'API pour servir les donn\u00e9es du PostgreSQL au Frontend. sm_frontend Next.js Interface utilisateur de l'application. \ud83d\ude80 Instructions de D\u00e9marrage Le d\u00e9ploiement et la gestion de l'environnement se font int\u00e9gralement via Docker Compose . Action Commande R\u00f4le Lancer l'application docker compose up --build -d D\u00e9marre les quatre services en mode d\u00e9tach\u00e9 ( -d ) apr\u00e8s avoir reconstruit les images ( --build ). Arr\u00eater l'application docker compose down -v Arr\u00eate et supprime les conteneurs, et surtout, supprime les volumes ( -v ) associ\u00e9s. Surveiller le d\u00e9marrage de l'application docker logs -f sm_gdal Surveille la transformation du geopackage en base de donn\u00e9es. \u26a0\ufe0f Point de Vigilance Pour \u00e9viter des probl\u00e8mes au red\u00e9marrage (tels que des volumes orphelins ou des volumes mont\u00e9s non d\u00e9sir\u00e9s), il est imp\u00e9ratif d'utiliser la commande docker compose down -v lors de l'arr\u00eat. L'option -v garantit la suppression propre des volumes cr\u00e9\u00e9s par Docker.","title":"D\u00e9ployer Seatizen monitoring"},{"location":"tutoriels/seatizen-monitoring/#tutoriel-deploiement-de-seatizen-monitoring","text":"Seatizen Monitoring est une application web d\u00e9di\u00e9e \u00e0 la visualisation et au monitoring des donn\u00e9es. Elle est bas\u00e9e sur une architecture Frontend / Backend et g\u00e9r\u00e9e via Docker Compose. D\u00e9p\u00f4t GitHub : github.com/SeatizenDOI/seatizen-monitoring","title":"\ud83d\udcbb Tutoriel : D\u00e9ploiement de Seatizen Monitoring"},{"location":"tutoriels/seatizen-monitoring/#architecture-technique-detaillee","text":"L'application repose sur quatre conteneurs Docker pour assurer la gestion compl\u00e8te des donn\u00e9es, de la source \u00e0 l'interface utilisateur :","title":"\ud83c\udf10 Architecture Technique D\u00e9taill\u00e9e"},{"location":"tutoriels/seatizen-monitoring/#1-flux-des-donnees","text":"Source : Les donn\u00e9es proviennent d'un Geopackage ( .gpkg ), un format de base de donn\u00e9es SQLite optimis\u00e9 pour les donn\u00e9es g\u00e9ospatiales, t\u00e9l\u00e9charg\u00e9 depuis Zenodo. Base de Donn\u00e9es : Bien que les donn\u00e9es sources soient un Geopackage, elles sont charg\u00e9es dans une base PostgreSQL (PostGIS) . Ce transfert est crucial pour des raisons de performance et de rapidit\u00e9 d'ex\u00e9cution des requ\u00eates de l'application web.","title":"1. Flux des Donn\u00e9es"},{"location":"tutoriels/seatizen-monitoring/#2-les-conteneurs-docker","text":"Le d\u00e9ploiement utilise quatre services conteneuris\u00e9s : Conteneur Technologie R\u00f4le sm_database PostgreSQL H\u00e9berge la base de donn\u00e9es. sm_gdal GDAL Outil d'Extraction : Contient la biblioth\u00e8que GDAL, indispensable pour lire et extraire les donn\u00e9es du Geopackage afin de les ins\u00e9rer dans la base PostGIS. sm_backend FastAPI (Python) Fournit l'API pour servir les donn\u00e9es du PostgreSQL au Frontend. sm_frontend Next.js Interface utilisateur de l'application.","title":"2. Les Conteneurs Docker"},{"location":"tutoriels/seatizen-monitoring/#instructions-de-demarrage","text":"Le d\u00e9ploiement et la gestion de l'environnement se font int\u00e9gralement via Docker Compose . Action Commande R\u00f4le Lancer l'application docker compose up --build -d D\u00e9marre les quatre services en mode d\u00e9tach\u00e9 ( -d ) apr\u00e8s avoir reconstruit les images ( --build ). Arr\u00eater l'application docker compose down -v Arr\u00eate et supprime les conteneurs, et surtout, supprime les volumes ( -v ) associ\u00e9s. Surveiller le d\u00e9marrage de l'application docker logs -f sm_gdal Surveille la transformation du geopackage en base de donn\u00e9es. \u26a0\ufe0f Point de Vigilance Pour \u00e9viter des probl\u00e8mes au red\u00e9marrage (tels que des volumes orphelins ou des volumes mont\u00e9s non d\u00e9sir\u00e9s), il est imp\u00e9ratif d'utiliser la commande docker compose down -v lors de l'arr\u00eat. L'option -v garantit la suppression propre des volumes cr\u00e9\u00e9s par Docker.","title":"\ud83d\ude80 Instructions de D\u00e9marrage"},{"location":"zenodo/zenodo-download/","text":"T\u00e9l\u00e9charger un jeu de donn\u00e9es depuis Seatizen monitoring avec zenodo-download Ce tutoriel explique comment extraire un sous-ensemble du jeu de donn\u00e9es SeatizenAtlas . Extraction du sous-jeu de donn\u00e9es La page Explorer se compose de trois parties principales : la carte , la section Data Configuration , et la section Model Configuration . Explication des \u00e9l\u00e9ments : Permet de d\u00e9limiter une ou plusieurs zones sur la carte, dans lesquelles seules les images situ\u00e9es \u00e0 l\u2019int\u00e9rieur seront export\u00e9es. \u26a0\ufe0f Si aucune zone n\u2019est dessin\u00e9e, toutes les images affich\u00e9es sur la carte seront export\u00e9es , ce qui peut prendre plusieurs minutes. Exemple d\u2019une zone dessin\u00e9e pour un export : ici, le regroupement de quatre sessions de planches au nord de Saint-Leu. Ce s\u00e9lecteur permet de choisir les plateformes d\u2019acquisition \u00e0 prendre en compte. Il est possible d\u2019en s\u00e9lectionner plusieurs, chacune \u00e9tant repr\u00e9sent\u00e9e par une couleur diff\u00e9rente. La carte affiche uniquement les donn\u00e9es des plateformes s\u00e9lectionn\u00e9es. Il est \u00e9galement possible de filtrer par p\u00e9riode temporelle : la carte affichera uniquement les donn\u00e9es comprises dans cette plage de temps. S\u00e9lection des m\u00e9tadonn\u00e9es \u00e0 inclure dans l\u2019extrait. Pour obtenir un sous-jeu de donn\u00e9es complet, il est essentiel de conserver : le champ version_doi , qui indique l\u2019adresse o\u00f9 la session est stock\u00e9e en ligne, et le champ relative_file_path , qui correspond au chemin de l\u2019image dans la session. Nous passons maintenant \u00e0 la section Model Configuration . Elle n\u2019est pas n\u00e9cessaire pour l\u2019extraction des donn\u00e9es, mais voici son fonctionnement : Permet de choisir un mod\u00e8le de classification multilabel (non applicable aux images issues de drones). S\u00e9lection des classes \u00e0 conserver pour le mod\u00e8le multilabel. Choix du type de sortie : soit les scores de pr\u00e9diction, soit les valeurs binaires (pr\u00e9sence/absence) apr\u00e8s application d\u2019un seuil ( threshold ). Le bouton Exporter permet de t\u00e9l\u00e9charger le fichier CSV correspondant. \u26a0\ufe0f Avertissement : Les pr\u00e9dictions pr\u00e9sent\u00e9es sur cette interface sont produites par un algorithme d\u2019intelligence artificielle \u00e0 titre informatif uniquement. Elles peuvent contenir des inexactitudes. L\u2019\u00e9diteur de l\u2019application d\u00e9cline toute responsabilit\u00e9 quant \u00e0 leur interpr\u00e9tation ou leur utilisation. R\u00e9cup\u00e9ration des images L\u2019export g\u00e9n\u00e8re un fichier CSV de ce type : FileName,GPSLatitude,GPSLongitude,version_doi,relative_file_path 20231110_REU-ST-LEU_ASV-1_04_5_567.jpeg,-21.16281806626762,55.2865898413734,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_567.jpeg 20231110_REU-ST-LEU_ASV-1_04_5_990.jpeg,-21.16282476635246,55.28659116164465,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_990.jpeg 20231110_REU-ST-LEU_ASV-1_04_5_1409.jpeg,-21.162930832467936,55.28655471331759,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_1409.jpeg ... Il existe deux fa\u00e7ons de configurer l\u2019environnement n\u00e9cessaire au t\u00e9l\u00e9chargement des images \u00e0 partir de Zenodo : 1. Utiliser un environnement Python Vous pouvez suivre le guide d\u2019installation d\u00e9taill\u00e9 disponible ici : \ud83d\udc49 README du d\u00e9p\u00f4t GitHub Cette m\u00e9thode consiste \u00e0 installer localement un environnement Python, puis \u00e0 ex\u00e9cuter le script zenodo-download.py pour lancer le t\u00e9l\u00e9chargement. Exceuter la commande : python zenodo-download.py -ecf -pcf /path/to/csv/file/provide/by/seatizen/monitoring -po /path/where/you/want/your/frames/folder 2. Utiliser Docker (recommand\u00e9 pour la simplicit\u00e9) Si vous pr\u00e9f\u00e9rez \u00e9viter l\u2019installation manuelle des d\u00e9pendances, vous pouvez utiliser Docker Desktop . Apr\u00e8s l\u2019avoir install\u00e9, il vous suffit d\u2019ex\u00e9cuter la commande suivante : docker run -it --user 1000 --rm \\ -v ./path/where/you/want/your/frames/folder:/home/seatizen/plancha \\ -v ./path/folder/where/csv/file/provided/by/seatizen/monitoring:/home/seatizen/app/csv_inputs \\ --name zenodo-manager seatizendoi/zenodo-manager:latest bash Cette commande : t\u00e9l\u00e9charge automatiquement l\u2019image Docker seatizendoi/zenodo-manager:latest , monte vos dossiers locaux ( plancha_test et inputs ) \u00e0 l\u2019int\u00e9rieur du conteneur, et ouvre une session interactive pr\u00eate \u00e0 ex\u00e9cuter les scripts Zenodo Tools. Une fois votre environnement pr\u00eat : Executer la commande : python zenodo-download.py -ecf -pcf /home/seatizen/app/csv_inputs/seatizen_monitoring.csv -po /home/seatizen/plancha Vous disposez d\u00e9sormais : du fichier CSV cr\u00e9e par Seatizen Monitoring que vous pouvez importer dans QGIS pour visualiser la position exacte de chaque image, et d\u2019un dossier /path/where/you/want/your/frames/folder/Frames contenant l\u2019ensemble des images t\u00e9l\u00e9charg\u00e9es.","title":"T\u00e9l\u00e9charger une session depuis Zenodo"},{"location":"zenodo/zenodo-download/#telecharger-un-jeu-de-donnees-depuis-seatizen-monitoring-avec-zenodo-download","text":"Ce tutoriel explique comment extraire un sous-ensemble du jeu de donn\u00e9es SeatizenAtlas .","title":"T\u00e9l\u00e9charger un jeu de donn\u00e9es depuis Seatizen monitoring avec zenodo-download"},{"location":"zenodo/zenodo-download/#extraction-du-sous-jeu-de-donnees","text":"La page Explorer se compose de trois parties principales : la carte , la section Data Configuration , et la section Model Configuration .","title":"Extraction du sous-jeu de donn\u00e9es"},{"location":"zenodo/zenodo-download/#explication-des-elements","text":"Permet de d\u00e9limiter une ou plusieurs zones sur la carte, dans lesquelles seules les images situ\u00e9es \u00e0 l\u2019int\u00e9rieur seront export\u00e9es. \u26a0\ufe0f Si aucune zone n\u2019est dessin\u00e9e, toutes les images affich\u00e9es sur la carte seront export\u00e9es , ce qui peut prendre plusieurs minutes. Exemple d\u2019une zone dessin\u00e9e pour un export : ici, le regroupement de quatre sessions de planches au nord de Saint-Leu. Ce s\u00e9lecteur permet de choisir les plateformes d\u2019acquisition \u00e0 prendre en compte. Il est possible d\u2019en s\u00e9lectionner plusieurs, chacune \u00e9tant repr\u00e9sent\u00e9e par une couleur diff\u00e9rente. La carte affiche uniquement les donn\u00e9es des plateformes s\u00e9lectionn\u00e9es. Il est \u00e9galement possible de filtrer par p\u00e9riode temporelle : la carte affichera uniquement les donn\u00e9es comprises dans cette plage de temps. S\u00e9lection des m\u00e9tadonn\u00e9es \u00e0 inclure dans l\u2019extrait. Pour obtenir un sous-jeu de donn\u00e9es complet, il est essentiel de conserver : le champ version_doi , qui indique l\u2019adresse o\u00f9 la session est stock\u00e9e en ligne, et le champ relative_file_path , qui correspond au chemin de l\u2019image dans la session. Nous passons maintenant \u00e0 la section Model Configuration . Elle n\u2019est pas n\u00e9cessaire pour l\u2019extraction des donn\u00e9es, mais voici son fonctionnement : Permet de choisir un mod\u00e8le de classification multilabel (non applicable aux images issues de drones). S\u00e9lection des classes \u00e0 conserver pour le mod\u00e8le multilabel. Choix du type de sortie : soit les scores de pr\u00e9diction, soit les valeurs binaires (pr\u00e9sence/absence) apr\u00e8s application d\u2019un seuil ( threshold ). Le bouton Exporter permet de t\u00e9l\u00e9charger le fichier CSV correspondant. \u26a0\ufe0f Avertissement : Les pr\u00e9dictions pr\u00e9sent\u00e9es sur cette interface sont produites par un algorithme d\u2019intelligence artificielle \u00e0 titre informatif uniquement. Elles peuvent contenir des inexactitudes. L\u2019\u00e9diteur de l\u2019application d\u00e9cline toute responsabilit\u00e9 quant \u00e0 leur interpr\u00e9tation ou leur utilisation.","title":"Explication des \u00e9l\u00e9ments :"},{"location":"zenodo/zenodo-download/#recuperation-des-images","text":"L\u2019export g\u00e9n\u00e8re un fichier CSV de ce type : FileName,GPSLatitude,GPSLongitude,version_doi,relative_file_path 20231110_REU-ST-LEU_ASV-1_04_5_567.jpeg,-21.16281806626762,55.2865898413734,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_567.jpeg 20231110_REU-ST-LEU_ASV-1_04_5_990.jpeg,-21.16282476635246,55.28659116164465,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_990.jpeg 20231110_REU-ST-LEU_ASV-1_04_5_1409.jpeg,-21.162930832467936,55.28655471331759,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_1409.jpeg ... Il existe deux fa\u00e7ons de configurer l\u2019environnement n\u00e9cessaire au t\u00e9l\u00e9chargement des images \u00e0 partir de Zenodo :","title":"R\u00e9cup\u00e9ration des images"},{"location":"zenodo/zenodo-download/#1-utiliser-un-environnement-python","text":"Vous pouvez suivre le guide d\u2019installation d\u00e9taill\u00e9 disponible ici : \ud83d\udc49 README du d\u00e9p\u00f4t GitHub Cette m\u00e9thode consiste \u00e0 installer localement un environnement Python, puis \u00e0 ex\u00e9cuter le script zenodo-download.py pour lancer le t\u00e9l\u00e9chargement. Exceuter la commande : python zenodo-download.py -ecf -pcf /path/to/csv/file/provide/by/seatizen/monitoring -po /path/where/you/want/your/frames/folder","title":"1. Utiliser un environnement Python"},{"location":"zenodo/zenodo-download/#2-utiliser-docker-recommande-pour-la-simplicite","text":"Si vous pr\u00e9f\u00e9rez \u00e9viter l\u2019installation manuelle des d\u00e9pendances, vous pouvez utiliser Docker Desktop . Apr\u00e8s l\u2019avoir install\u00e9, il vous suffit d\u2019ex\u00e9cuter la commande suivante : docker run -it --user 1000 --rm \\ -v ./path/where/you/want/your/frames/folder:/home/seatizen/plancha \\ -v ./path/folder/where/csv/file/provided/by/seatizen/monitoring:/home/seatizen/app/csv_inputs \\ --name zenodo-manager seatizendoi/zenodo-manager:latest bash Cette commande : t\u00e9l\u00e9charge automatiquement l\u2019image Docker seatizendoi/zenodo-manager:latest , monte vos dossiers locaux ( plancha_test et inputs ) \u00e0 l\u2019int\u00e9rieur du conteneur, et ouvre une session interactive pr\u00eate \u00e0 ex\u00e9cuter les scripts Zenodo Tools. Une fois votre environnement pr\u00eat : Executer la commande : python zenodo-download.py -ecf -pcf /home/seatizen/app/csv_inputs/seatizen_monitoring.csv -po /home/seatizen/plancha Vous disposez d\u00e9sormais : du fichier CSV cr\u00e9e par Seatizen Monitoring que vous pouvez importer dans QGIS pour visualiser la position exacte de chaque image, et d\u2019un dossier /path/where/you/want/your/frames/folder/Frames contenant l\u2019ensemble des images t\u00e9l\u00e9charg\u00e9es.","title":"2. Utiliser Docker (recommand\u00e9 pour la simplicit\u00e9)"},{"location":"zenodo/zenodo-manager/","text":"Mettre \u00e0 jour Seatizen Atlas Comment fonctionne Seatizen Atlas Seatizen Atlas est une base de donn\u00e9es SQLite stock\u00e9e au format GeoPackage afin d'int\u00e9grer une dimension spatiale. Son but est de rassembler les m\u00e9tadonn\u00e9es de chaque session Seatizen pr\u00e9sente sur Zenodo. Il est possible d'utiliser le logiciel DB Browser for SQLite pour explorer la base de donn\u00e9es. Voici son diagramme UML : Figure 3 : UML de Seatizen Atlas Elle stocke les m\u00e9tadonn\u00e9es des images (table frame ), ainsi que l'ensemble des m\u00e9tadonn\u00e9es des pr\u00e9dictions et des annotations multilabels (partie en jaune). Le script zenodo-manager.py permet de : Ajouter une ou plusieurs sessions dans la base de donn\u00e9es. Attention : la session doit \u00eatre pr\u00e9sente sur le PC de l'utilisateur (sinon, voir zenodo-auto-update.py ). Mettre \u00e0 jour la base de donn\u00e9es \u00e0 partir d'un script SQL. G\u00e9n\u00e9rer des fichiers CSV, Parquet et une archive au format Darwin Core. T\u00e9l\u00e9verser la base de donn\u00e9es sur Zenodo. Mettre \u00e0 jour les m\u00e9tadonn\u00e9es de la derni\u00e8re version sur Zenodo. Ajouter des annotations (voir cheatsheet). Le script zenodo-auto-update.py est plus simple d'utilisation. \u00c0 partir d'une ou plusieurs communaut\u00e9s sur Zenodo, il met \u00e0 jour la base de donn\u00e9es locale en t\u00e9l\u00e9chargeant uniquement les sessions cr\u00e9\u00e9es ou modifi\u00e9es depuis le dernier moissonnage (voir table etl_runs du GeoPackage). Le script t\u00e9l\u00e9charge la derni\u00e8re version des archives METADATA.zip et PROCESSED_DATA_IA.zip . Si les donn\u00e9es de Zenodo ne sont pas encore pr\u00e9sentes dans la base, il extrait les informations n\u00e9cessaires puis supprime les dossiers locaux. Cheatsheet de commandes Exemples de commandes pour mettre en ligne ou \u00e0 jour des sessions et la base de donn\u00e9es. Mettre les m\u00e9tadonn\u00e9es \u00e0 jour d'un dossier de sessions ( -um ) avec le fichier de m\u00e9tadonn\u00e9es metadata/metadata.json python zenodo-upload.py -efol -pfol /media/bioeos/D/202312_plancha_session -um -pmj metadata/metadata.json Attention, la commande ci-dessus met \u00e0 jour TOUTES les version d'un d\u00e9p\u00f4t sur zenodo. Pour mettre \u00e0 jour que la derni\u00e8re version, il faut utiliser l'argument -umlv Mettre en ligne un dossier de sessions. On aura une version de donn\u00e9es brutes ( -ur ) et une version de processed_data ( -up ) avec les dossiers frames, metadata, et photogrammetrie. Le fichier de m\u00e9tadonn\u00e9es \u00e0 utiliser est ./metadata/metadata_recif3D.json . On force l'envoie des frames car on a pas utilis\u00e9 Jacques pour filtrer les images inutiles (image sous-marine d'AUV). python zenodo-upload.py -efol -pfol ./recif3D_sessions_folder/ -ur -up pmf -pmj ./metadata/metadata_recif3D.json --all_frames_without_filtering_by_useful R\u00e9cup\u00e8re tous les deposits sur Zenodo et supprime ceux qui sont vierges, sans titre et en mode brouillon (Erreur lors d'un envoi, d\u00e9p\u00f4t fant\u00f4me) python zenodo-upload.py -eno -cd Applique le script SQL num\u00e9ro 3 sur le geopackage. Il doit \u00eatre rang\u00e9 dans le dossier https://github.com/SeatizenDOI/zenodo-tools/tree/master/src/sql_connector python zenodo-manager.py -eno -ssn 3 Exporte tous les fichiers d\u00e9riv\u00e9s de la base de donn\u00e9es (CSV, Parquet, darwin core, ...) python zenodo-manager.py -eno -ulo R\u00e9g\u00e8n\u00e8re une base de donn\u00e9es de z\u00e9ro ( -fr ) localement ( -ulo ) et ajoute un dossier de sessions en forcant l'insertion des frames (n'utilise pas Jacques) ( -ffi ). Le programme ne g\u00e9n\u00e8re pas les fichiers d\u00e9riv\u00e9s. python zenodo-manager.py -efol -pfol /media/bioeos/E/2015_plancha_session/ -ulo -ffi -fr -ne # Force inserting frame in database with no export and regenerate database. Envoie sur zenodo une nouvelle version de la base de donn\u00e9e ( -cp ). Le programme ne reg\u00e9n\u00e8re pas les fichiers d\u00e9riv\u00e9s. python zenodo-manager.py -eno -ulo -cp -ne Ajoute des annotations dans la base de donn\u00e9es ( -la ). python zenodo-manager.py -eno -ulo -la ../../Bioeos/annotations_some_image/Export_human/ -ne # Add frames and import annotations. Un fichier suit un certaine nommage date_time__author-name__dataset-name.csv . Par exemple, voici le fichier 20240524_151409__victor-russias__annotations_over_predictions_1.csv : FileName,Acropore_branched,Acropore_digitised,Acropore_sub_massive,Acropore_tabular,Algae_assembly,Algae_drawn_up,Algae_limestone,Algae_sodding,Atra/Leucospilota,Bleached_coral,Blurred,Dead_coral,Fish,Homo_sapiens,Human_object,Living_coral,Millepore,No_acropore_encrusting,No_acropore_foliaceous,No_acropore_massive,No_acropore_solitary,No_acropore_sub_massive,Rock,Rubble,Sand,Sea_cucumber,Sea_urchins,Sponge,Syringodium_isoetifolium,Thalassodendron_ciliatum,Useless 20230203_REU-GRANDFOND_ASV-1_00_1_197.jpeg,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 20230203_REU-GRANDFOND_ASV-1_00_1_201.jpeg,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 20230203_REU-GRANDFOND_ASV-1_00_1_212.jpeg,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 20230203_REU-GRANDFOND_ASV-1_00_1_218.jpeg,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 Si une image n'est pas pr\u00e9sente d\u00e9j\u00e0 dans la table frames (li\u00e9 \u00e0 un DOI), on ne garde pas. Si un label d'annotation n'est pas pr\u00e9sent dans la base de donn\u00e9es, on n'ajoute pas l'annotation.","title":"Mettre \u00e0 jour Seatizen Atlas"},{"location":"zenodo/zenodo-manager/#mettre-a-jour-seatizen-atlas","text":"","title":"Mettre \u00e0 jour Seatizen Atlas"},{"location":"zenodo/zenodo-manager/#comment-fonctionne-seatizen-atlas","text":"Seatizen Atlas est une base de donn\u00e9es SQLite stock\u00e9e au format GeoPackage afin d'int\u00e9grer une dimension spatiale. Son but est de rassembler les m\u00e9tadonn\u00e9es de chaque session Seatizen pr\u00e9sente sur Zenodo. Il est possible d'utiliser le logiciel DB Browser for SQLite pour explorer la base de donn\u00e9es. Voici son diagramme UML : Figure 3 : UML de Seatizen Atlas Elle stocke les m\u00e9tadonn\u00e9es des images (table frame ), ainsi que l'ensemble des m\u00e9tadonn\u00e9es des pr\u00e9dictions et des annotations multilabels (partie en jaune). Le script zenodo-manager.py permet de : Ajouter une ou plusieurs sessions dans la base de donn\u00e9es. Attention : la session doit \u00eatre pr\u00e9sente sur le PC de l'utilisateur (sinon, voir zenodo-auto-update.py ). Mettre \u00e0 jour la base de donn\u00e9es \u00e0 partir d'un script SQL. G\u00e9n\u00e9rer des fichiers CSV, Parquet et une archive au format Darwin Core. T\u00e9l\u00e9verser la base de donn\u00e9es sur Zenodo. Mettre \u00e0 jour les m\u00e9tadonn\u00e9es de la derni\u00e8re version sur Zenodo. Ajouter des annotations (voir cheatsheet). Le script zenodo-auto-update.py est plus simple d'utilisation. \u00c0 partir d'une ou plusieurs communaut\u00e9s sur Zenodo, il met \u00e0 jour la base de donn\u00e9es locale en t\u00e9l\u00e9chargeant uniquement les sessions cr\u00e9\u00e9es ou modifi\u00e9es depuis le dernier moissonnage (voir table etl_runs du GeoPackage). Le script t\u00e9l\u00e9charge la derni\u00e8re version des archives METADATA.zip et PROCESSED_DATA_IA.zip . Si les donn\u00e9es de Zenodo ne sont pas encore pr\u00e9sentes dans la base, il extrait les informations n\u00e9cessaires puis supprime les dossiers locaux.","title":"Comment fonctionne Seatizen Atlas"},{"location":"zenodo/zenodo-manager/#cheatsheet-de-commandes","text":"Exemples de commandes pour mettre en ligne ou \u00e0 jour des sessions et la base de donn\u00e9es. Mettre les m\u00e9tadonn\u00e9es \u00e0 jour d'un dossier de sessions ( -um ) avec le fichier de m\u00e9tadonn\u00e9es metadata/metadata.json python zenodo-upload.py -efol -pfol /media/bioeos/D/202312_plancha_session -um -pmj metadata/metadata.json Attention, la commande ci-dessus met \u00e0 jour TOUTES les version d'un d\u00e9p\u00f4t sur zenodo. Pour mettre \u00e0 jour que la derni\u00e8re version, il faut utiliser l'argument -umlv Mettre en ligne un dossier de sessions. On aura une version de donn\u00e9es brutes ( -ur ) et une version de processed_data ( -up ) avec les dossiers frames, metadata, et photogrammetrie. Le fichier de m\u00e9tadonn\u00e9es \u00e0 utiliser est ./metadata/metadata_recif3D.json . On force l'envoie des frames car on a pas utilis\u00e9 Jacques pour filtrer les images inutiles (image sous-marine d'AUV). python zenodo-upload.py -efol -pfol ./recif3D_sessions_folder/ -ur -up pmf -pmj ./metadata/metadata_recif3D.json --all_frames_without_filtering_by_useful R\u00e9cup\u00e8re tous les deposits sur Zenodo et supprime ceux qui sont vierges, sans titre et en mode brouillon (Erreur lors d'un envoi, d\u00e9p\u00f4t fant\u00f4me) python zenodo-upload.py -eno -cd Applique le script SQL num\u00e9ro 3 sur le geopackage. Il doit \u00eatre rang\u00e9 dans le dossier https://github.com/SeatizenDOI/zenodo-tools/tree/master/src/sql_connector python zenodo-manager.py -eno -ssn 3 Exporte tous les fichiers d\u00e9riv\u00e9s de la base de donn\u00e9es (CSV, Parquet, darwin core, ...) python zenodo-manager.py -eno -ulo R\u00e9g\u00e8n\u00e8re une base de donn\u00e9es de z\u00e9ro ( -fr ) localement ( -ulo ) et ajoute un dossier de sessions en forcant l'insertion des frames (n'utilise pas Jacques) ( -ffi ). Le programme ne g\u00e9n\u00e8re pas les fichiers d\u00e9riv\u00e9s. python zenodo-manager.py -efol -pfol /media/bioeos/E/2015_plancha_session/ -ulo -ffi -fr -ne # Force inserting frame in database with no export and regenerate database. Envoie sur zenodo une nouvelle version de la base de donn\u00e9e ( -cp ). Le programme ne reg\u00e9n\u00e8re pas les fichiers d\u00e9riv\u00e9s. python zenodo-manager.py -eno -ulo -cp -ne Ajoute des annotations dans la base de donn\u00e9es ( -la ). python zenodo-manager.py -eno -ulo -la ../../Bioeos/annotations_some_image/Export_human/ -ne # Add frames and import annotations. Un fichier suit un certaine nommage date_time__author-name__dataset-name.csv . Par exemple, voici le fichier 20240524_151409__victor-russias__annotations_over_predictions_1.csv : FileName,Acropore_branched,Acropore_digitised,Acropore_sub_massive,Acropore_tabular,Algae_assembly,Algae_drawn_up,Algae_limestone,Algae_sodding,Atra/Leucospilota,Bleached_coral,Blurred,Dead_coral,Fish,Homo_sapiens,Human_object,Living_coral,Millepore,No_acropore_encrusting,No_acropore_foliaceous,No_acropore_massive,No_acropore_solitary,No_acropore_sub_massive,Rock,Rubble,Sand,Sea_cucumber,Sea_urchins,Sponge,Syringodium_isoetifolium,Thalassodendron_ciliatum,Useless 20230203_REU-GRANDFOND_ASV-1_00_1_197.jpeg,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 20230203_REU-GRANDFOND_ASV-1_00_1_201.jpeg,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 20230203_REU-GRANDFOND_ASV-1_00_1_212.jpeg,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 20230203_REU-GRANDFOND_ASV-1_00_1_218.jpeg,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0 Si une image n'est pas pr\u00e9sente d\u00e9j\u00e0 dans la table frames (li\u00e9 \u00e0 un DOI), on ne garde pas. Si un label d'annotation n'est pas pr\u00e9sent dans la base de donn\u00e9es, on n'ajoute pas l'annotation.","title":"Cheatsheet de commandes"},{"location":"zenodo/zenodo-tools/","text":"Pr\u00e9sentation de Zenodo Tools Ce tutoriel porte sur Zenodo Tools , un ensemble de scripts con\u00e7us pour g\u00e9rer les donn\u00e9es de session Seatizen avec la plateforme Zenodo. Ces scripts offrent diff\u00e9rentes fonctionnalit\u00e9s, notamment l'envoi, le t\u00e9l\u00e9chargement, la gestion et la mise \u00e0 jour des donn\u00e9es. Zenodo Tools est disponible sur le d\u00e9p\u00f4t GitHub suivant : https://github.com/SeatizenDOI/zenodo-tools Installation Il est n\u00e9cessaire d'installer un environnement de d\u00e9veloppement pour utiliser ces outils. Merci de suivre ce tutoriel : https://github.com/SeatizenDOI/zenodo-tools/blob/master/Tutorial.md Les scripts Zenodo Tools et leurs fonctions Zenodo Upload : Permet d'envoyer une session en ligne sur Zenodo. Ce script r\u00e9cup\u00e8re les donn\u00e9es brutes et process\u00e9es locales, cr\u00e9e diff\u00e9rentes versions, ainsi que les descriptions et les m\u00e9tadonn\u00e9es associ\u00e9es. Zenodo Download : Permet de r\u00e9cup\u00e9rer les donn\u00e9es d'une session depuis Zenodo. Le t\u00e9l\u00e9chargement se fait en fonction du nom de la session ou du DOI . Il peut r\u00e9cup\u00e9rer les donn\u00e9es process\u00e9es ou les donn\u00e9es brutes. Zenodo Manager : Permet de g\u00e9rer la base de donn\u00e9es Seatizen Atlas. Cr\u00e9e la base de donn\u00e9es Seatizen Atlas. Peut chercher le dernier jeu de donn\u00e9es package en ligne ou en cr\u00e9er un nouveau. Dans l'usage quotidien, il permet principalement d' ajouter une session dans la base de donn\u00e9es . Pr\u00e9-requis pour l'ajout : La session doit \u00eatre pr\u00e9sente en local et contenir au moins le fichier metadata et le fichier IA . Permet \u00e9galement d'ajouter des annotations . Zenodo auto-update : Permet de mettre \u00e0 jour automatiquement la base de donn\u00e9es. Contrairement \u00e0 Zenodo Manager, il n'y a pas besoin d'avoir les fichiers en local . Il va t\u00e9l\u00e9charger les fichiers depuis Zenodo pour ensuite les mettre \u00e0 jour. C'est un processus un peu plus long. Zenodo Monitoring : Ancienne application Dash. Utilis\u00e9e auparavant pour l'interface web. Elle n'est plus utilis\u00e9e mais n'est pas encore supprim\u00e9e du d\u00e9p\u00f4t.","title":"Introduction"},{"location":"zenodo/zenodo-tools/#presentation-de-zenodo-tools","text":"Ce tutoriel porte sur Zenodo Tools , un ensemble de scripts con\u00e7us pour g\u00e9rer les donn\u00e9es de session Seatizen avec la plateforme Zenodo. Ces scripts offrent diff\u00e9rentes fonctionnalit\u00e9s, notamment l'envoi, le t\u00e9l\u00e9chargement, la gestion et la mise \u00e0 jour des donn\u00e9es. Zenodo Tools est disponible sur le d\u00e9p\u00f4t GitHub suivant : https://github.com/SeatizenDOI/zenodo-tools","title":"Pr\u00e9sentation de Zenodo Tools"},{"location":"zenodo/zenodo-tools/#installation","text":"Il est n\u00e9cessaire d'installer un environnement de d\u00e9veloppement pour utiliser ces outils. Merci de suivre ce tutoriel : https://github.com/SeatizenDOI/zenodo-tools/blob/master/Tutorial.md","title":"Installation"},{"location":"zenodo/zenodo-tools/#les-scripts-zenodo-tools-et-leurs-fonctions","text":"","title":"Les scripts Zenodo Tools et leurs fonctions"},{"location":"zenodo/zenodo-tools/#zenodo-upload-permet-denvoyer-une-session-en-ligne-sur-zenodo","text":"Ce script r\u00e9cup\u00e8re les donn\u00e9es brutes et process\u00e9es locales, cr\u00e9e diff\u00e9rentes versions, ainsi que les descriptions et les m\u00e9tadonn\u00e9es associ\u00e9es.","title":"Zenodo Upload : Permet d'envoyer une session en ligne sur Zenodo."},{"location":"zenodo/zenodo-tools/#zenodo-download-permet-de-recuperer-les-donnees-dune-session-depuis-zenodo","text":"Le t\u00e9l\u00e9chargement se fait en fonction du nom de la session ou du DOI . Il peut r\u00e9cup\u00e9rer les donn\u00e9es process\u00e9es ou les donn\u00e9es brutes.","title":"Zenodo Download : Permet de r\u00e9cup\u00e9rer les donn\u00e9es d'une session depuis Zenodo."},{"location":"zenodo/zenodo-tools/#zenodo-manager-permet-de-gerer-la-base-de-donnees-seatizen-atlas","text":"Cr\u00e9e la base de donn\u00e9es Seatizen Atlas. Peut chercher le dernier jeu de donn\u00e9es package en ligne ou en cr\u00e9er un nouveau. Dans l'usage quotidien, il permet principalement d' ajouter une session dans la base de donn\u00e9es . Pr\u00e9-requis pour l'ajout : La session doit \u00eatre pr\u00e9sente en local et contenir au moins le fichier metadata et le fichier IA . Permet \u00e9galement d'ajouter des annotations .","title":"Zenodo Manager : Permet de g\u00e9rer la base de donn\u00e9es Seatizen Atlas."},{"location":"zenodo/zenodo-tools/#zenodo-auto-update-permet-de-mettre-a-jour-automatiquement-la-base-de-donnees","text":"Contrairement \u00e0 Zenodo Manager, il n'y a pas besoin d'avoir les fichiers en local . Il va t\u00e9l\u00e9charger les fichiers depuis Zenodo pour ensuite les mettre \u00e0 jour. C'est un processus un peu plus long.","title":"Zenodo auto-update : Permet de mettre \u00e0 jour automatiquement la base de donn\u00e9es."},{"location":"zenodo/zenodo-tools/#zenodo-monitoring-ancienne-application-dash","text":"Utilis\u00e9e auparavant pour l'interface web. Elle n'est plus utilis\u00e9e mais n'est pas encore supprim\u00e9e du d\u00e9p\u00f4t.","title":"Zenodo Monitoring : Ancienne application Dash."},{"location":"zenodo/zenodo-upload/","text":"Pr\u00e9paration et Envoi avec zenodo-upload.py Le script zenodo-upload.py du d\u00e9p\u00f4t Zenodo Tools est con\u00e7u pour automatiser l'envoi d'une session Seatizen locale vers Zenodo. L'op\u00e9ration n\u00e9cessite la pr\u00e9paration de plusieurs fichiers de m\u00e9tadonn\u00e9es. Zenodo Upload est disponible sur le d\u00e9p\u00f4t GitHub suivant : https://github.com/SeatizenDOI/zenodo-tools \u00c9tape 1 : Fichiers Locaux Requis Pour commencer l'envoi, la session doit \u00eatre pr\u00e9sente en local et vous devez pr\u00e9parer deux fichiers CSV pour le suivi des m\u00e9tadonn\u00e9es et des contributeurs. 1. Fichier de Suivi de Session ( suivi_session.csv ) Ce fichier CSV sert \u00e0 d\u00e9finir les informations de base de chaque session \u00e0 envoyer. Tous les champs que zenodo accepte sont ici https://developers.zenodo.org/#representation au niveau de contributors . session_name,Creators,DataManager,DataCollector,ProjectMember 20150611_REU-St-Gilles_scuba,\"PM, TB, MR, LM\",VI,,, 20150615_REU-La-Saline_scuba,\"PM, TB, MR, LM\",VI,,, 20150616_REU-La-Saline_scuba,\"PM, TB, MR, LM\",VI,,, 20150617_REU-St-Leu_scuba ,\"PM, TB, MR, LM\",VI,,, 20150619_REU-St-Gilles_scuba,\"PM, TB, MR, LM\",VI,,, Exemple de structure suivi_session.csv 2. Fichier des Contributeurs ( contributors.csv ) Ce fichier associe les initiales (utilis\u00e9es dans le Fichier de Suivi) aux noms complets et aux affili\u00e9s des personnes. id,name,affiliation,orcid AB,Alexandre Boyer,\"UMR Marbec, IRD, La R\u00e9union\", France,0009-0002-2787-1044 AJ,Alexis Joly,\"INRIA Zenith, Montpellier, France\",0000-0002-2161-9940 AG,Andrea Goharzadeh,\"Ifremer DOI, La R\u00e9union, France\", Exemple de structure contributors.csv \u00c9tape 2 : Lier les Donn\u00e9es via metadata.json Les deux fichiers CSV (Suivi de Session et Contributeurs) doivent \u00eatre li\u00e9s ensemble via le fichier de configuration principal du script : metadata.json . Ce fichier JSON est l'endroit o\u00f9 vous sp\u00e9cifiez les chemins d'acc\u00e8s \u00e0 vos fichiers CSV et d'autres param\u00e8tres pour le processus d'upload. Exemple de structure metadata.json \u00c9tape 3 : Logique Interne du Script Le code de zenodo-upload.py est con\u00e7u pour automatiser certaines d\u00e9terminations de m\u00e9tadonn\u00e9es bas\u00e9es sur le contenu de la session : D\u00e9termination de la Plateforme d'Acquisition : Le script analyse automatiquement le type de plateforme utilis\u00e9e (par exemple, UVC, ASV, UVC) depuis le nom de la session. Note Sp\u00e9ciale UVC : Les sessions UVC sont souvent trait\u00e9es via une classe sp\u00e9ciale, notamment pour les sessions d'Amoros. Note Sp\u00e9ciale Scuba : L'impl\u00e9mentation pour Scuba peut \u00eatre int\u00e9gr\u00e9e diff\u00e9remment ou dans une logique sp\u00e9cifique, potentiellement class\u00e9e avec UVC. M\u00e9tadonn\u00e9e ISO 19115 : Attention : La g\u00e9n\u00e9ration de la m\u00e9tadonn\u00e9e ISO 19115 est actuellement configur\u00e9e pour \u00eatre sp\u00e9cifique aux exigences d'Ifremer . Si d'autres utilisateurs ou institutions souhaitent utiliser ce script, il faudra probablement modifier les noms ou la structure utilis\u00e9e pour cette norme afin de s'adapter \u00e0 leurs propres standards.","title":"Envoyer une session sur Zenodo"},{"location":"zenodo/zenodo-upload/#preparation-et-envoi-avec-zenodo-uploadpy","text":"Le script zenodo-upload.py du d\u00e9p\u00f4t Zenodo Tools est con\u00e7u pour automatiser l'envoi d'une session Seatizen locale vers Zenodo. L'op\u00e9ration n\u00e9cessite la pr\u00e9paration de plusieurs fichiers de m\u00e9tadonn\u00e9es. Zenodo Upload est disponible sur le d\u00e9p\u00f4t GitHub suivant : https://github.com/SeatizenDOI/zenodo-tools","title":"Pr\u00e9paration et Envoi avec zenodo-upload.py"},{"location":"zenodo/zenodo-upload/#etape-1-fichiers-locaux-requis","text":"Pour commencer l'envoi, la session doit \u00eatre pr\u00e9sente en local et vous devez pr\u00e9parer deux fichiers CSV pour le suivi des m\u00e9tadonn\u00e9es et des contributeurs.","title":"\u00c9tape 1 : Fichiers Locaux Requis"},{"location":"zenodo/zenodo-upload/#1-fichier-de-suivi-de-session-suivi_sessioncsv","text":"Ce fichier CSV sert \u00e0 d\u00e9finir les informations de base de chaque session \u00e0 envoyer. Tous les champs que zenodo accepte sont ici https://developers.zenodo.org/#representation au niveau de contributors . session_name,Creators,DataManager,DataCollector,ProjectMember 20150611_REU-St-Gilles_scuba,\"PM, TB, MR, LM\",VI,,, 20150615_REU-La-Saline_scuba,\"PM, TB, MR, LM\",VI,,, 20150616_REU-La-Saline_scuba,\"PM, TB, MR, LM\",VI,,, 20150617_REU-St-Leu_scuba ,\"PM, TB, MR, LM\",VI,,, 20150619_REU-St-Gilles_scuba,\"PM, TB, MR, LM\",VI,,, Exemple de structure suivi_session.csv","title":"1. Fichier de Suivi de Session (suivi_session.csv)"},{"location":"zenodo/zenodo-upload/#2-fichier-des-contributeurs-contributorscsv","text":"Ce fichier associe les initiales (utilis\u00e9es dans le Fichier de Suivi) aux noms complets et aux affili\u00e9s des personnes. id,name,affiliation,orcid AB,Alexandre Boyer,\"UMR Marbec, IRD, La R\u00e9union\", France,0009-0002-2787-1044 AJ,Alexis Joly,\"INRIA Zenith, Montpellier, France\",0000-0002-2161-9940 AG,Andrea Goharzadeh,\"Ifremer DOI, La R\u00e9union, France\", Exemple de structure contributors.csv","title":"2. Fichier des Contributeurs (contributors.csv)"},{"location":"zenodo/zenodo-upload/#etape-2-lier-les-donnees-via-metadatajson","text":"Les deux fichiers CSV (Suivi de Session et Contributeurs) doivent \u00eatre li\u00e9s ensemble via le fichier de configuration principal du script : metadata.json . Ce fichier JSON est l'endroit o\u00f9 vous sp\u00e9cifiez les chemins d'acc\u00e8s \u00e0 vos fichiers CSV et d'autres param\u00e8tres pour le processus d'upload. Exemple de structure metadata.json","title":"\u00c9tape 2 : Lier les Donn\u00e9es via metadata.json"},{"location":"zenodo/zenodo-upload/#etape-3-logique-interne-du-script","text":"Le code de zenodo-upload.py est con\u00e7u pour automatiser certaines d\u00e9terminations de m\u00e9tadonn\u00e9es bas\u00e9es sur le contenu de la session : D\u00e9termination de la Plateforme d'Acquisition : Le script analyse automatiquement le type de plateforme utilis\u00e9e (par exemple, UVC, ASV, UVC) depuis le nom de la session. Note Sp\u00e9ciale UVC : Les sessions UVC sont souvent trait\u00e9es via une classe sp\u00e9ciale, notamment pour les sessions d'Amoros. Note Sp\u00e9ciale Scuba : L'impl\u00e9mentation pour Scuba peut \u00eatre int\u00e9gr\u00e9e diff\u00e9remment ou dans une logique sp\u00e9cifique, potentiellement class\u00e9e avec UVC. M\u00e9tadonn\u00e9e ISO 19115 : Attention : La g\u00e9n\u00e9ration de la m\u00e9tadonn\u00e9e ISO 19115 est actuellement configur\u00e9e pour \u00eatre sp\u00e9cifique aux exigences d'Ifremer . Si d'autres utilisateurs ou institutions souhaitent utiliser ce script, il faudra probablement modifier les noms ou la structure utilis\u00e9e pour cette norme afin de s'adapter \u00e0 leurs propres standards.","title":"\u00c9tape 3 : Logique Interne du Script"}]}